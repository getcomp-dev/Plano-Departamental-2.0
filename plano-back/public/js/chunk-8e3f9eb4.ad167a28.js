(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8e3f9eb4"],{"088c":function(e,t,a){"use strict";var n=a("5b6c"),r=a.n(n);r.a},"22a5":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-component"},[a("PageHeader",{attrs:{title:"Usuários"}},[a("BaseButton",{attrs:{template:"ajuda"},on:{click:function(t){return e.$refs.modalAjuda.toggle()}}})],1),a("div",{staticClass:"page-content"},[a("div",{staticClass:"div-table"},[a("BaseTable",{scopedSlots:e._u([{key:"thead",fn:function(){return[a("v-th-ordination",{attrs:{currentOrder:e.ordenacaoMainUsers,orderToCheck:"nome",width:"150",align:"start"}},[e._v("\n            Nome\n          ")]),a("v-th-ordination",{attrs:{currentOrder:e.ordenacaoMainUsers,orderToCheck:"login",width:"120",align:"start"}},[e._v("\n            Login\n          ")]),a("v-th-ordination",{attrs:{currentOrder:e.ordenacaoMainUsers,orderToCheck:"admin",orderType:"desc",width:"90",align:"start"}},[e._v("\n            Tipo\n          ")])]},proxy:!0},{key:"tbody",fn:function(){return[e._l(e.UsersOrdered,function(t){return a("tr",{key:t.id,class:{"bg-selected":t.id===e.userSelected},on:{click:function(a){return e.handleClickInUser(t)}}},[a("v-td",{attrs:{width:"150",align:"start"}},[e._v(e._s(t.nome))]),a("v-td",{attrs:{width:"120",align:"start"}},[e._v(e._s(t.login))]),a("v-td",{attrs:{width:"90",align:"start"}},[e._v(e._s(e.adminText(t.admin)))])],1)}),e.UsersOrdered.length?e._e():a("tr",[a("v-td",{attrs:{width:"360",colspan:"3"}},[a("b",[e._v("Nenhum usuário encontrado")])])],1)]},proxy:!0}])})],1),a("Card",{attrs:{title:"Usuário",toggleFooter:e.isEditing},on:{"btn-salvar":e.editUser,"btn-delete":e.openModalDelete,"btn-add":e.createUser,"btn-clean":e.cleanUser},scopedSlots:e._u([{key:"form-group",fn:function(){return[a("div",{staticClass:"row mb-2 mx-0"},[a("div",{staticClass:"form-group col m-0 px-0"},[a("label",{attrs:{required:"",for:"userNome"}},[e._v("Nome")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.userForm.nome,expression:"userForm.nome"}],staticClass:"form-control",attrs:{type:"text",id:"userNome"},domProps:{value:e.userForm.nome},on:{input:function(t){t.target.composing||e.$set(e.userForm,"nome",t.target.value)}}})])]),a("div",{staticClass:"row mb-2 mx-0"},[a("div",{staticClass:"form-group col m-0 px-0"},[a("label",{attrs:{required:"",for:"login"}},[e._v("Login")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.userForm.login,expression:"userForm.login"}],staticClass:"form-control",attrs:{type:"text",id:"login"},domProps:{value:e.userForm.login},on:{input:function(t){t.target.composing||e.$set(e.userForm,"login",t.target.value)}}})])]),e.isEditing?e.isEditing?[a("ButtonSlideSection",{attrs:{isOpen:e.isEditingSenha},on:{"handel-click":e.toggleEditSenha}}),a("transition-group",{attrs:{name:"slideY",mode:"out-in"}},[e.isEditingSenha?[a("div",{key:"senha",staticClass:"row mb-2 mx-0"},[a("div",{staticClass:"form-group col m-0 px-0"},[a("label",{attrs:{required:"",for:"novaSenha"}},[e._v("Nova senha")]),a("InputPassword",{attrs:{iconSize:13,inputId:"novaSenha"},model:{value:e.novaSenha,callback:function(t){e.novaSenha=t},expression:"novaSenha"}})],1)]),a("div",{key:"confirma",staticClass:"row mb-2 mx-0"},[a("div",{staticClass:"form-group col m-0 px-0"},[a("label",{attrs:{required:"",for:"confirmaSenha"}},[e._v("Confirmar nova senha")]),a("InputPassword",{attrs:{iconSize:13,isInvalid:e.confirmaSenha!=e.novaSenha,inputId:"confirmaSenha"},model:{value:e.confirmaSenha,callback:function(t){e.confirmaSenha=t},expression:"confirmaSenha"}})],1)])]:e._e()],2)]:e._e():[a("div",{staticClass:"row mb-2 mx-0"},[a("div",{staticClass:"form-group col m-0 px-0"},[a("label",{attrs:{required:"",for:"novaSenha"}},[e._v("Senha")]),a("InputPassword",{attrs:{iconSize:13,inputId:"novaSenha"},model:{value:e.userForm.senha,callback:function(t){e.$set(e.userForm,"senha",t)},expression:"userForm.senha"}})],1)]),a("div",{staticClass:"row mb-2 mx-0"},[a("div",{staticClass:"form-group col m-0 px-0"},[a("label",{attrs:{required:"",for:"confirmaSenha"}},[e._v("Confirmar senha")]),a("InputPassword",{attrs:{iconSize:13,isInvalid:e.confirmaSenha!=e.userForm.senha,inputId:"confirmaSenha"},model:{value:e.confirmaSenha,callback:function(t){e.confirmaSenha=t},expression:"confirmaSenha"}})],1)])],a("div",{staticClass:"row mb-2 mx-0"},[a("div",{staticClass:"form-group col m-0 px-0"},[a("label",{attrs:{for:"userAdmin"}},[e._v("Tipo")]),a("select",{directives:[{name:"model",rawName:"v-model.number",value:e.userForm.admin,expression:"userForm.admin",modifiers:{number:!0}}],staticClass:"form-control",attrs:{id:"userAdmin"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(t){var a="_value"in t?t._value:t.value;return e._n(a)});e.$set(e.userForm,"admin",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"0"}},[e._v("Consulta")]),a("option",{attrs:{value:"1"}},[e._v("Comissão")]),a("option",{attrs:{value:"2"}},[e._v("Administrador")])])])])]},proxy:!0}])})],1),a("ModalDelete",{ref:"modalDelete",attrs:{isDeleting:e.isEditing},on:{"btn-deletar":e.deleteUser}},[a("li",{staticClass:"list-group-item"},[a("span",[e.isEditing?[e._v("\n          Tem certeza que deseja excluír o usuário\n          "),a("b",[e._v(e._s(e.userForm.nome))]),e._v("\n          ?\n        ")]:[e._v("Nenhum usuário selecionado!")]],2)])]),a("ModalAjuda",{ref:"modalAjuda"},[a("li",{staticClass:"list-group-item"},[a("b",[e._v("Adicionar:")]),e._v("\n      Preencha o cartão em branco à direita e em seguida, clique em Adicionar\n      "),a("font-awesome-icon",{staticClass:"icon-green",attrs:{icon:["fas","plus"]}}),e._v("\n      .\n    ")],1),a("li",{staticClass:"list-group-item"},[a("b",[e._v("Editar:")]),e._v("\n      Clique na linha da tabela do usuário que deseja alterar. Em seguida, no cartão à\n      direita, altere as informações que desejar e clique em Salvar\n      "),a("font-awesome-icon",{staticClass:"icon-green",attrs:{icon:["fas","check"]}}),e._v("\n      .\n    ")],1),a("li",{staticClass:"list-group-item"},[a("b",[e._v("Deletar:")]),e._v("\n      Clique na linha da tabela do usuário que deseja remover. Em seguida, no cartão à\n      direita, clique em Remover\n      "),a("font-awesome-icon",{staticClass:"icon-red",attrs:{icon:["fas","trash-alt"]}}),e._v("\n      e confirme a remoção na janela que será aberta.\n    ")],1),a("li",{staticClass:"list-group-item"},[a("b",[e._v("Limpar:")]),e._v("\n      No cartão à direita, clique em Cancelar\n      "),a("font-awesome-icon",{staticClass:"icon-gray",attrs:{icon:["fas","times"]}}),e._v("\n      , para limpar as informações.\n    ")],1),a("li",{staticClass:"list-group-item"},[a("b",[e._v("Ordenar:")]),e._v("\n      Clique no cabeçalho da tabela, na coluna desejada, para alterar a ordenação das\n      informações.\n    ")])])],1)},r=[],i=a("cebc"),s=(a("ac6a"),a("f3e2"),a("96cf"),a("3b8d")),o=a("2d1f"),c=a.n(o),u=a("f9f3"),l=a("25df"),d=a("d027"),m={nome:"",login:"",senha:"",admin:0},h={name:"Usuarios",components:{Card:l["b"],InputPassword:l["c"],ButtonSlideSection:l["a"],ModalDelete:d["b"],ModalAjuda:d["a"]},data:function(){return{userSelected:null,isEditingSenha:!1,userForm:this.$_.clone(m),novaSenha:"",confirmaSenha:"",ordenacaoMainUsers:{order:"nome",type:"asc"}}},methods:{adminText:function(e){switch(e){case 0:return"Consulta";case 1:return"Comissão";case 2:return"Administrador"}},toggleEditSenha:function(){this.isEditingSenha=!this.isEditingSenha,this.novaSenha="",this.confirmaSenha=""},handleClickInUser:function(e){this.cleanUser(),this.userSelected=e.id,this.showUser(e)},showUser:function(e){this.userForm=this.$_.clone(e)},cleanUser:function(){this.userSelected=null,this.confirmaSenha="",this.isEditingSenha=!1,this.userForm=this.$_.clone(m)},openModalDelete:function(){this.$refs.modalDelete.open()},validateEditUser:function(e){return(!this.isEditingSenha||this.confirmaSenha===this.novaSenha)&&this.validateUser(e)},validateUser:function(e){for(var t=c()(e),a=0;a<t.length;a++){var n=t[a];if((""===n[1]||null===n[1])&&"senha"!==n[0])return!1}return!0},createUser:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$_.clone(this.userForm),this.validateUser(t)){e.next=4;break}return this.pushNotification({type:"error",text:"Campos obrigátorios incompletos ou inválidos."}),e.abrupt("return");case 4:return e.prev=4,e.next=7,u["a"].create(t);case 7:this.pushNotification({type:"success",text:"Usuário criado."}),this.cleanUser(),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](4),this.pushNotification({type:"error",text:e.t0});case 14:case"end":return e.stop()}},e,this,[[4,11]])}));function t(){return e.apply(this,arguments)}return t}(),editUser:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$_.clone(this.userForm),t.senha=this.novaSenha,this.validateEditUser(t)){e.next=5;break}return this.pushNotification({type:"error",text:"Campos obrigátorios incompletos ou inválidos."}),e.abrupt("return");case 5:return e.prev=5,e.next=8,u["a"].updateSuper(t.id,t);case 8:this.pushNotification({type:"success",text:"Usuário atualizado."}),this.novaSenha="",this.confirmaSenha="",e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](5),this.pushNotification({type:"error",text:"Login ou senha inválida"});case 16:case"end":return e.stop()}},e,this,[[5,13]])}));function t(){return e.apply(this,arguments)}return t}(),deleteUser:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$_.clone(this.userForm),e.prev=1,e.next=4,u["a"].delete(t.id,t);case 4:this.pushNotification({type:"success",text:"Usuário ".concat(t.nome," foi removido.")}),this.cleanUser(),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),this.pushNotification({type:"error",text:e.t0});case 11:case"end":return e.stop()}},e,this,[[1,8]])}));function t(){return e.apply(this,arguments)}return t}()},computed:{Users:function(){var e=[];return this.$store.state.usuario.Usuarios.forEach(function(t){e.push(Object(i["a"])({},t,{senha:""}))}),e},UsersOrdered:function(){var e=this.ordenacaoMainUsers,t=e.order,a=e.type,n=function(e){switch(t){case"nome":case"login":return e[t].toLowerCase();default:return e[t]}};return this.$_.orderBy(this.Users,n,a)},isEditing:function(){return null!=this.userSelected}}},v=h,p=(a("088c"),a("2877")),f=Object(p["a"])(v,n,r,!1,null,"6cb7a9ab",null);t["default"]=f.exports},"2d1f":function(e,t,a){e.exports=a("b606")},"5b6c":function(e,t,a){},"9c60":function(e,t,a){var n=a("63b6"),r=a("13c8")(!0);n(n.S,"Object",{entries:function(e){return r(e)}})},b606:function(e,t,a){a("9c60"),e.exports=a("584a").Object.entries}}]);
//# sourceMappingURL=chunk-8e3f9eb4.ad167a28.js.map