{"version":3,"sources":["webpack:///./src/pages/validacoes/lancamentoSIGA/index.vue?38dd","webpack:///./node_modules/lodash-es/isEqual.js","webpack:///src/pages/validacoes/lancamentoSIGA/index.vue","webpack:///./src/pages/validacoes/lancamentoSIGA/index.vue?116e","webpack:///./src/pages/validacoes/lancamentoSIGA/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","$refs","modalAjuda","toggle","scopedSlots","_u","key","fn","ordenacaoConflitos","_v","proxy","_l","conflito","label","turma","id","curso","_s","disciplina","codigo","nome","letra","siga","sistema","conflitosOrdered","length","_e","directives","name","rawName","value","expression","modifiers","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","_n","periodoDasTurmas","multiple","periodo","domProps","ref","handleCompareTurmas","clearCardForm","staticRenderFns","isEqual","other","components","data","conflitos","order","type","methods","inputFilePlano","normalizeTurmasEPedidosSIGA","turmasNormalized","searchConflictsTurmas","pedidoSIGA","pedidoSistema","vagasPeriodizadas","vagasNaoPeriodizadas","forEach","alredyHas","uniqueTurmasOnly","push","turma1","turmasIsEqual","computed","disciplinasGradeDCC1Periodo","disciplinasGradeFiltered","alredyExist","disciplinasGradeFilteredUnique","component"],"mappings":"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","file":"js/chunk-2d0d6792.169882de.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main-component row\"},[_c('portal',{attrs:{\"to\":\"page-header\"}},[_c('BaseButton',{attrs:{\"template\":\"ajuda\"},on:{\"click\":function($event){return _vm.$refs.modalAjuda.toggle()}}})],1),_c('div',{staticClass:\"page-content\"},[_c('div',{staticClass:\"table-div\"},[_c('BaseTable',{scopedSlots:_vm._u([{key:\"thead\",fn:function(){return [_c('v-th-ordination',{attrs:{\"currentOrder\":_vm.ordenacaoConflitos,\"orderToCheck\":\"turma.disciplina.codigo\",\"width\":\"100\",\"paddingX\":\"0\",\"title\":\"Código da Disciplina\"}},[_vm._v(\"\\n            Cód. Disciplina\\n          \")]),_c('v-th-ordination',{attrs:{\"currentOrder\":_vm.ordenacaoConflitos,\"orderToCheck\":\"turma.disciplina.nome\",\"width\":\"300\",\"align\":\"start\"}},[_vm._v(\"\\n            Disciplina\\n          \")]),_c('v-th',{attrs:{\"width\":\"30\",\"title\":\"Turma\"}},[_vm._v(\"T.\")]),_c('v-th-ordination',{attrs:{\"currentOrder\":_vm.ordenacaoConflitos,\"orderToCheck\":\"curso.codigo\",\"width\":\"90\",\"title\":\"Código do Curso\"}},[_vm._v(\"\\n            Cód. Curso\\n          \")]),_c('v-th',{attrs:{\"width\":\"180\",\"align\":\"start\",\"title\":\"Valor do pedido no SIGA\"}},[_vm._v(\"Conflito\")]),_c('v-th',{attrs:{\"width\":\"85\",\"paddingX\":\"0\",\"title\":\"Valor do pedido no SIGA\"}},[_vm._v(\"Valor SIGA\")]),_c('v-th',{attrs:{\"width\":\"85\",\"paddingX\":\"0\",\"title\":\"Valor do pedido no Sistema\"}},[_vm._v(\"Valor Sistema\")])]},proxy:true},{key:\"tbody\",fn:function(){return [_vm._l((_vm.conflitosOrdered),function(conflito){return _c('tr',{key:conflito.label + conflito.turma.id + conflito.curso.id},[_c('v-td',{attrs:{\"width\":\"100\"}},[_vm._v(_vm._s(conflito.turma.disciplina.codigo))]),_c('v-td',{attrs:{\"width\":\"300\",\"align\":\"start\"}},[_vm._v(_vm._s(conflito.turma.disciplina.nome))]),_c('v-td',{attrs:{\"width\":\"30\"}},[_vm._v(_vm._s(conflito.turma.letra))]),_c('v-td',{attrs:{\"width\":\"90\"}},[_vm._v(_vm._s(conflito.curso.codigo))]),_c('v-td',{attrs:{\"width\":\"180\",\"align\":\"start\"}},[_vm._v(_vm._s(conflito.label))]),_c('v-td',{attrs:{\"width\":\"85\"}},[_vm._v(_vm._s(conflito.siga))]),_c('v-td',{attrs:{\"width\":\"85\"}},[_vm._v(_vm._s(conflito.sistema))])],1)}),(!_vm.conflitosOrdered.length)?_c('tr',[_c('v-td',{attrs:{\"width\":\"870\"}},[_c('b',[_vm._v(\"Nenhum conflito encontrado.\")]),_vm._v(\"\\n              Certifiqui-se de selecionar um arquivo correspondente com o plano atual e o periodo\\n              selecionado.\\n            \")])],1):_vm._e()]},proxy:true}])})],1),_c('Card',{attrs:{\"title\":'Validar pedidos'},scopedSlots:_vm._u([{key:\"form-group\",fn:function(){return [_c('div',{staticClass:\"row mb-2 mx-0\"},[_c('div',{staticClass:\"form-group col m-0 px-0\"},[_c('label',{staticClass:\"col-form-label\",attrs:{\"required\":\"\",\"for\":\"nome\"}},[_vm._v(\"Período\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.periodoDasTurmas),expression:\"periodoDasTurmas\",modifiers:{\"number\":true}}],staticClass:\"input-lg form-control form-control-sm\",attrs:{\"id\":\"periodoPlano\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return _vm._n(val)}); _vm.periodoDasTurmas=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.PeriodosLetivos),function(periodo){return _c('option',{key:periodo.id + periodo.nome,domProps:{\"value\":periodo.id}},[_vm._v(\"\\n                \"+_vm._s(periodo.nome)+\"\\n              \")])}),0)])]),_c('div',{staticClass:\"row mb-2 mx-0\"},[_c('div',{staticClass:\"form-group col m-0 px-0\"},[_c('label',{staticClass:\"col-form-label\",attrs:{\"required\":\"\",\"for\":\"turmaFile\"}},[_vm._v(\"\\n              Arquivo .csv do plano SIGA\\n            \")]),_c('input',{ref:\"inputFilePlano\",staticClass:\"form-control-file mt-1\",attrs:{\"type\":\"file\",\"id\":\"turmaFile\",\"accept\":\".csv\"}})])])]},proxy:true},{key:\"footer\",fn:function(){return [_c('BaseButton',{attrs:{\"template\":\"Salvar\",\"title\":'Iniciar'},on:{\"click\":_vm.handleCompareTurmas}}),_c('BaseButton',{attrs:{\"template\":\"cancelar\"},on:{\"click\":_vm.clearCardForm}})]},proxy:true}])})],1),_c('ModalAjuda',{ref:\"modalAjuda\"},[_c('li',{staticClass:\"list-group-item\"},[_c('b',[_vm._v(\"Limpar:\")]),_vm._v(\"\\n      No cartão à direita, clique em Cancelar\\n      \"),_c('font-awesome-icon',{staticClass:\"icon-gray\",attrs:{\"icon\":['fas', 'times']}}),_vm._v(\"\\n      , para limpar as informações.\\n    \")],1),_c('li',{staticClass:\"list-group-item\"},[_c('b',[_vm._v(\"Ordenar:\")]),_vm._v(\"\\n      Clique no cabeçalho da tabela, na coluna desejada, para alterar a ordenação das informações.\\n    \")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import baseIsEqual from './_baseIsEqual.js';\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nexport default isEqual;\n","<template>\r\n  <div class=\"main-component row\">\r\n    <portal to=\"page-header\">\r\n      <BaseButton template=\"ajuda\" @click=\"$refs.modalAjuda.toggle()\" />\r\n    </portal>\r\n\r\n    <div class=\"page-content\">\r\n      <div class=\"table-div\">\r\n        <BaseTable>\r\n          <template #thead>\r\n            <v-th-ordination\r\n              :currentOrder=\"ordenacaoConflitos\"\r\n              orderToCheck=\"turma.disciplina.codigo\"\r\n              width=\"100\"\r\n              paddingX=\"0\"\r\n              title=\"Código da Disciplina\"\r\n            >\r\n              Cód. Disciplina\r\n            </v-th-ordination>\r\n            <v-th-ordination\r\n              :currentOrder=\"ordenacaoConflitos\"\r\n              orderToCheck=\"turma.disciplina.nome\"\r\n              width=\"300\"\r\n              align=\"start\"\r\n            >\r\n              Disciplina\r\n            </v-th-ordination>\r\n            <v-th width=\"30\" title=\"Turma\">T.</v-th>\r\n            <v-th-ordination\r\n              :currentOrder=\"ordenacaoConflitos\"\r\n              orderToCheck=\"curso.codigo\"\r\n              width=\"90\"\r\n              title=\"Código do Curso\"\r\n            >\r\n              Cód. Curso\r\n            </v-th-ordination>\r\n            <v-th width=\"180\" align=\"start\" title=\"Valor do pedido no SIGA\">Conflito</v-th>\r\n            <v-th width=\"85\" paddingX=\"0\" title=\"Valor do pedido no SIGA\">Valor SIGA</v-th>\r\n            <v-th width=\"85\" paddingX=\"0\" title=\"Valor do pedido no Sistema\">Valor Sistema</v-th>\r\n          </template>\r\n\r\n          <template #tbody>\r\n            <tr\r\n              v-for=\"conflito in conflitosOrdered\"\r\n              :key=\"conflito.label + conflito.turma.id + conflito.curso.id\"\r\n            >\r\n              <v-td width=\"100\">{{ conflito.turma.disciplina.codigo }}</v-td>\r\n              <v-td width=\"300\" align=\"start\">{{ conflito.turma.disciplina.nome }}</v-td>\r\n              <v-td width=\"30\">{{ conflito.turma.letra }}</v-td>\r\n              <v-td width=\"90\">{{ conflito.curso.codigo }}</v-td>\r\n              <v-td width=\"180\" align=\"start\">{{ conflito.label }}</v-td>\r\n              <v-td width=\"85\">{{ conflito.siga }}</v-td>\r\n              <v-td width=\"85\">{{ conflito.sistema }}</v-td>\r\n            </tr>\r\n\r\n            <tr v-if=\"!conflitosOrdered.length\">\r\n              <v-td width=\"870\">\r\n                <b>Nenhum conflito encontrado.</b>\r\n                Certifiqui-se de selecionar um arquivo correspondente com o plano atual e o periodo\r\n                selecionado.\r\n              </v-td>\r\n            </tr>\r\n          </template>\r\n        </BaseTable>\r\n      </div>\r\n\r\n      <Card :title=\"'Validar pedidos'\">\r\n        <template #form-group>\r\n          <div class=\"row mb-2 mx-0\">\r\n            <div class=\"form-group col m-0 px-0\">\r\n              <label required for=\"nome\" class=\"col-form-label\">Período</label>\r\n              <select\r\n                id=\"periodoPlano\"\r\n                v-model.number=\"periodoDasTurmas\"\r\n                class=\"input-lg form-control form-control-sm\"\r\n              >\r\n                <option\r\n                  v-for=\"periodo in PeriodosLetivos\"\r\n                  :key=\"periodo.id + periodo.nome\"\r\n                  :value=\"periodo.id\"\r\n                >\r\n                  {{ periodo.nome }}\r\n                </option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"row mb-2 mx-0\">\r\n            <div class=\"form-group col m-0 px-0\">\r\n              <label required for=\"turmaFile\" class=\"col-form-label\">\r\n                Arquivo .csv do plano SIGA\r\n              </label>\r\n              <input\r\n                type=\"file\"\r\n                id=\"turmaFile\"\r\n                ref=\"inputFilePlano\"\r\n                class=\"form-control-file mt-1\"\r\n                accept=\".csv\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </template>\r\n\r\n        <template #footer>\r\n          <BaseButton template=\"Salvar\" :title=\"'Iniciar'\" @click=\"handleCompareTurmas\" />\r\n          <BaseButton template=\"cancelar\" @click=\"clearCardForm\" />\r\n        </template>\r\n      </Card>\r\n    </div>\r\n\r\n    <ModalAjuda ref=\"modalAjuda\">\r\n      <li class=\"list-group-item\">\r\n        <b>Limpar:</b>\r\n        No cartão à direita, clique em Cancelar\r\n        <font-awesome-icon :icon=\"['fas', 'times']\" class=\"icon-gray\" />\r\n        , para limpar as informações.\r\n      </li>\r\n      <li class=\"list-group-item\">\r\n        <b>Ordenar:</b>\r\n        Clique no cabeçalho da tabela, na coluna desejada, para alterar a ordenação das informações.\r\n      </li>\r\n    </ModalAjuda>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport { find, some, isEqual, orderBy } from \"lodash-es\";\r\nimport { parseCSVFileToArray } from \"@/common/utils\";\r\nimport { Card } from \"@/components/ui\";\r\nimport { ModalAjuda } from \"@/components/modals\";\r\nimport {\r\n  parseTurmaSIGAToTurma,\r\n  parseTurmaSIGAToPedido,\r\n  getKeysTurmaSIGA,\r\n  validateTurmasSIGA,\r\n} from \"@/common/utils/turmasSIGA\";\r\n\r\nexport default {\r\n  name: \"ValidaçãoLançamentoSIGA\",\r\n  components: { Card, ModalAjuda },\r\n  data() {\r\n    return {\r\n      periodoDasTurmas: 1,\r\n      conflitos: [],\r\n      ordenacaoConflitos: {\r\n        order: \"turma.disciplina.codigo\",\r\n        type: \"asc\",\r\n      },\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    clearCardForm() {\r\n      this.periodoDasTurmas = 1;\r\n      this.$refs.inputFilePlano.value = \"\";\r\n    },\r\n\r\n    async handleCompareTurmas() {\r\n      if (!this.periodoDasTurmas) {\r\n        this.pushNotification({\r\n          type: \"error\",\r\n          text: \"Nenhum período selecionado\",\r\n        });\r\n        return;\r\n      }\r\n      const [fileTurmas] = this.$refs.inputFilePlano.files;\r\n      if (!fileTurmas) {\r\n        this.pushNotification({\r\n          type: \"error\",\r\n          text: \"Nenhum arquivo selecionado\",\r\n        });\r\n        return;\r\n      }\r\n\r\n      try {\r\n        this.setLoading({ type: \"partial\", value: true });\r\n        const turmasFile = await parseCSVFileToArray(fileTurmas);\r\n        validateTurmasSIGA(turmasFile);\r\n\r\n        const turmasSIGANormalized = this.normalizeTurmasEPedidosSIGA(\r\n          turmasFile,\r\n          this.periodoDasTurmas\r\n        );\r\n        this.searchConflictsTurmas(turmasSIGANormalized);\r\n      } catch (error) {\r\n        this.pushNotification({\r\n          type: \"error\",\r\n          text: error.message || \"\",\r\n        });\r\n      } finally {\r\n        this.setLoading({ type: \"partial\", value: false });\r\n      }\r\n    },\r\n\r\n    normalizeTurmasEPedidosSIGA(turmasSIGA, periodo) {\r\n      const keysTurmaSIGA = getKeysTurmaSIGA(turmasSIGA[0]);\r\n      const turmasNormalized = [];\r\n      let currentTurma = {};\r\n\r\n      for (const turmaSIGA of turmasSIGA) {\r\n        const newTurma = parseTurmaSIGAToTurma(turmaSIGA, keysTurmaSIGA, null, periodo);\r\n        if (!newTurma) continue;\r\n        newTurma.pedidosOferecidos = []; //Array com todos pedidos da turmas\r\n\r\n        const pedidoOferecido = parseTurmaSIGAToPedido(turmaSIGA, keysTurmaSIGA, null);\r\n        if (pedidoOferecido) {\r\n          const { vagasOferecidas, vagasOcupadas } = pedidoOferecido;\r\n          pedidoOferecido.totalVagas = vagasOferecidas + vagasOcupadas;\r\n        }\r\n\r\n        // Se turma igual ao currentTurma apenas adiciona o pedido na turma anterior\r\n        if (this.turmasIsEqual(currentTurma, newTurma)) {\r\n          if (pedidoOferecido)\r\n            turmasNormalized[turmasNormalized.length - 1].pedidosOferecidos.push(pedidoOferecido);\r\n        } else {\r\n          // Se é uma turma nova então adiciona a turma e o pedido\r\n          if (pedidoOferecido) newTurma.pedidosOferecidos.push(pedidoOferecido);\r\n          turmasNormalized.push(newTurma);\r\n          currentTurma = { ...newTurma };\r\n        }\r\n      }\r\n\r\n      return turmasNormalized;\r\n    },\r\n\r\n    searchConflictsTurmas(turmasSIGA) {\r\n      this.conflitos = [];\r\n      //Turmas do periodo selecionado, exclui perfil MAC que não esta plano DCC do SIGA, e exclui as\r\n      //disciplinas que são do primeiro periodo de algum gradeDCC\r\n      const turmasDoSistemaFiltered = this.AllTurmas.filter(\r\n        (turma) =>\r\n          turma.periodo === this.periodoDasTurmas &&\r\n          turma.disciplina.Perfil != 15 &&\r\n          !some(this.disciplinasGradeDCC1Periodo, [\"Disciplina\", turma.Disciplina])\r\n      );\r\n\r\n      for (const turmaSistema of turmasDoSistemaFiltered) {\r\n        const turmaSIGAFound = turmasSIGA.find(\r\n          (turmaFile) =>\r\n            turmaSistema.Disciplina == turmaFile.Disciplina && turmaSistema.letra == turmaFile.letra\r\n        );\r\n\r\n        if (!turmaSIGAFound) {\r\n          this.conflitos.push({\r\n            label: \"Turma existe apenas no sistema\",\r\n            siga: \"-\",\r\n            sistema: \"-\",\r\n            turma: { ...turmaSistema },\r\n            curso: {\r\n              codigo: \"-\",\r\n            },\r\n          });\r\n          continue;\r\n        }\r\n\r\n        const pedidosDaTurmaSistema = this.Pedidos[turmaSistema.id];\r\n\r\n        turmaSIGAFound.pedidosOferecidos.forEach((pedidoSIGA) => {\r\n          const pedidoSistemaFound = pedidosDaTurmaSistema.find(\r\n            (pedidoSis) => pedidoSis.Curso == pedidoSIGA.Curso\r\n          );\r\n\r\n          if (!pedidoSistemaFound) {\r\n            this.conflitos.push({\r\n              label: \"Pedido não existe no sistema\",\r\n              siga: pedidoSIGA.totalVagas,\r\n              sistema: \"-\",\r\n              turma: { ...turmaSistema },\r\n              curso: find(this.AllCursos, [\"id\", pedidoSistemaFound.Curso]),\r\n            });\r\n            return;\r\n          }\r\n\r\n          const totalVagasSistema =\r\n            pedidoSistemaFound.vagasPeriodizadas + pedidoSistemaFound.vagasNaoPeriodizadas;\r\n\r\n          if (totalVagasSistema != pedidoSIGA.totalVagas) {\r\n            this.conflitos.push({\r\n              label: \"Pedido com valores diferentes\",\r\n              siga: pedidoSIGA.totalVagas,\r\n              sistema: totalVagasSistema == 0 ? \"-\" : totalVagasSistema,\r\n              turma: { ...turmaSistema },\r\n              curso: find(this.AllCursos, [\"id\", pedidoSistemaFound.Curso]),\r\n            });\r\n            return;\r\n          }\r\n        });\r\n\r\n        pedidosDaTurmaSistema\r\n          .filter((pedido) => pedido.vagasPeriodizadas != 0 || pedido.vagasNaoPeriodizadas != 0)\r\n          .forEach((pedidoSistema) => {\r\n            const pedidoSIGA = turmaSIGAFound.pedidosOferecidos.find(\r\n              (pedidoArq) => pedidoSistema.Curso == pedidoArq.Curso\r\n            );\r\n\r\n            if (!pedidoSIGA) {\r\n              this.conflitos.push({\r\n                label: \"Pedido não existe no SIGA\",\r\n                siga: \"-\",\r\n                sistema: pedidoSistema.vagasPeriodizadas + pedidoSistema.vagasNaoPeriodizadas,\r\n                turma: { ...turmaSistema },\r\n                curso: find(this.AllCursos, [\"id\", pedidoSistema.Curso]),\r\n              });\r\n              return;\r\n            }\r\n          });\r\n      }\r\n\r\n      //Remove turmas duplicados que existe no arquivo\r\n      const uniqueTurmasOnly = [];\r\n      this.conflitos.forEach((turma1) => {\r\n        const alredyHas = uniqueTurmasOnly.find((turma2) => isEqual(turma1, turma2));\r\n\r\n        if (!alredyHas) uniqueTurmasOnly.push(turma1);\r\n      });\r\n      this.conflitos = [...uniqueTurmasOnly];\r\n    },\r\n\r\n    turmasIsEqual(turma1, turma2) {\r\n      return (\r\n        turma1.letra === turma2.letra &&\r\n        turma1.Disciplina === turma2.Disciplina &&\r\n        turma1.Horario1 === turma2.Horario1 &&\r\n        turma1.Horario2 === turma2.Horario2\r\n      );\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"AllCursos\", \"AllTurmas\", \"PeriodosLetivos\", \"Pedidos\", \"DisciplinasGrades\"]),\r\n\r\n    conflitosOrdered() {\r\n      const { order, type } = this.ordenacaoConflitos;\r\n      return orderBy(this.conflitos, order, type);\r\n    },\r\n\r\n    disciplinasGradeDCC1Periodo() {\r\n      const disciplinasGradeFiltered = this.DisciplinasGrades.filter(\r\n        (disciplinaGrade) => disciplinaGrade.periodo === 1\r\n      );\r\n\r\n      const disciplinasGradeFilteredUnique = [];\r\n      disciplinasGradeFiltered.forEach((disciplinaGrade) => {\r\n        const alredyExist = disciplinasGradeFilteredUnique.find(\r\n          (uniqueDisciplinaGrade) => uniqueDisciplinaGrade.Disciplina === disciplinaGrade.Disciplina\r\n        );\r\n\r\n        if (!alredyExist) disciplinasGradeFilteredUnique.push({ ...disciplinaGrade });\r\n      });\r\n\r\n      return disciplinasGradeFilteredUnique;\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3868b2bc&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}