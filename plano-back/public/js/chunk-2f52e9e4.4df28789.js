(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f52e9e4"],{"1c4c":function(t,e,r){"use strict";var n=r("9b43"),a=r("5ca1"),i=r("4bf8"),o=r("1fa8"),c=r("33a4"),u=r("9def"),s=r("f1ae"),l=r("27ee");a(a.S+a.F*!r("5cc5")((function(t){Array.from(t)})),"Array",{from:function(t){var e,r,a,f,d=i(t),p="function"==typeof this?this:Array,b=arguments.length,h=b>1?arguments[1]:void 0,v=void 0!==h,m=0,y=l(d);if(v&&(h=n(h,b>2?arguments[2]:void 0,2)),void 0==y||p==Array&&c(y))for(e=u(d.length),r=new p(e);e>m;m++)s(r,m,v?h(d[m],m):d[m]);else for(f=y.call(d),r=new p;!(a=f.next()).done;m++)s(r,m,v?o(f,h,[a.value,m],!0):a.value);return r.length=m,r}})},"2caf":function(t,e,r){var n=r("5ca1");n(n.S,"Array",{isArray:r("1169")})},"2fdb":function(t,e,r){"use strict";var n=r("5ca1"),a=r("d2c8"),i="includes";n(n.P+n.F*r("5147")(i),"String",{includes:function(t){return!!~a(this,t,i).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"37c8":function(t,e,r){e.f=r("2b4c")},3846:function(t,e,r){r("9e1e")&&"g"!=/./g.flags&&r("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:r("0bfb")})},"3a72":function(t,e,r){var n=r("7726"),a=r("8378"),i=r("2d00"),o=r("37c8"),c=r("86cc").f;t.exports=function(t){var e=a.Symbol||(a.Symbol=i?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||c(e,t,{value:o.f(t)})}},5147:function(t,e,r){var n=r("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,!"/./"[t](e)}catch(a){}}return!0}},"5df3":function(t,e,r){"use strict";var n=r("02f4")(!0);r("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})}))},"67ab":function(t,e,r){var n=r("ca5a")("meta"),a=r("d3f4"),i=r("69a8"),o=r("86cc").f,c=0,u=Object.isExtensible||function(){return!0},s=!r("79e5")((function(){return u(Object.preventExtensions({}))})),l=function(t){o(t,n,{value:{i:"O"+ ++c,w:{}}})},f=function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,n)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[n].i},d=function(t,e){if(!i(t,n)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[n].w},p=function(t){return s&&b.NEED&&u(t)&&!i(t,n)&&l(t),t},b=t.exports={KEY:n,NEED:!1,fastKey:f,getWeak:d,onFreeze:p}},"6b54":function(t,e,r){"use strict";r("3846");var n=r("cb7c"),a=r("0bfb"),i=r("9e1e"),o="toString",c=/./[o],u=function(t){r("2aba")(RegExp.prototype,o,t,!0)};r("79e5")((function(){return"/a/b"!=c.call({source:"a",flags:"b"})}))?u((function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!i&&t instanceof RegExp?a.call(t):void 0)})):c.name!=o&&u((function(){return c.call(this)}))},"7bbc":function(t,e,r){var n=r("6821"),a=r("9093").f,i={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return a(t)}catch(e){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==i.call(t)?c(t):a(n(t))}},"7f7f":function(t,e,r){var n=r("86cc").f,a=Function.prototype,i=/^\s*function ([^ (]*)/,o="name";o in a||r("9e1e")&&n(a,o,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},"87b3":function(t,e,r){var n=Date.prototype,a="Invalid Date",i="toString",o=n[i],c=n.getTime;new Date(NaN)+""!=a&&r("2aba")(n,i,(function(){var t=c.call(this);return t===t?o.call(this):a}))},"8a81":function(t,e,r){"use strict";var n=r("7726"),a=r("69a8"),i=r("9e1e"),o=r("5ca1"),c=r("2aba"),u=r("67ab").KEY,s=r("79e5"),l=r("5537"),f=r("7f20"),d=r("ca5a"),p=r("2b4c"),b=r("37c8"),h=r("3a72"),v=r("d4c0"),m=r("1169"),y=r("cb7c"),g=r("d3f4"),O=r("4bf8"),S=r("6821"),w=r("6a99"),j=r("4630"),x=r("2aeb"),E=r("7bbc"),P=r("11e9"),D=r("2621"),A=r("86cc"),k=r("0d58"),I=P.f,_=A.f,C=E.f,T=n.Symbol,N=n.JSON,H=N&&N.stringify,F="prototype",R=p("_hidden"),q=p("toPrimitive"),J={}.propertyIsEnumerable,$=l("symbol-registry"),M=l("symbols"),U=l("op-symbols"),B=Object[F],G="function"==typeof T&&!!D.f,K=n.QObject,L=!K||!K[F]||!K[F].findChild,Q=i&&s((function(){return 7!=x(_({},"a",{get:function(){return _(this,"a",{value:7}).a}})).a}))?function(t,e,r){var n=I(B,e);n&&delete B[e],_(t,e,r),n&&t!==B&&_(B,e,n)}:_,W=function(t){var e=M[t]=x(T[F]);return e._k=t,e},z=G&&"symbol"==typeof T.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof T},Y=function(t,e,r){return t===B&&Y(U,e,r),y(t),e=w(e,!0),y(r),a(M,e)?(r.enumerable?(a(t,R)&&t[R][e]&&(t[R][e]=!1),r=x(r,{enumerable:j(0,!1)})):(a(t,R)||_(t,R,j(1,{})),t[R][e]=!0),Q(t,e,r)):_(t,e,r)},X=function(t,e){y(t);var r,n=v(e=S(e)),a=0,i=n.length;while(i>a)Y(t,r=n[a++],e[r]);return t},V=function(t,e){return void 0===e?x(t):X(x(t),e)},Z=function(t){var e=J.call(this,t=w(t,!0));return!(this===B&&a(M,t)&&!a(U,t))&&(!(e||!a(this,t)||!a(M,t)||a(this,R)&&this[R][t])||e)},tt=function(t,e){if(t=S(t),e=w(e,!0),t!==B||!a(M,e)||a(U,e)){var r=I(t,e);return!r||!a(M,e)||a(t,R)&&t[R][e]||(r.enumerable=!0),r}},et=function(t){var e,r=C(S(t)),n=[],i=0;while(r.length>i)a(M,e=r[i++])||e==R||e==u||n.push(e);return n},rt=function(t){var e,r=t===B,n=C(r?U:S(t)),i=[],o=0;while(n.length>o)!a(M,e=n[o++])||r&&!a(B,e)||i.push(M[e]);return i};G||(T=function(){if(this instanceof T)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(r){this===B&&e.call(U,r),a(this,R)&&a(this[R],t)&&(this[R][t]=!1),Q(this,t,j(1,r))};return i&&L&&Q(B,t,{configurable:!0,set:e}),W(t)},c(T[F],"toString",(function(){return this._k})),P.f=tt,A.f=Y,r("9093").f=E.f=et,r("52a7").f=Z,D.f=rt,i&&!r("2d00")&&c(B,"propertyIsEnumerable",Z,!0),b.f=function(t){return W(p(t))}),o(o.G+o.W+o.F*!G,{Symbol:T});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),at=0;nt.length>at;)p(nt[at++]);for(var it=k(p.store),ot=0;it.length>ot;)h(it[ot++]);o(o.S+o.F*!G,"Symbol",{for:function(t){return a($,t+="")?$[t]:$[t]=T(t)},keyFor:function(t){if(!z(t))throw TypeError(t+" is not a symbol!");for(var e in $)if($[e]===t)return e},useSetter:function(){L=!0},useSimple:function(){L=!1}}),o(o.S+o.F*!G,"Object",{create:V,defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:rt});var ct=s((function(){D.f(1)}));o(o.S+o.F*ct,"Object",{getOwnPropertySymbols:function(t){return D.f(O(t))}}),N&&o(o.S+o.F*(!G||s((function(){var t=T();return"[null]"!=H([t])||"{}"!=H({a:t})||"{}"!=H(Object(t))}))),"JSON",{stringify:function(t){var e,r,n=[t],a=1;while(arguments.length>a)n.push(arguments[a++]);if(r=e=n[1],(g(e)||void 0!==t)&&!z(t))return m(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!z(e))return e}),n[1]=e,H.apply(N,n)}}),T[F][q]||r("32e9")(T[F],q,T[F].valueOf),f(T,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},"9ae6":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group"},[t._m(1),r("input",{ref:"input1periodo",staticClass:"w-100 form-control-file",attrs:{id:"turmas1",type:"file",accept:".csv"}})])]),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col"},[t._m(2),r("input",{ref:"input3periodo",staticClass:"w-100 form-control-file",attrs:{id:"turmas3",type:"file",accept:".csv"}})])])])},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",{staticClass:"alert alert-secondary"},[t._v("\n    Selecione arquivos\n    "),r("b",[t._v(".csv")]),t._v("\n    para importar as turmas de cada periodo do novo plano.\n    "),r("br"),t._v("\n    Note que o formato do arquivo requerido é o relatorio de plano departamental gerado pelo SIGA\n    na página: Acadêmico > Consultas > Plano Departamental.\n  ")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{attrs:{for:"turmas1"}},[t._v("\n        Turmas do\n        "),r("b",[t._v("primeiro")]),t._v("\n        período:\n      ")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{attrs:{for:"turmas2"}},[t._v("\n        Turmas do\n        "),r("b",[t._v("terceiro")]),t._v("\n        período:\n      ")])}];r("2caf"),r("ac4d"),r("8a81"),r("5df3"),r("1c4c"),r("7f7f"),r("6b54"),r("87b3"),r("1c01"),r("58b2"),r("8e6e"),r("f3e2"),r("d25f"),r("ac6a"),r("456d"),r("4f37"),r("6762"),r("2fdb"),r("28a5"),r("a481");function i(t){if(Array.isArray(t))return t}function o(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,a=!1,i=void 0;try{for(var o,c=t[Symbol.iterator]();!(n=(o=c.next()).done);n=!0)if(r.push(o.value),e&&r.length===e)break}catch(u){a=!0,i=u}finally{try{n||null==c["return"]||c["return"]()}finally{if(a)throw i}}return r}}var c=r("06c5");function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){return i(t)||o(t,e)||Object(c["a"])(t,e)||u()}r("96cf");var l=r("1da1"),f=r("ade3"),d=r("2f62"),p=r("0a94"),b=r("9429"),h=r("1146"),v=r.n(h),m=r("eaf8");function y(t,e){var r;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=g(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){c=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function g(t,e){if(t){if("string"===typeof t)return O(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(t,e):void 0}}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function S(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?S(Object(r),!0).forEach((function(e){Object(f["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var j={name:"ModalImportPlano",props:{plano:{type:Object,required:!0}},methods:w(w({},Object(d["b"])(["createPlano","createTurma","createPedidoOferecido","updatePedidoOferecido","fetchAllPedidosOferecidos"])),{},{handleImportPlano:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,r,n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=s(this.$refs.input1periodo.files,1),r=e[0],n=s(this.$refs.input3periodo.files,1),a=n[0],r||a){t.next=4;break}throw new Error("Nenhum arquivo selecionado");case 4:return this.setLoading({type:"partial",value:!0}),t.prev=5,t.next=8,this.createPlano({data:this.plano});case 8:if(i=t.sent,!r){t.next=12;break}return t.next=12,this.readInputFileTurmas(r,i.id,1);case 12:if(!a){t.next=15;break}return t.next=15,this.readInputFileTurmas(a,i.id,3);case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](5),console.log("Erro ao importar",t.t0);case 20:this.setLoading({type:"partial",value:!1}),this.pushNotification({type:"success",text:"Plano criado e turmas importadas"});case 22:case"end":return t.stop()}}),t,this,[[5,17]])})));function e(){return t.apply(this,arguments)}return e}(),readInputFileTurmas:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e,r,n){var a,i,o,c,u,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(m["f"])(e);case 2:return a=t.sent,i=v.a.read(a,{type:"binary"}),o=i.Sheets[i.SheetNames[0]],c=JSON.stringify(v.a.utils.sheet_to_json(o)),u=c.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s/g,"").toUpperCase(),s=JSON.parse(u),t.next=10,this.createTurmasImported(s,r,n);case 10:case"end":return t.stop()}}),t,this)})));function e(e,r,n){return t.apply(this,arguments)}return e}(),createTurmasImported:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e,r,n){var a,i,o,c,u,s,l,f,d,p,b;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(o in a={disciplinaCod:null,letra:null,cursoCod:null,vagas1:null,vagas2:null,horarioESala:null,docentes:null},i=0,e[0])1===i?a.disciplinaCod=o:2===i?a.letra=o:3===i?a.cursoCod=o:5===i?a.vagas1=o:6===i?a.vagas2=o:7===i?a.horarioESala=o:8===i&&(a.docentes=o),i++;c={},u=y(e),t.prev=5,u.s();case 7:if((s=u.n()).done){t.next=43;break}if(l=s.value,f=Object(m["b"])({periodo:n,Plano:r,letra:l[a.letra]||null}),f.letra){t.next=12;break}return t.abrupt("continue",41);case 12:if(this.setDisciplina(f,l[a.disciplinaCod]),f.Disciplina){t.next=15;break}return t.abrupt("continue",41);case 15:if(this.setHorariosESalas(f,l[a.horarioESala]),f.turno1){t.next=18;break}return t.abrupt("continue",41);case 18:if(this.setDocentes(f,l[a.docentes]),!this.turmasIsEqual(c,f)){t.next=33;break}if(d=this.makePedidoOferecido(l,a,c.id),!d){t.next=32;break}return t.prev=22,t.next=25,this.updatePedidoOferecido({data:d});case 25:t.next=32;break;case 27:if(t.prev=27,t.t0=t["catch"](22),"Pedido inválido"!==t.t0.response.data.message){t.next=32;break}return t.next=32,this.createPedidoOferecido({data:d});case 32:return t.abrupt("continue",41);case 33:return t.next=35,this.createTurma({data:f});case 35:if(p=t.sent,c=w({},p),b=this.makePedidoOferecido(l,a,p.id),!b){t.next=41;break}return t.next=41,this.createPedidoOferecido({data:b});case 41:t.next=7;break;case 43:t.next=48;break;case 45:t.prev=45,t.t1=t["catch"](5),u.e(t.t1);case 48:return t.prev=48,u.f(),t.finish(48);case 51:return t.next=53,this.fetchAllPedidosOferecidos();case 53:case"end":return t.stop()}}),t,this,[[5,45,48,51],[22,27]])})));function e(e,r,n){return t.apply(this,arguments)}return e}(),makePedidoOferecido:function(t,e,r){var n={Turma:null,Curso:null,vagasOferecidas:0,vagasOcupadas:0};return n.Turma=r,n.Curso=this.findCursoIdByCodigo(t[e.cursoCod]),n.vagasOferecidas=parseInt(t[e.vagas1],10),n.vagasOcupadas=parseInt(t[e.vagas2],10),n.Curso?n:(console.log("Curso não econtrado: "+t[e.cursoCod],"Turma: "+t[e.disciplinaCod]+" - "+t[e.letra]),null)},setDisciplina:function(t,e){if(e){var r=Object(p["a"])(this.AllDisciplinas,["codigo",e]);r?(t.Disciplina=r.id,t.creditoTotal=r.creditoTotal):t.Disciplina=null}},setHorariosESalas:function(t,e){if(e){var r=e.split(";"),n=s(r,2),a=n[0],i=n[1];t.Horario1=this.findHorarioId(a),t.creditoTotal>=4&&(t.Horario2=this.findHorarioId(i)),t.turno1=this.findTurno(t.Horario1,t.Horario2),"EAD"!==t.turno1&&(t.Sala1=this.findSalaId(a),t.Sala2=this.findSalaId(i))}},setDocentes:function(t,e){if(e){var r=e.split(";"),n=s(r,2),a=n[0],i=n[1];t.Docente1=this.findDocenteId(a),t.Docente2=this.findDocenteId(i)}},findTurno:function(t,e){return t||e?31===t?"EAD":Object(b["a"])(this.HorariosNoturno,["id",t])||Object(b["a"])(this.HorariosNoturno,["id",e])?"Noturno":"Diurno":null},findCursoIdByCodigo:function(t){if(!t)return null;var e=Object(p["a"])(this.AllCursos,["codigo",t]);return e?e.id:null},findDocenteId:function(t){if(!t)return null;var e=Object(p["a"])(this.AllDocentes,(function(e){return Object(m["e"])(e.nome)===Object(m["e"])(t)}));return e?e.id:null},findHorarioId:function(t){if(!t)return null;var e=t.split(","),r=s(e,3),n=r[0],a=r[1],i=r[2],o=this.covertDiaEHoraEmHorario(n,a);if(o){var c=Object(p["a"])(this.AllHorarios,["horario",o]);return c?c.id:null}return i.includes("EAD")?31:null},covertDiaEHoraEmHorario:function(t,e){if(!t||!e)return null;var r=null;switch(t.trim().substring(0,3)){case"SEG":r="2a";break;case"TER":r="3a";break;case"QUA":r="4a";break;case"QUI":r="5a";break;case"SEX":r="6a";break;case"SAB":return"EAD";default:return null}var n=e.split("AS"),a=s(n,2),i=a[0],o=a[1];if(!i||!o)return null;var c=i.trim().substring(0,2),u=o.trim().substring(0,2);return"".concat(r," ").concat(c,"-").concat(u)},findSalaId:function(t){if(!t)return null;var e=t.split(","),r=s(e,3),n=r[2],a=Object(m["e"])(n),i=Object(p["a"])(this.AllSalas,(function(t){var e=Object(m["e"])(t.nome);return a.includes(e)}));return i?i.id:null},turmasIsEqual:function(t,e){return t.letra===e.letra&&t.Disciplina===e.Disciplina}}),computed:w({},Object(d["c"])(["AllHorarios","HorariosNoturno","AllDisciplinas","AllCursos","AllSalas","AllDocentes","PeriodosLetivos"]))},x=j,E=r("2877"),P=Object(E["a"])(x,n,a,!1,null,null,null);e["default"]=P.exports},ac4d:function(t,e,r){r("3a72")("asyncIterator")},d2c8:function(t,e,r){var n=r("aae3"),a=r("be13");t.exports=function(t,e,r){if(n(e))throw TypeError("String#"+r+" doesn't accept regex!");return String(a(t))}},d4c0:function(t,e,r){var n=r("0d58"),a=r("2621"),i=r("52a7");t.exports=function(t){var e=n(t),r=a.f;if(r){var o,c=r(t),u=i.f,s=0;while(c.length>s)u.call(t,o=c[s++])&&e.push(o)}return e}}}]);
//# sourceMappingURL=chunk-2f52e9e4.4df28789.js.map