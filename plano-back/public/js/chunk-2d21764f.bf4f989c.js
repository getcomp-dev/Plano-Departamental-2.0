(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21764f"],{c716:function(e,r,t){"use strict";t.r(r);var n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("BaseModal",{ref:"BaseModalDisciplinaGrade",attrs:{title:"Importação de Disciplinas na Grade",hasOverlay:!0,hasFooter:!0},scopedSlots:e._u([{key:"modal-body",fn:function(){return[t("div",{staticClass:"row"},[t("VSelect",{staticClass:"col-7",attrs:{label:"Curso"},on:{change:e.handleSelectCurso},model:{value:e.cursoSelecionado,callback:function(r){e.cursoSelecionado=r},expression:"cursoSelecionado"}},e._l(e.cursosDCCOrdered,(function(e){return t("VOption",{key:e.codigo,attrs:{value:e,text:e.nome}})})),1),t("VSelect",{staticClass:"col-5",attrs:{label:"Grade",disabled:!e.hasCursoSelected},model:{value:e.gradeSelecionada,callback:function(r){e.gradeSelecionada=r},expression:"gradeSelecionada"}},[e.hasCursoSelected?e._l(e.gradesCursoSelecionado,(function(e){return t("VOption",{key:e.id,attrs:{value:e,text:e.nome}})})):t("VOption",{attrs:{text:"Nenhuma grade encontrada"}})],2)],1),t("p",{staticClass:"alert alert-secondary my-2"},[e._v("\n      Selecione o curso e a sua grade acima e o arquivo a ser importado. O arquivo deve\n      "),t("br"),e._v("\n      ser importado de acordo com a grade selecionada.\n    ")]),t("div",{staticClass:"col"},[t("VInputFile",{attrs:{label:"Selecione o arquivo",accept:".csv"},model:{value:e.fileImportacao,callback:function(r){e.fileImportacao=r},expression:"fileImportacao"}})],1)]},proxy:!0},{key:"modal-footer",fn:function(){return[t("BaseButton",{staticClass:"px-3 ml-auto",attrs:{text:"OK",color:"green"},on:{click:e.handleImport}})]},proxy:!0}])})},a=[],i=(t("2caf"),t("ac4d"),t("8a81"),t("5df3"),t("1c4c"),t("7f7f"),t("6b54"),t("87b3"),t("1c01"),t("58b2"),t("8e6e"),t("456d"),t("7514"),t("d25f"),t("ac6a"),t("f3e2"),t("96cf"),t("1da1")),o=t("ade3"),s=t("25df"),c=t("eaf8"),l=t("2f62"),u=t("4929"),d=t("d4b9");function p(e,r){var t;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=f(e))||r&&e&&"number"===typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(s)throw i}}}}function f(e,r){if(e){if("string"===typeof e)return h(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?h(e,r):void 0}}function h(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function b(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?b(Object(t),!0).forEach((function(r){Object(o["a"])(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var v={components:{VInputFile:s["i"],VSelect:s["m"],VOption:s["l"]},data:function(){return{fileImportacao:null,cursoSelecionado:null,gradesCursoSelecionado:null,gradeSelecionada:null}},methods:m(m({},Object(l["b"])(["initializeProgressBar","updateProgressBar","finishProgressBar","createDisciplinasGrade"])),{},{handleImport:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var r,t,n,a,i,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c["g"])(this.fileImportacao);case 3:r=e.sent,Object(c["k"])(r),this.initializeProgressBar({finalValue:r.length}),t=[],this.DisciplinasGrades.forEach((function(e){e.Grade===o.gradeSelecionada.id&&t.push(e)})),n=p(r);try{for(n.s();!(a=n.n()).done;)i=a.value,this.handleCreateDisciplinasNaGrade(i,t)}catch(s){n.e(s)}finally{n.f()}this.pushNotification({type:"success",text:"Disciplinas criadas na Grade"}),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),this.pushNotification({type:"error",title:"Erro ao importar disciplinas nas grades!",text:e.t0.message});case 16:return e.prev=16,this.close(),e.next=20,this.finishProgressBar();case 20:return e.finish(16);case 21:case"end":return e.stop()}}),e,this,[[0,13,16,21]])})));function r(){return e.apply(this,arguments)}return r}(),handleCreateDisciplinasNaGrade:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r,t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r&&t.length){e.next=2;break}return e.abrupt("return");case 2:if(n={periodo:null,Disciplina:null,disciplina:null,Grade:null,obrigatoria:!1},n.Grade=this.gradeSelecionada.id,"-"==r.PERIODO?n.periodo=15:n.periodo=+r.PERIODO,n.Disciplina=this.getIdDisciplina(r.CODIGO),n.disciplina=this.disciplinaFound(n.Disciplina),n.obrigatoria=+r.OBRIGATORIA,"number"!==typeof n.Disciplina){e.next=11;break}return e.next=11,this.createDisciplinasGrade(n,t);case 11:case"end":return e.stop()}}),e,this)})));function r(r,t){return e.apply(this,arguments)}return r}(),createDisciplinasGrade:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r,t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.checkDiscGradeExiste(r,t),!n){e.next=6;break}return e.next=4,u["a"].update(r.Disciplina,r.Grade,r);case 4:e.next=8;break;case 6:return e.next=8,u["a"].create(r);case 8:this.updateProgressBar();case 9:case"end":return e.stop()}}),e,this)})));function r(r,t){return e.apply(this,arguments)}return r}(),checkDiscGradeExiste:function(e,r){var t,n=p(r);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(e.Disciplina===a.Disciplina)return!0}}catch(i){n.e(i)}finally{n.f()}return!1},open:function(){this.$refs.BaseModalDisciplinaGrade.open()},close:function(){this.$refs.BaseModalDisciplinaGrade.close()},handleSelectCurso:function(){var e=this;this.gradesCursoSelecionado=this.AllGrades.filter((function(r){return r.Curso==e.cursoSelecionado.id}))},getIdDisciplina:function(e){var r,t=p(this.AllDisciplinas);try{for(t.s();!(r=t.n()).done;){var n=r.value;if(n.codigo==e)return n.id}}catch(a){t.e(a)}finally{t.f()}},disciplinaFound:function(e){return this.AllDisciplinas.find((function(r){return r.id===e}))}}),computed:m(m({},Object(l["c"])(["PrincipaisCursosDCC","AllDisciplinas","AllGrades","DisciplinasGrades"])),{},{hasCursoSelected:function(){return this.cursoSelecionado},cursosDCCOrdered:function(){return Object(d["a"])(this.PrincipaisCursosDCC,"name")}})},g=v,y=t("2877"),O=Object(y["a"])(g,n,a,!1,null,null,null);r["default"]=O.exports}}]);
//# sourceMappingURL=chunk-2d21764f.bf4f989c.js.map