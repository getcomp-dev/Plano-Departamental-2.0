{"version":3,"sources":["webpack:///./src/pages/gerenciar/DisciplinasGrades/index.vue","webpack:///src/pages/gerenciar/DisciplinasGrades/index.vue","webpack:///./src/pages/gerenciar/DisciplinasGrades/index.vue?79a7","webpack:///./src/pages/gerenciar/DisciplinasGrades/index.vue?3eaa","webpack:///./src/pages/gerenciar/DisciplinasGrades/ModalImportacao.vue","webpack:///src/pages/gerenciar/DisciplinasGrades/ModalImportacao.vue","webpack:///./src/pages/gerenciar/DisciplinasGrades/ModalImportacao.vue?1808","webpack:///./src/pages/gerenciar/DisciplinasGrades/ModalImportacao.vue?7db0"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","handleImportarDisciplinas","$event","$refs","modalAjuda","toggle","currentTab","key","contentPropsDCC","arraysData","services","contentPropsOutros","ref","_v","staticRenderFns","name","components","DisciplinasGradesContent","ModalAjuda","ModalImportacao","data","methods","computed","mapGetters","CursosComGradesExternas","DisciplinasGrades","Grades","Cursos","component","scopedSlots","_u","fn","handleSelectCurso","model","value","cursoSelecionado","callback","$$v","expression","_l","cursosDCCOrdered","curso","codigo","nome","hasCursoSelected","gradeSelecionada","gradesCursoSelecionado","grade","id","fileImportacao","proxy","handleImport","VInputFile","VSelect","VOption","mapActions","parseCSVFileToArray","disciplinasGrades","validateDisciplinasGrades","finalValue","disciplinasGradeSelecionada","discGrade","type","text","title","handleCreateDisciplinasNaGrade","disciplinaGrade","discsGradeSelecionada","objDiscGrade","periodo","Disciplina","disciplina","Grade","obrigatoria","createDisciplinasGrade","temDisciplina","disciplinaGradeService","checkDiscGradeExiste","open","close","getIdDisciplina","codigoDisc","disciplinaFound","idDisciplina"],"mappings":"wIAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,sBAAsB,CAACF,EAAG,SAAS,CAACG,MAAM,CAAC,GAAK,gBAAgB,CAACH,EAAG,aAAa,CAACG,MAAM,CAAC,MAAQ,gCAAgC,KAAO,OAAO,MAAQ,QAAQC,GAAG,CAAC,MAAQN,EAAIO,4BAA4B,CAACL,EAAG,oBAAoB,CAACG,MAAM,CAAC,KAAO,CAAC,MAAO,mBAAmB,GAAGH,EAAG,aAAa,CAACG,MAAM,CAAC,SAAW,SAASC,GAAG,CAAC,MAAQ,SAASE,GAAQ,OAAOR,EAAIS,MAAMC,WAAWC,cAAc,GAAGT,EAAG,aAAa,CAAqB,QAAnBF,EAAIY,WAAsBV,EAAG,2BAA2B,CAACW,IAAI,MAAMR,MAAM,CAAC,WAAaL,EAAIc,gBAAgBC,WAAW,wBAA0Bf,EAAIc,gBAAgBE,SAAS,WAAahB,EAAIY,YAAYN,GAAG,CAAC,aAAa,SAASE,GAAQR,EAAIY,WAAaJ,MAAWN,EAAG,2BAA2B,CAACW,IAAI,SAASR,MAAM,CAAC,WAAaL,EAAIiB,mBAAmBF,WAAW,wBAA0Bf,EAAIiB,mBAAmBD,SAAS,WAAahB,EAAIY,YAAYN,GAAG,CAAC,aAAa,SAASE,GAAQR,EAAIY,WAAaJ,OAAY,GAAGN,EAAG,aAAa,CAACgB,IAAI,cAAc,CAAChB,EAAG,KAAK,CAACE,YAAY,mBAAmB,CAACF,EAAG,IAAI,CAACF,EAAImB,GAAG,oCAAoCnB,EAAImB,GAAG,wFAAwFjB,EAAG,oBAAoB,CAACG,MAAM,CAAC,KAAO,CAAC,MAAO,kBAAkBL,EAAImB,GAAG,oFAAoFjB,EAAG,SAAS,CAACF,EAAImB,GAAG,UAAUnB,EAAImB,GAAG,mCAAmC,GAAGjB,EAAG,KAAK,CAACE,YAAY,mBAAmB,CAACF,EAAG,IAAI,CAACF,EAAImB,GAAG,0BAA0BnB,EAAImB,GAAG,6GAA6GjB,EAAG,KAAK,CAACE,YAAY,mBAAmB,CAACF,EAAG,IAAI,CAACF,EAAImB,GAAG,oCAAoCnB,EAAImB,GAAG,oKAAoKjB,EAAG,oBAAoB,CAACE,YAAY,aAAaC,MAAM,CAAC,KAAO,CAAC,MAAO,WAAWL,EAAImB,GAAG,oBAAoB,GAAGjB,EAAG,KAAK,CAACE,YAAY,mBAAmB,CAACF,EAAG,IAAI,CAACF,EAAImB,GAAG,iCAAiCnB,EAAImB,GAAG,oOAAoOjB,EAAG,oBAAoB,CAACE,YAAY,aAAaC,MAAM,CAAC,KAAO,CAAC,MAAO,YAAYL,EAAImB,GAAG,oBAAoB,GAAGjB,EAAG,KAAK,CAACE,YAAY,mBAAmB,CAACF,EAAG,IAAI,CAACF,EAAImB,GAAG,kCAAkCnB,EAAImB,GAAG,yIAAyIjB,EAAG,oBAAoB,CAACE,YAAY,WAAWC,MAAM,CAAC,KAAO,CAAC,MAAO,gBAAgBL,EAAImB,GAAG,kEAAkE,GAAGjB,EAAG,KAAK,CAACE,YAAY,mBAAmB,CAACF,EAAG,IAAI,CAACF,EAAImB,GAAG,wBAAwBnB,EAAImB,GAAG,2DAA2DjB,EAAG,oBAAoB,CAACE,YAAY,YAAYC,MAAM,CAAC,KAAO,CAAC,MAAO,YAAYL,EAAImB,GAAG,mGAAmG,KAAKjB,EAAG,kBAAkB,CAACgB,IAAI,qBAAqB,IAEprGE,EAAkB,G,gsBCsFP,OACfC,uBACAC,YAAAC,sCAAAC,kBAAAC,8BACAC,KAHA,WAIA,OACAd,mBAIAe,SACApB,0BADA,WAEA,oCAIAqB,gBACAC,gBACA,4BACA,0BACA,YACA,YACA,oBACA,yBAPA,IAUAC,wBAVA,WAUA,WACA,iDACA,yEAGAhB,gBAfA,WAgBA,OACAC,YACAgB,yCACAC,sBACAC,iCAEAjB,kBAGAC,mBAzBA,WA0BA,OACAF,YACAgB,iDACAC,oCACAC,qCAEAjB,qBCvI6W,I,YCOzWkB,EAAY,eACd,EACAnC,EACAqB,GACA,EACA,KACA,KACA,MAIa,aAAAc,E,kDClBf,IAAInC,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,YAAY,CAACgB,IAAI,2BAA2Bb,MAAM,CAAC,MAAQ,qCAAqC,YAAa,EAAK,WAAY,GAAM8B,YAAYnC,EAAIoC,GAAG,CAAC,CAACvB,IAAI,aAAawB,GAAG,WAAW,MAAO,CAACnC,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,UAAU,CAACE,YAAY,QAAQC,MAAM,CAAC,MAAQ,SAASC,GAAG,CAAC,OAASN,EAAIsC,mBAAmBC,MAAM,CAACC,MAAOxC,EAAIyC,iBAAkBC,SAAS,SAAUC,GAAM3C,EAAIyC,iBAAiBE,GAAKC,WAAW,qBAAqB5C,EAAI6C,GAAI7C,EAAI8C,kBAAkB,SAASC,GAAO,OAAO7C,EAAG,UAAU,CAACW,IAAIkC,EAAMC,OAAO3C,MAAM,CAAC,MAAQ0C,EAAM,KAAOA,EAAME,WAAU,GAAG/C,EAAG,UAAU,CAACE,YAAY,QAAQC,MAAM,CAAC,MAAQ,QAAQ,UAAYL,EAAIkD,kBAAkBX,MAAM,CAACC,MAAOxC,EAAImD,iBAAkBT,SAAS,SAAUC,GAAM3C,EAAImD,iBAAiBR,GAAKC,WAAW,qBAAqB,CAAG5C,EAAIkD,iBAA4ElD,EAAI6C,GAAI7C,EAAIoD,wBAAwB,SAASC,GAAO,OAAOnD,EAAG,UAAU,CAACW,IAAIwC,EAAMC,GAAGjD,MAAM,CAAC,MAAQgD,EAAM,KAAOA,EAAMJ,WAAlL/C,EAAG,UAAU,CAACG,MAAM,CAAC,KAAO,+BAAiK,IAAI,GAAGH,EAAG,IAAI,CAACE,YAAY,8BAA8B,CAACJ,EAAImB,GAAG,qGAAqGjB,EAAG,MAAMF,EAAImB,GAAG,oEAAoEjB,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,aAAa,CAACG,MAAM,CAAC,MAAQ,sBAAsB,OAAS,QAAQkC,MAAM,CAACC,MAAOxC,EAAIuD,eAAgBb,SAAS,SAAUC,GAAM3C,EAAIuD,eAAeZ,GAAKC,WAAW,qBAAqB,KAAKY,OAAM,GAAM,CAAC3C,IAAI,eAAewB,GAAG,WAAW,MAAO,CAACnC,EAAG,aAAa,CAACE,YAAY,eAAeC,MAAM,CAAC,KAAO,KAAK,MAAQ,SAASC,GAAG,CAAC,MAAQN,EAAIyD,kBAAkBD,OAAM,QAErqDpC,EAAkB,G,uyDCqDP,OACfE,YAAAoC,kBAAAC,eAAAC,gBACAlC,KAFA,WAGA,OACA6B,oBAEAd,sBACAW,4BACAD,wBAIAxB,eACAkC,gBACA,wBACA,oBACA,oBACA,4BALA,IAOAJ,aAPA,qMASAK,oCATA,OASAC,EATA,OAUAC,kBAEA,4BACAC,sBAGAC,EAAA,GAEA,4CACA,8CAnBA,IAsBAH,GAtBA,IAsBA,2BAAAI,UACA,yCAvBA,8BA0BA,uBACAC,eACAC,sCA5BA,qDA+BA,uBACAD,aACAE,iDACAD,oBAlCA,yBAqCA,aArCA,UAsCA,yBAtCA,oJAyCAE,+BAzCA,oEAyCAC,EAAAC,GAzCA,0FA0CA,YA1CA,oDA4CAC,EAAA,CACAC,aACAC,gBACAC,gBACAC,WACAC,gBAGAL,iCACA,4BACAA,qBAEAA,4CACAA,gDACAA,6BAEA,+BA5DA,kCA6DA,iCA7DA,4GA+DAM,uBA/DA,oEA+DAR,EAAAN,GA/DA,0FAgEAe,EAAA,gCAEAA,EAlEA,gCAmEAC,cACAV,aACAA,QACAA,GAtEA,6CAwEAU,iBAxEA,OA0EA,yBA1EA,2GA4EAC,qBA5EA,SA4EAX,EAAAN,GAAA,IAAI,EAAJ,IACAA,GADA,IACA,0CACA,yCAFA,8BAIA,UAEAkB,KAlFA,WAmFA,4CAEAC,MArFA,WAsFA,6CAEA/C,kBAxFA,WAwFA,WACA,+DACA,0CAGAgD,gBA7FA,SA6FAC,GAAA,IAAI,EAAJ,IACA,qBADA,IACA,sEADA,gCAGAC,gBAhGA,SAgGAC,GACA,mEAIA7D,gBACAC,0FADA,IAEAqB,iBAFA,WAGA,8BAEAJ,iBALA,WAMA,2DC9KuX,I,YCOnXZ,EAAY,eACd,EACAnC,EACAqB,GACA,EACA,KACA,KACA,MAIa,aAAAc,E","file":"js/chunk-7108ac62.3b543e14.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"main-component row\"},[_c('portal',{attrs:{\"to\":\"page-header\"}},[_c('BaseButton',{attrs:{\"title\":\"Importar disciplinas na grade\",\"type\":\"icon\",\"color\":\"gray\"},on:{\"click\":_vm.handleImportarDisciplinas}},[_c('font-awesome-icon',{attrs:{\"icon\":['fas', 'file-import']}})],1),_c('BaseButton',{attrs:{\"template\":\"ajuda\"},on:{\"click\":function($event){return _vm.$refs.modalAjuda.toggle()}}})],1),_c('keep-alive',[(_vm.currentTab === 'DCC')?_c('DisciplinasGradesContent',{key:\"DCC\",attrs:{\"arraysData\":_vm.contentPropsDCC.arraysData,\"disciplinaGradeServices\":_vm.contentPropsDCC.services,\"currentTab\":_vm.currentTab},on:{\"change-tab\":function($event){_vm.currentTab = $event}}}):_c('DisciplinasGradesContent',{key:\"Outros\",attrs:{\"arraysData\":_vm.contentPropsOutros.arraysData,\"disciplinaGradeServices\":_vm.contentPropsOutros.services,\"currentTab\":_vm.currentTab},on:{\"change-tab\":function($event){_vm.currentTab = $event}}})],1),_c('ModalAjuda',{ref:\"modalAjuda\"},[_c('li',{staticClass:\"list-group-item\"},[_c('b',[_vm._v(\"Importar Disciplinas na Grade:\")]),_vm._v(\"\\n      Para importar as disciplinas da grade, clique no ícone de importação\\n      \"),_c('font-awesome-icon',{attrs:{\"icon\":['fas', 'file-import']}}),_vm._v(\"\\n      para abrir o modal e selecionar o curso e grade, além do arquivo\\n      \"),_c('strong',[_vm._v(\".csv\")]),_vm._v(\"\\n      para importação.\\n    \")],1),_c('li',{staticClass:\"list-group-item\"},[_c('b',[_vm._v(\"Visualizar conteúdo:\")]),_vm._v(\"\\n      Na parte superior do cartão à direita, selecione o curso e a grade que deseja visualizar.\\n    \")]),_c('li',{staticClass:\"list-group-item\"},[_c('b',[_vm._v(\"Adicionar disciplina na grade:\")]),_vm._v(\"\\n      Para adicionar uma disciplina à grade selecionada, preencha o cartão à direita com os dados\\n      necessários e em seguida clique em Adicionar.\\n      \"),_c('font-awesome-icon',{staticClass:\"icon-green\",attrs:{\"icon\":['fas', 'plus']}}),_vm._v(\"\\n      .\\n    \")],1),_c('li',{staticClass:\"list-group-item\"},[_c('b',[_vm._v(\"Editar disciplina da grade:\")]),_vm._v(\"\\n      Para editar uma disciplinas da grade selecionada clique na linha da tabela da disciplina que\\n      deseja alterar. Em seguida, no cartão à direita, altere as informações que desejar e clique\\n      em Salvar\\n      \"),_c('font-awesome-icon',{staticClass:\"icon-green\",attrs:{\"icon\":['fas', 'check']}}),_vm._v(\"\\n      .\\n    \")],1),_c('li',{staticClass:\"list-group-item\"},[_c('b',[_vm._v(\"Deletar disciplina da grade:\")]),_vm._v(\"\\n      Clique na linha da tabela da disciplina que deseja remover. Em seguida, no cartão à direita,\\n      clique em Remover\\n      \"),_c('font-awesome-icon',{staticClass:\"icon-red\",attrs:{\"icon\":['fas', 'trash-alt']}}),_vm._v(\"\\n      e confirme a remoção na janela que será aberta.\\n    \")],1),_c('li',{staticClass:\"list-group-item\"},[_c('b',[_vm._v(\"Limpar formulário:\")]),_vm._v(\"\\n      No cartão à direita, clique em Cancelar\\n      \"),_c('font-awesome-icon',{staticClass:\"icon-gray\",attrs:{\"icon\":['fas', 'times']}}),_vm._v(\"\\n      , para limpar as informações da disciplina porém a grade continuará selecionada.\\n    \")],1)]),_c('ModalImportacao',{ref:\"modalImportacao\"})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"main-component row\">\r\n    <portal to=\"page-header\">\r\n      <BaseButton\r\n        title=\"Importar disciplinas na grade\"\r\n        type=\"icon\"\r\n        color=\"gray\"\r\n        @click=\"handleImportarDisciplinas\"\r\n      >\r\n        <font-awesome-icon :icon=\"['fas', 'file-import']\" />\r\n      </BaseButton>\r\n      <BaseButton template=\"ajuda\" @click=\"$refs.modalAjuda.toggle()\" />\r\n    </portal>\r\n\r\n    <keep-alive>\r\n      <DisciplinasGradesContent\r\n        v-if=\"currentTab === 'DCC'\"\r\n        key=\"DCC\"\r\n        :arraysData=\"contentPropsDCC.arraysData\"\r\n        :disciplinaGradeServices=\"contentPropsDCC.services\"\r\n        :currentTab=\"currentTab\"\r\n        @change-tab=\"currentTab = $event\"\r\n      />\r\n      <DisciplinasGradesContent\r\n        v-else\r\n        key=\"Outros\"\r\n        :arraysData=\"contentPropsOutros.arraysData\"\r\n        :disciplinaGradeServices=\"contentPropsOutros.services\"\r\n        :currentTab=\"currentTab\"\r\n        @change-tab=\"currentTab = $event\"\r\n      />\r\n    </keep-alive>\r\n\r\n    <ModalAjuda ref=\"modalAjuda\">\r\n      <li class=\"list-group-item\">\r\n        <b>Importar Disciplinas na Grade:</b>\r\n        Para importar as disciplinas da grade, clique no ícone de importação\r\n        <font-awesome-icon :icon=\"['fas', 'file-import']\" />\r\n        para abrir o modal e selecionar o curso e grade, além do arquivo\r\n        <strong>.csv</strong>\r\n        para importação.\r\n      </li>\r\n      <li class=\"list-group-item\">\r\n        <b>Visualizar conteúdo:</b>\r\n        Na parte superior do cartão à direita, selecione o curso e a grade que deseja visualizar.\r\n      </li>\r\n      <li class=\"list-group-item\">\r\n        <b>Adicionar disciplina na grade:</b>\r\n        Para adicionar uma disciplina à grade selecionada, preencha o cartão à direita com os dados\r\n        necessários e em seguida clique em Adicionar.\r\n        <font-awesome-icon :icon=\"['fas', 'plus']\" class=\"icon-green\" />\r\n        .\r\n      </li>\r\n      <li class=\"list-group-item\">\r\n        <b>Editar disciplina da grade:</b>\r\n        Para editar uma disciplinas da grade selecionada clique na linha da tabela da disciplina que\r\n        deseja alterar. Em seguida, no cartão à direita, altere as informações que desejar e clique\r\n        em Salvar\r\n        <font-awesome-icon :icon=\"['fas', 'check']\" class=\"icon-green\" />\r\n        .\r\n      </li>\r\n      <li class=\"list-group-item\">\r\n        <b>Deletar disciplina da grade:</b>\r\n        Clique na linha da tabela da disciplina que deseja remover. Em seguida, no cartão à direita,\r\n        clique em Remover\r\n        <font-awesome-icon :icon=\"['fas', 'trash-alt']\" class=\"icon-red\" />\r\n        e confirme a remoção na janela que será aberta.\r\n      </li>\r\n      <li class=\"list-group-item\">\r\n        <b>Limpar formulário:</b>\r\n        No cartão à direita, clique em Cancelar\r\n        <font-awesome-icon :icon=\"['fas', 'times']\" class=\"icon-gray\" />\r\n        , para limpar as informações da disciplina porém a grade continuará selecionada.\r\n      </li>\r\n    </ModalAjuda>\r\n\r\n    <ModalImportacao ref=\"modalImportacao\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport disciplinaGradeExternoService from \"@/services/disciplinaGradeCursoExterno\";\r\nimport disciplinaGradeService from \"@/services/disciplinaGrade\";\r\nimport { ModalAjuda } from \"@/components/modals\";\r\nimport DisciplinasGradesContent from \"./DisciplinasGradesContent\";\r\nimport ModalImportacao from \"./ModalImportacao.vue\";\r\n\r\nexport default {\r\n  name: \"GerenciarGrades\",\r\n  components: { DisciplinasGradesContent, ModalAjuda, ModalImportacao },\r\n  data() {\r\n    return {\r\n      currentTab: \"DCC\",\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    handleImportarDisciplinas() {\r\n      this.$refs.modalImportacao.open();\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\r\n      \"DisciplinasGradesExternas\",\r\n      \"AllGradesCursosExternos\",\r\n      \"AllCursos\",\r\n      \"AllGrades\",\r\n      \"DisciplinasGrades\",\r\n      \"PrincipaisCursosDCC\",\r\n    ]),\r\n\r\n    CursosComGradesExternas() {\r\n      return this.AllCursos.filter((curso) =>\r\n        this.AllGradesCursosExternos.some((grade) => grade.Curso === curso.id)\r\n      );\r\n    },\r\n    contentPropsDCC() {\r\n      return {\r\n        arraysData: {\r\n          DisciplinasGrades: this.DisciplinasGrades,\r\n          Grades: this.AllGrades,\r\n          Cursos: this.PrincipaisCursosDCC,\r\n        },\r\n        services: disciplinaGradeService,\r\n      };\r\n    },\r\n    contentPropsOutros() {\r\n      return {\r\n        arraysData: {\r\n          DisciplinasGrades: this.DisciplinasGradesExternas,\r\n          Grades: this.AllGradesCursosExternos,\r\n          Cursos: this.CursosComGradesExternas,\r\n        },\r\n        services: disciplinaGradeExternoService,\r\n      };\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=c37fdd02&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('BaseModal',{ref:\"BaseModalDisciplinaGrade\",attrs:{\"title\":\"Importação de Disciplinas na Grade\",\"hasOverlay\":true,\"hasFooter\":true},scopedSlots:_vm._u([{key:\"modal-body\",fn:function(){return [_c('div',{staticClass:\"row\"},[_c('VSelect',{staticClass:\"col-7\",attrs:{\"label\":\"Curso\"},on:{\"change\":_vm.handleSelectCurso},model:{value:(_vm.cursoSelecionado),callback:function ($$v) {_vm.cursoSelecionado=$$v},expression:\"cursoSelecionado\"}},_vm._l((_vm.cursosDCCOrdered),function(curso){return _c('VOption',{key:curso.codigo,attrs:{\"value\":curso,\"text\":curso.nome}})}),1),_c('VSelect',{staticClass:\"col-5\",attrs:{\"label\":\"Grade\",\"disabled\":!_vm.hasCursoSelected},model:{value:(_vm.gradeSelecionada),callback:function ($$v) {_vm.gradeSelecionada=$$v},expression:\"gradeSelecionada\"}},[(!_vm.hasCursoSelected)?_c('VOption',{attrs:{\"text\":\"Nenhuma grade encontrada\"}}):_vm._l((_vm.gradesCursoSelecionado),function(grade){return _c('VOption',{key:grade.id,attrs:{\"value\":grade,\"text\":grade.nome}})})],2)],1),_c('p',{staticClass:\"alert alert-secondary my-2\"},[_vm._v(\"\\n      Selecione o curso e a sua grade acima e o arquivo a ser importado. O arquivo deve\\n      \"),_c('br'),_vm._v(\"\\n      ser importado de acordo com a grade selecionada.\\n    \")]),_c('div',{staticClass:\"col\"},[_c('VInputFile',{attrs:{\"label\":\"Selecione o arquivo\",\"accept\":\".csv\"},model:{value:(_vm.fileImportacao),callback:function ($$v) {_vm.fileImportacao=$$v},expression:\"fileImportacao\"}})],1)]},proxy:true},{key:\"modal-footer\",fn:function(){return [_c('BaseButton',{staticClass:\"px-3 ml-auto\",attrs:{\"text\":\"OK\",\"color\":\"green\"},on:{\"click\":_vm.handleImport}})]},proxy:true}])})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <BaseModal\r\n    ref=\"BaseModalDisciplinaGrade\"\r\n    title=\"Importação de Disciplinas na Grade\"\r\n    :hasOverlay=\"true\"\r\n    :hasFooter=\"true\"\r\n  >\r\n    <template #modal-body>\r\n      <div class=\"row\">\r\n        <VSelect label=\"Curso\" v-model=\"cursoSelecionado\" class=\"col-7\" @change=\"handleSelectCurso\">\r\n          <VOption\r\n            v-for=\"curso in cursosDCCOrdered\"\r\n            :key=\"curso.codigo\"\r\n            :value=\"curso\"\r\n            :text=\"curso.nome\"\r\n          />\r\n        </VSelect>\r\n        <VSelect\r\n          label=\"Grade\"\r\n          v-model=\"gradeSelecionada\"\r\n          class=\"col-5\"\r\n          :disabled=\"!hasCursoSelected\"\r\n        >\r\n          <VOption v-if=\"!hasCursoSelected\" text=\"Nenhuma grade encontrada\" />\r\n          <VOption\r\n            v-else\r\n            v-for=\"grade in gradesCursoSelecionado\"\r\n            :key=\"grade.id\"\r\n            :value=\"grade\"\r\n            :text=\"grade.nome\"\r\n          />\r\n        </VSelect>\r\n      </div>\r\n      <p class=\"alert alert-secondary my-2\">\r\n        Selecione o curso e a sua grade acima e o arquivo a ser importado. O arquivo deve\r\n        <br />\r\n        ser importado de acordo com a grade selecionada.\r\n      </p>\r\n      <div class=\"col\">\r\n        <VInputFile label=\"Selecione o arquivo\" v-model=\"fileImportacao\" accept=\".csv\" />\r\n      </div>\r\n    </template>\r\n    <template #modal-footer>\r\n      <BaseButton text=\"OK\" color=\"green\" class=\"px-3 ml-auto\" @click=\"handleImport\" />\r\n    </template>\r\n  </BaseModal>\r\n</template>\r\n\r\n<script>\r\nimport { VInputFile, VSelect, VOption } from \"@/components/ui\";\r\nimport { parseCSVFileToArray, validateDisciplinasGrades } from \"@/common/utils\";\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nimport disciplinaGradeService from \"@/services/disciplinaGrade\";\r\nimport { orderBy } from \"lodash-es\";\r\n\r\nexport default {\r\n  components: { VInputFile, VSelect, VOption },\r\n  data() {\r\n    return {\r\n      fileImportacao: null,\r\n\r\n      cursoSelecionado: null,\r\n      gradesCursoSelecionado: null,\r\n      gradeSelecionada: null,\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\r\n      \"initializeProgressBar\",\r\n      \"updateProgressBar\",\r\n      \"finishProgressBar\",\r\n      \"createDisciplinasGrade\",\r\n    ]),\r\n    async handleImport() {\r\n      try {\r\n        const disciplinasGrades = await parseCSVFileToArray(this.fileImportacao);\r\n        validateDisciplinasGrades(disciplinasGrades);\r\n\r\n        this.initializeProgressBar({\r\n          finalValue: disciplinasGrades.length,\r\n        });\r\n\r\n        const disciplinasGradeSelecionada = [];\r\n\r\n        this.DisciplinasGrades.forEach((disc) => {\r\n          if (disc.Grade === this.gradeSelecionada.id) disciplinasGradeSelecionada.push(disc);\r\n        });\r\n\r\n        for (const discGrade of disciplinasGrades) {\r\n          this.handleCreateDisciplinasNaGrade(discGrade, disciplinasGradeSelecionada);\r\n        }\r\n\r\n        this.pushNotification({\r\n          type: \"success\",\r\n          text: \"Disciplinas criadas na Grade\",\r\n        });\r\n      } catch (error) {\r\n        this.pushNotification({\r\n          type: \"error\",\r\n          title: \"Erro ao importar disciplinas nas grades!\",\r\n          text: error.message,\r\n        });\r\n      } finally {\r\n        this.close(); // O modal fecha de qualquer jeito por causa do esc\r\n        await this.finishProgressBar();\r\n      }\r\n    },\r\n    async handleCreateDisciplinasNaGrade(disciplinaGrade, discsGradeSelecionada) {\r\n      if (!disciplinaGrade || !discsGradeSelecionada.length) return;\r\n\r\n      let objDiscGrade = {\r\n        periodo: null,\r\n        Disciplina: null,\r\n        disciplina: null,\r\n        Grade: null,\r\n        obrigatoria: false,\r\n      };\r\n\r\n      objDiscGrade.Grade = this.gradeSelecionada.id;\r\n      if (disciplinaGrade.PERIODO == \"-\") objDiscGrade.periodo = 15;\r\n      else objDiscGrade.periodo = +disciplinaGrade.PERIODO;\r\n\r\n      objDiscGrade.Disciplina = this.getIdDisciplina(disciplinaGrade.CODIGO);\r\n      objDiscGrade.disciplina = this.disciplinaFound(objDiscGrade.Disciplina);\r\n      objDiscGrade.obrigatoria = +disciplinaGrade.OBRIGATORIA;\r\n\r\n      if (typeof objDiscGrade.Disciplina === \"number\")\r\n        await this.createDisciplinasGrade(objDiscGrade, discsGradeSelecionada);\r\n    },\r\n    async createDisciplinasGrade(disciplinaGrade, disciplinasGradeSelecionada) {\r\n      const temDisciplina = this.checkDiscGradeExiste(disciplinaGrade, disciplinasGradeSelecionada);\r\n\r\n      if (temDisciplina)\r\n        await disciplinaGradeService.update(\r\n          disciplinaGrade.Disciplina,\r\n          disciplinaGrade.Grade,\r\n          disciplinaGrade\r\n        );\r\n      else await disciplinaGradeService.create(disciplinaGrade);\r\n\r\n      this.updateProgressBar();\r\n    },\r\n    checkDiscGradeExiste(disciplinaGrade, disciplinasGradeSelecionada) {\r\n      for (const disc of disciplinasGradeSelecionada) {\r\n        if (disciplinaGrade.Disciplina === disc.Disciplina) return true;\r\n      }\r\n      return false;\r\n    },\r\n    open() {\r\n      this.$refs.BaseModalDisciplinaGrade.open();\r\n    },\r\n    close() {\r\n      this.$refs.BaseModalDisciplinaGrade.close();\r\n    },\r\n    handleSelectCurso() {\r\n      this.gradesCursoSelecionado = this.AllGrades.filter((grade) => {\r\n        return grade.Curso == this.cursoSelecionado.id;\r\n      });\r\n    },\r\n    getIdDisciplina(codigoDisc) {\r\n      for (const disc of this.AllDisciplinas) if (disc.codigo == codigoDisc) return disc.id;\r\n    },\r\n    disciplinaFound(idDisciplina) {\r\n      return this.AllDisciplinas.find((disciplina) => disciplina.id === idDisciplina);\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"PrincipaisCursosDCC\", \"AllDisciplinas\", \"AllGrades\", \"DisciplinasGrades\"]),\r\n    hasCursoSelected() {\r\n      return this.cursoSelecionado;\r\n    },\r\n    cursosDCCOrdered() {\r\n      return orderBy(this.PrincipaisCursosDCC, \"name\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalImportacao.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalImportacao.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ModalImportacao.vue?vue&type=template&id=45a44f77&\"\nimport script from \"./ModalImportacao.vue?vue&type=script&lang=js&\"\nexport * from \"./ModalImportacao.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}