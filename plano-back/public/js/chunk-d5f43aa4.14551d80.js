(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d5f43aa4"],{"2afa":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-component row"},[a("PageHeader",{attrs:{title:"Docentes"}},[a("BaseButton",{attrs:{template:"ajuda"},on:{click:function(t){return e.$refs.modalAjuda.toggle()}}})],1),a("div",{staticClass:"page-content"},[a("div",{staticClass:"div-table"},[a("BaseTable",{scopedSlots:e._u([{key:"thead",fn:function(){return[a("th",{staticClass:"clickable t-start",staticStyle:{width:"240px"},attrs:{title:"Clique para ordenar por nome"},on:{click:function(t){return e.toggleOrder(e.ordenacaoDocentesMain,"nome")}}},[e._v("\n            Nome\n            "),a("i",{class:e.setIconByOrder(e.ordenacaoDocentesMain,"nome")})]),a("th",{staticClass:"clickable t-start",staticStyle:{width:"120px"},attrs:{title:"Clique para ordenar por apelido"},on:{click:function(t){return e.toggleOrder(e.ordenacaoDocentesMain,"apelido")}}},[e._v("\n            Apelido\n            "),a("i",{class:e.setIconByOrder(e.ordenacaoDocentesMain,"apelido")})]),a("th",{staticClass:"clickable t-start",staticStyle:{width:"240px"},attrs:{title:"Clique para ordenar pelo nome do siga"},on:{click:function(t){return e.toggleOrder(e.ordenacaoDocentesMain,"nomesiga")}}},[e._v("\n            Nome SIGA\n            "),a("i",{class:e.setIconByOrder(e.ordenacaoDocentesMain,"nomesiga")})]),a("th",{staticClass:"clickable t-center",staticStyle:{width:"65px"},on:{click:function(t){return e.toggleOrder(e.ordenacaoDocentesMain,"ativo","desc")}}},[e._v("\n            Ativo\n            "),a("i",{class:e.setIconByOrder(e.ordenacaoDocentesMain,"ativo")})])]},proxy:!0},{key:"tbody",fn:function(){return[e._l(e.DocentesOrdered,function(t){return a("tr",{key:t.id+t.apelido,class:[{"bg-selected":e.docenteClickadoId==t.id},"clickable"],on:{click:function(a){return e.handleClickInDocente(t)}}},[a("td",{staticClass:"t-start",staticStyle:{width:"240px"}},[e._v(e._s(t.nome))]),a("td",{staticClass:"t-start",staticStyle:{width:"120px"}},[e._v("\n              "+e._s(t.apelido)+"\n            ")]),a("td",{staticClass:"t-start",staticStyle:{width:"240px"}},[e._v("\n              "+e._s(t.nomesiga)+"\n            ")]),a("td",{staticStyle:{width:"65px"}},[e._v(e._s(e.booleanToText(t.ativo)))])])}),e.DocentesOrdered.length?e._e():a("tr",[a("td",{staticClass:"text-center",staticStyle:{width:"425px"},attrs:{colspan:"3"}},[a("b",[e._v("Nenhum docente encontrado!")])])])]},proxy:!0}])})],1),a("Card",{attrs:{title:"Docente",toggleFooter:e.isEdit},on:{"btn-salvar":e.editDocente,"btn-delete":e.openModalDelete,"btn-add":e.addDocente,"btn-clean":e.cleanDocente},scopedSlots:e._u([{key:"form-group",fn:function(){return[a("div",{staticClass:"row mb-2 mx-0"},[a("div",{staticClass:"form-group col m-0 px-0"},[a("label",{staticClass:"col-form-label",attrs:{required:"",for:"nome"}},[e._v("Nome")]),a("input",{staticClass:"form-control form-control-sm input-maior",attrs:{id:"nome",type:"text"},domProps:{value:e.docenteForm.nome},on:{input:function(t){e.docenteForm.nome=t.target.value.toUpperCase()}}})])]),a("div",{staticClass:"row mb-2 mx-0"},[a("div",{staticClass:"form-group col-8 m-0 px-0"},[a("label",{staticClass:"col-form-label",attrs:{required:"",for:"apelido"}},[e._v("Apelido")]),a("input",{staticClass:"form-control form-control-sm input-medio",attrs:{id:"apelido",type:"text"},domProps:{value:e.docenteForm.apelido},on:{input:function(t){e.docenteForm.apelido=t.target.value.toUpperCase()}}})]),a("div",{staticClass:"form-check form-check-inline col-auto m-0 mt-4 px-0"},[a("label",{staticClass:"form-check-label mr-2",attrs:{for:"ativo"}},[e._v("Ativo")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.docenteForm.ativo,expression:"docenteForm.ativo"}],attrs:{id:"ativo",type:"checkbox",value:"1"},domProps:{checked:Array.isArray(e.docenteForm.ativo)?e._i(e.docenteForm.ativo,"1")>-1:e.docenteForm.ativo},on:{change:function(t){var a=e.docenteForm.ativo,n=t.target,o=!!n.checked;if(Array.isArray(a)){var i="1",r=e._i(a,i);n.checked?r<0&&e.$set(e.docenteForm,"ativo",a.concat([i])):r>-1&&e.$set(e.docenteForm,"ativo",a.slice(0,r).concat(a.slice(r+1)))}else e.$set(e.docenteForm,"ativo",o)}}})])]),a("div",{staticClass:"row mb-2 mx-0"},[a("div",{staticClass:"form-group col m-0 px-0"},[a("label",{staticClass:"col-form-label",attrs:{required:"",for:"nomesiga"}},[e._v("Nome SIGA")]),a("input",{staticClass:"form-control form-control-sm input-maior",attrs:{id:"nomesiga",type:"text"},domProps:{value:e.docenteForm.nomesiga},on:{input:function(t){e.docenteForm.nomesiga=t.target.value.toUpperCase()}}})])]),e.isEdit?[a("div",{staticClass:"border-bottom mt-2 mb-1"}),a("small",[e._v("Perfis Associados ao docente")]),a("div",{staticClass:"row mb-3 mx-0"},[a("div",{staticClass:"div-table"},[a("BaseTable",{attrs:{type:"main",styles:"max-height: 300px"},scopedSlots:e._u([{key:"thead",fn:function(){return[a("v-th",{attrs:{width:"25"}}),a("v-th",{attrs:{width:"225",align:"start"}},[e._v("Perfis")])]},proxy:!0},{key:"tbody",fn:function(){return e._l(e.AllPerfis,function(t){return a("tr",{key:t.id+t.abreviacao,on:{click:function(a){return e.toggleItemInArray(t.id,e.perfisAssociados)}}},[a("v-td",{attrs:{width:"25",type:"content"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.perfisAssociados,expression:"perfisAssociados"}],staticStyle:{width:"11px"},attrs:{type:"checkbox"},domProps:{value:t.id,checked:Array.isArray(e.perfisAssociados)?e._i(e.perfisAssociados,t.id)>-1:e.perfisAssociados},on:{change:function(a){var n=e.perfisAssociados,o=a.target,i=!!o.checked;if(Array.isArray(n)){var r=t.id,s=e._i(n,r);o.checked?s<0&&(e.perfisAssociados=n.concat([r])):s>-1&&(e.perfisAssociados=n.slice(0,s).concat(n.slice(s+1)))}else e.perfisAssociados=i}}})]),a("v-td",{attrs:{width:"225",align:"start",title:t.nome}},[e._v("\n                      "+e._s(t.nome)+"\n                    ")])],1)})},proxy:!0}],null,!1,532469061)})],1)])]:e._e()]},proxy:!0}])})],1),a("ModalDelete",{ref:"modalDelete",attrs:{isDeleting:e.isEdit},on:{"btn-deletar":e.deleteDocente}},[e.isEdit?a("li",{staticClass:"list-group-item"},[a("span",[e._v("\n        Tem certeza que deseja excluír o docente "),a("b",[e._v(e._s(e.docenteForm.nome))]),e._v(" ?\n      ")])]):a("li",{staticClass:"list-group-item"},[e._v("Nenhum docente selecionado.")])]),a("ModalAjuda",{ref:"modalAjuda"},[a("li",{staticClass:"list-group-item"},[a("b",[e._v("Adicionar:")]),e._v(" Preencha o cartão em branco à direita e em seguida, clique em\n      Adicionar "),a("font-awesome-icon",{staticClass:"icon-green",attrs:{icon:["fas","plus"]}}),e._v(" .\n    ")],1),a("li",{staticClass:"list-group-item"},[a("b",[e._v("Editar:")]),e._v(" Clique na linha da tabela do docente que deseja alterar. Em\n      seguida, no cartão à direita, altere as informações que desejar e clique em Salvar\n      "),a("font-awesome-icon",{staticClass:"icon-green",attrs:{icon:["fas","check"]}}),e._v(" .\n    ")],1),a("li",{staticClass:"list-group-item"},[a("b",[e._v("Deletar:")]),e._v(" Clique na linha da tabela do docente que deseja remover. Em\n      seguida, no cartão à direita, clique em Remover\n      "),a("font-awesome-icon",{staticClass:"icon-red",attrs:{icon:["fas","trash-alt"]}}),e._v("\n      e confirme a remoção na janela que será aberta.\n    ")],1),a("li",{staticClass:"list-group-item"},[a("b",[e._v("Limpar:")]),e._v(" No cartão à direita, clique em Cancelar\n      "),a("font-awesome-icon",{staticClass:"icon-gray",attrs:{icon:["fas","times"]}}),e._v(" , para limpar as\n      informações.\n    ")],1),a("li",{staticClass:"list-group-item"},[a("b",[e._v("Ordenar:")]),e._v(" Clique no cabeçalho da tabela, na coluna desejada, para alterar a\n      ordenação das informações.\n    ")])])],1)},o=[],i=a("cebc"),r=(a("57e7"),a("a481"),a("96cf"),a("3b8d")),s=a("75fc"),c=(a("d25f"),a("6d67"),a("2f62")),l=a("7ab5"),d=a("55d1"),u=a("9165"),p=a("25df"),m=a("d027"),f={id:null,nome:null,apelido:null,nomesiga:null,creditos:0,ativo:1},h={DocenteId:null,Perfil:null},v={name:"DashboardDocente",mixins:[u["n"],u["m"]],components:{Card:p["b"],ModalAjuda:m["a"],ModalDelete:m["b"]},data:function(){return{docenteForm:this.$_.clone(f),perfisAssociados:[],docenteClickadoId:null,perfilsOfCurrentDocente:[],ordenacaoDocentesMain:{order:"nome",type:"asc"}}},methods:{handleClickInDocente:function(e){this.cleanDocente(),this.docenteClickadoId=e.id,this.showDocente(e)},cleanDocente:function(){this.docenteClickadoId=null,this.docenteForm=this.$_.clone(f)},showDocente:function(e){this.docenteForm=this.$_.clone(e),this.updatePerfisAssociados()},updatePerfisAssociados:function(){this.perfilsOfCurrentDocente=this.$_.map(this.$_.filter(this.DocentePerfis,["DocenteId",this.docenteForm.id]),"Perfil"),this.perfisAssociados=Object(s["a"])(this.perfilsOfCurrentDocente)},openModalDelete:function(){this.$refs.modalDelete.open()},booleanToText:function(e){return e?"Sim":"-"},addDocente:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.setPartialLoading(!0),this.docenteForm.nomesiga||(this.docenteForm.nomesiga=this.docenteForm.nome),e.next=5,l["a"].create(this.docenteForm);case 5:t=e.sent,this.cleanDocente(),this.pushNotification({type:"success",text:"Docente ".concat(t.Docente.nome," foi criada!")}),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.pushNotification({type:"error",title:"Erro ao criar Docente!",text:e.t0.response.data.fullMessage?"<br/>"+e.t0.response.data.fullMessage.replace("\n","<br/>"):""});case 13:return e.prev=13,this.setPartialLoading(!1),e.finish(13);case 16:case"end":return e.stop()}},e,this,[[0,10,13,16]])}));function t(){return e.apply(this,arguments)}return t}(),editDocente:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.setPartialLoading(!0),e.next=4,l["a"].update(this.docenteForm.id,this.docenteForm);case 4:return t=e.sent,e.next=7,this.editDocentePerfil();case 7:this.pushNotification({type:"success",text:"Docente ".concat(t.Docente.nome," foi atualizada!")}),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.pushNotification({type:"error",title:"Erro ao atualizar Docente",text:e.t0.response.data.fullMessage?"<br/>"+e.t0.response.data.fullMessage.replace("\n","<br/>"):""});case 13:return e.prev=13,this.setPartialLoading(!1),e.finish(13);case 16:case"end":return e.stop()}},e,this,[[0,10,13,16]])}));function t(){return e.apply(this,arguments)}return t}(),deleteDocente:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.setPartialLoading(!0),e.next=4,l["a"].delete(this.docenteForm.id,this.docenteForm);case 4:t=e.sent,this.cleanDocente(),this.pushNotification({type:"success",text:"Docente ".concat(t.Docente.nome," foi excluída!")}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),this.pushNotification({type:"error",title:"Erro ao excluir Docente!",text:"O docente não pode estar vinculado a nenhum perfil"});case 12:return e.prev=12,this.setPartialLoading(!1),e.finish(12);case 15:case"end":return e.stop()}},e,this,[[0,9,12,15]])}));function t(){return e.apply(this,arguments)}return t}(),editDocentePerfil:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<this.perfilsOfCurrentDocente.length)){e.next=9;break}if(a=this.$_.indexOf(this.perfisAssociados,this.perfilsOfCurrentDocente[t]),-1!==a){e.next=6;break}return e.next=6,this.deletePerfil(this.perfilsOfCurrentDocente[t]);case 6:t++,e.next=1;break;case 9:n=0;case 10:if(!(n<this.perfisAssociados.length)){e.next=18;break}if(o=this.$_.indexOf(this.perfilsOfCurrentDocente,this.perfisAssociados[n]),-1!==o){e.next=15;break}return e.next=15,this.addPerfil(this.perfisAssociados[n]);case 15:n++,e.next=10;break;case 18:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),addPerfil:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=this.$_.clone(h),a.Docente=this.docenteForm.id,a.DocenteId=this.docenteForm.id,a.Perfil=t,e.next=6,d["a"].create(a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),deletePerfil:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].delete(this.docenteForm.id,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},computed:Object(i["a"])({},Object(c["c"])(["AllDocentes","AllPerfis"]),{DocentesOrdered:function(){return this.$_.orderBy(this.AllDocentes,this.ordenacaoDocentesMain.order,this.ordenacaoDocentesMain.type)},DocentePerfis:function(){return this.$store.state.docentePerfil.DocentePerfis},isEdit:function(){return null!==this.docenteForm.id}})},b=v,g=(a("8810"),a("2877")),x=Object(g["a"])(b,n,o,!1,null,"ee5d944c",null);t["default"]=x.exports},8810:function(e,t,a){"use strict";var n=a("d0df"),o=a.n(n);o.a},d0df:function(e,t,a){}}]);
//# sourceMappingURL=chunk-d5f43aa4.14551d80.js.map