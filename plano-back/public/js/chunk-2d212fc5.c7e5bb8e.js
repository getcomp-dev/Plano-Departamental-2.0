(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d212fc5"],{ab6d:function(e,o,t){"use strict";t.r(o);var r=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"main-component row p-0"},[t("portal",{attrs:{to:"page-header"}},[t("BaseButton",{attrs:{template:"filtros"},on:{click:function(o){return e.toggleAsideModal("filtros")}}}),t("BaseButton",{attrs:{template:"relatorio"},on:{click:function(o){return e.toggleAsideModal("relatorio")}}}),t("BaseButton",{attrs:{template:"download"},on:{click:function(o){return e.toggleAsideModal("DownloadTurmasCursos")}}}),t("BaseButton",{attrs:{template:"ajuda"},on:{click:function(o){return e.toggleAsideModal("ajuda")}}})],1),t("div",{staticClass:"div-table"},[t("BaseTable",{scopedSlots:e._u([{key:"thead",fn:function(){return[t("v-th-ordination",{attrs:{currentOrder:e.ordenacaoTable.cursos,orderToCheck:"codigo",width:"85",paddingX:"0",title:"Código do curso"}},[e._v("\n          Código\n        ")]),t("v-th-ordination",{attrs:{currentOrder:e.ordenacaoTable.cursos,orderToCheck:"nome",width:"300",align:"start",title:"Nome do Curso"}},[e._v("\n          Curso\n        ")]),t("v-th",{attrs:{width:"65",title:"Período letivo, ordenação fixa"}},[e._v("\n          Periodo\n          "),t("font-awesome-icon",{attrs:{icon:["fas","thumbtack"]}})],1),t("v-th",{attrs:{width:"95",title:"Código da Disciplina"}},[e._v("Cód. Disciplina")]),t("v-th",{attrs:{width:"45",title:"Turma"}},[e._v("Turma")]),t("v-th",{attrs:{width:"120",title:"Horário"}},[e._v("Horário")]),t("v-th",{attrs:{width:"45",paddingX:"0",title:"Vagas do Plano Grade+Extra"}},[e._v("Vagas")])]},proxy:!0},{key:"tbody",fn:function(){return[e._l(e.CursosOrderedTable,(function(o){return[t("tr",{key:o.id,staticClass:"bg-custom"},[t("v-td",{attrs:{width:"85"}},[e._v(e._s(o.codigo))]),t("v-td",{attrs:{width:"300",align:"start",title:o.nome}},[e._v(e._s(o.nome))]),t("v-td",{attrs:{width:"65"}}),t("v-td",{attrs:{width:"95"}}),t("v-td",{attrs:{width:"40"}}),t("v-td",{attrs:{width:"120"}}),t("v-td",{attrs:{width:"45"}})],1),e._l(e.getTurmasDoCurso(o.id),(function(r){return t("tr",{key:o.id+r.letra+r.id},[t("v-td",{attrs:{width:"85"}}),t("v-td",{attrs:{width:"300"}}),t("v-td",{attrs:{width:"65"}},[e._v(e._s(r.periodo))]),t("v-td",{attrs:{width:"95"}},[e._v(e._s(r.disciplina.codigo))]),t("v-td",{attrs:{width:"45"}},[e._v(e._s(r.letra))]),t("v-td",{attrs:{width:"120"}},[e._v(e._s(e.generateHorariosText(r.Horario1,r.Horario2)))]),t("v-td",{attrs:{width:"45"}},[e._v("\n              "+e._s(r.pedidoDoCurso.vagasPeriodizadas+r.pedidoDoCurso.vagasNaoPeriodizadas)+"\n            ")])],1)}))]})),e.CursosOrderedTable.length?e._e():t("tr",[t("v-td",{attrs:{colspan:"7",width:"755"}},[t("b",[e._v("Nenhum curso encontrado.")]),e._v("\n            Clique no botão de filtros para selecioná-los.\n          ")])],1)]},proxy:!0}])})],1),t("ModalRelatorio",{ref:"modalRelatorio",on:{"selection-option":function(o){return e.generatePdf(o)}}}),t("ModalDownloadTurmasCursos",{ref:"modalDownloadTurmasCursos",on:{"selection-option":function(o){return e.downloadFiles(o)}}}),t("ModalFiltros",{ref:"modalFiltros",attrs:{callbacks:e.modalFiltrosCallbacks,tabsOptions:e.modalFiltrosTabs}},[t("BaseTable",{directives:[{name:"show",rawName:"v-show",value:"Cursos"===e.modalFiltrosTabs.current,expression:"modalFiltrosTabs.current === 'Cursos'"}],attrs:{type:"modal",hasSearchBar:!0},scopedSlots:e._u([{key:"thead-search",fn:function(){return[t("VInputSearch",{attrs:{placeholder:"Pesquise nome ou codigo de um curso..."},model:{value:e.searchCursos,callback:function(o){e.searchCursos=o},expression:"searchCursos"}})]},proxy:!0},{key:"thead",fn:function(){return[t("v-th",{attrs:{width:"25"}}),t("v-th-ordination",{attrs:{currentOrder:e.ordenacaoModal.cursos,orderToCheck:"codigo",width:"70",align:"start"}},[e._v("\n          Código\n        ")]),t("v-th-ordination",{attrs:{currentOrder:e.ordenacaoModal.cursos,orderToCheck:"nome",width:"270",align:"start"}},[e._v("\n          Nome\n        ")]),t("v-th-ordination",{attrs:{currentOrder:e.ordenacaoModal.cursos,orderToCheck:"turno",width:"85",align:"start"}},[e._v("\n          Turno\n        ")])]},proxy:!0},{key:"tbody",fn:function(){return[e._l(e.CursosOptionsOrdered,(function(o){return t("tr",{directives:[{name:"prevent-click-selection",rawName:"v-prevent-click-selection"}],key:o.id+o.nome,on:{click:function(t){return e.toggleItemInArray(o,e.filtroCursos.selecionados)}}},[t("v-td",{attrs:{width:"25",type:"content"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtroCursos.selecionados,expression:"filtroCursos.selecionados"}],attrs:{type:"checkbox"},domProps:{value:o,checked:Array.isArray(e.filtroCursos.selecionados)?e._i(e.filtroCursos.selecionados,o)>-1:e.filtroCursos.selecionados},on:{change:function(t){var r=e.filtroCursos.selecionados,s=t.target,a=!!s.checked;if(Array.isArray(r)){var i=o,n=e._i(r,i);s.checked?n<0&&e.$set(e.filtroCursos,"selecionados",r.concat([i])):n>-1&&e.$set(e.filtroCursos,"selecionados",r.slice(0,n).concat(r.slice(n+1)))}else e.$set(e.filtroCursos,"selecionados",a)}}})]),t("v-td",{attrs:{width:"70",align:"start"}},[e._v(e._s(o.codigo))]),t("v-td",{attrs:{align:"start",width:"270",title:o.nome}},[e._v("\n            "+e._s(o.nome)+"\n          ")]),t("v-td",{attrs:{width:"85",align:"start"}},[e._v(e._s(o.turno))])],1)})),e.CursosOptionsOrdered.length?e._e():t("tr",[t("v-td",{attrs:{colspan:"3",width:"450"}},[e._v("NENHUM CURSO ENCONTRADO")])],1)]},proxy:!0}])}),t("BaseTable",{directives:[{name:"show",rawName:"v-show",value:"Períodos"===e.modalFiltrosTabs.current,expression:"modalFiltrosTabs.current === 'Períodos'"}],attrs:{type:"modal"},scopedSlots:e._u([{key:"thead",fn:function(){return[t("v-th",{attrs:{width:"25"}}),t("v-th",{attrs:{width:"425",align:"start"}},[e._v("Periodos Letivo")])]},proxy:!0},{key:"tbody",fn:function(){return e._l(e.PeriodosOptions,(function(o){return t("tr",{directives:[{name:"prevent-click-selection",rawName:"v-prevent-click-selection"}],key:o.id+o.nome,on:{click:function(t){return e.selecionaPeriodo(o,e.filtroPeriodos.selecionados)}}},[t("v-td",{attrs:{width:"25",type:"content"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtroPeriodos.selecionados,expression:"filtroPeriodos.selecionados"}],attrs:{type:"checkbox"},domProps:{value:o,checked:Array.isArray(e.filtroPeriodos.selecionados)?e._i(e.filtroPeriodos.selecionados,o)>-1:e.filtroPeriodos.selecionados},on:{click:function(t){return t.stopPropagation(),e.selecionaPeriodo(o)},change:function(t){var r=e.filtroPeriodos.selecionados,s=t.target,a=!!s.checked;if(Array.isArray(r)){var i=o,n=e._i(r,i);s.checked?n<0&&e.$set(e.filtroPeriodos,"selecionados",r.concat([i])):n>-1&&e.$set(e.filtroPeriodos,"selecionados",r.slice(0,n).concat(r.slice(n+1)))}else e.$set(e.filtroPeriodos,"selecionados",a)}}})]),t("v-td",{attrs:{width:"425",align:"start"}},[e._v(e._s(o.nome))])],1)}))},proxy:!0}])}),t("BaseTable",{directives:[{name:"show",rawName:"v-show",value:"Semestres"===e.modalFiltrosTabs.current,expression:"modalFiltrosTabs.current === 'Semestres'"}],attrs:{type:"modal"},scopedSlots:e._u([{key:"thead",fn:function(){return[t("v-th",{attrs:{width:"25"}}),t("v-th",{attrs:{width:"425",align:"start"}},[e._v("Semestre Letivo")])]},proxy:!0},{key:"tbody",fn:function(){return e._l(e.SemestresOptions,(function(o){return t("tr",{directives:[{name:"prevent-click-selection",rawName:"v-prevent-click-selection"}],key:o.id+o.nome,on:{click:function(t){return e.selecionaSemestre(o)}}},[t("v-td",{attrs:{width:"25",type:"content"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtroSemestres.selecionados,expression:"filtroSemestres.selecionados"}],attrs:{type:"checkbox"},domProps:{value:o,indeterminate:o.halfChecked,checked:Array.isArray(e.filtroSemestres.selecionados)?e._i(e.filtroSemestres.selecionados,o)>-1:e.filtroSemestres.selecionados},on:{click:function(t){return t.stopPropagation(),e.selecionaSemestre(o)},change:function(t){var r=e.filtroSemestres.selecionados,s=t.target,a=!!s.checked;if(Array.isArray(r)){var i=o,n=e._i(r,i);s.checked?n<0&&e.$set(e.filtroSemestres,"selecionados",r.concat([i])):n>-1&&e.$set(e.filtroSemestres,"selecionados",r.slice(0,n).concat(r.slice(n+1)))}else e.$set(e.filtroSemestres,"selecionados",a)}}})]),t("v-td",{attrs:{width:"425",align:"start"}},[e._v(e._s(o.nome))])],1)}))},proxy:!0}])})],1),t("ModalAjuda",{ref:"modalAjuda"},[t("li",{staticClass:"list-group-item"},[t("b",[e._v("Visualizar conteúdo:")]),e._v("\n      Clique no ícone filtros\n      "),t("font-awesome-icon",{staticClass:"icon-gray",attrs:{icon:["fas","list-ul"]}}),e._v("\n      . Em seguida, utilize as abas para navegar entre os filtros. Selecione as informações que\n      deseja visualizar e clique em OK.\n    ")],1),t("li",{staticClass:"list-group-item"},[t("b",[e._v("Relatório :")]),e._v("\n      Clique no ícone relatório\n      "),t("font-awesome-icon",{staticClass:"icon-gray",attrs:{icon:["fas","file-alt"]}}),e._v("\n      . Em seguida, indique se deseja gerar o relatório completo com todas as disciplinas ou o\n      relatório parcial com as disciplinas exibidas na tela.\n    ")],1)])],1)},s=[],a=(t("1c01"),t("58b2"),t("8e6e"),t("456d"),t("4917"),t("d25f"),t("96cf"),t("1da1")),i=t("ade3"),n=(t("7514"),t("ac6a"),t("f3e2"),t("2909")),d=t("2f62"),l=t("d4b9"),c=t("eaf8"),u=t("9165"),f=t("d027"),v=t("25df"),h=t("6938"),m=t("21a6");function p(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);o&&(r=r.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,r)}return t}function C(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?p(Object(t),!0).forEach((function(o){Object(i["a"])(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}var b={name:"TurmasCursos",components:{ModalRelatorio:f["g"],ModalFiltros:f["f"],ModalAjuda:f["a"],VInputSearch:v["k"],ModalDownloadTurmasCursos:f["d"]},mixins:[u["l"],u["k"],u["b"],u["i"],u["e"]],data:function(){var e=this;return{searchCursos:"",asideModalsRefs:["modalAjuda","modalRelatorio","modalFiltros","modalDownloadTurmasCursos"],ordenacaoTable:{cursos:{order:"codigo",type:"asc"}},ordenacaoModal:{cursos:{order:"codigo",type:"asc"}},filtroCursos:{selecionados:[],ativados:[]},filtroPeriodos:{ativados:[],selecionados:[]},filtroSemestres:{selecionados:[]},modalFiltrosTabs:{current:"Cursos",array:["Cursos","Períodos","Semestres"]},modalFiltrosCallbacks:{selectAll:{Cursos:function(){e.filtroCursos.selecionados=Object(n["a"])(e.CursosOptionsFiltered)},Periodos:function(){e.filtroPeriodos.selecionados=Object(n["a"])(e.PeriodosOptions),e.filtroSemestres.selecionados=Object(n["a"])(e.SemestresOptions)},Semestres:function(){e.filtroSemestres.selecionados=Object(n["a"])(e.SemestresOptions),e.filtroPeriodos.selecionados=Object(n["a"])(e.PeriodosOptions)}},selectNone:{Cursos:function(){e.filtroCursos.selecionados=[]},Periodos:function(){e.filtroPeriodos.selecionados=[],e.filtroSemestres.selecionados=[]},Semestres:function(){e.filtroSemestres.selecionados=[],e.filtroPeriodos.selecionados=[]}},btnOk:function(){e.filtroCursos.ativados=Object(n["a"])(e.filtroCursos.selecionados),e.filtroPeriodos.ativados=Object(n["a"])(e.filtroPeriodos.selecionados)}}}},beforeMount:function(){this.modalFiltrosCallbacks.selectAll.Periodos(),this.modalFiltrosCallbacks.selectAll.Cursos(),this.modalFiltrosCallbacks.btnOk()},methods:{getTurmasDoCurso:function(e){var o=this,t=[];return this.AllTurmas.forEach((function(r){var s=o.Pedidos[r.id].find((function(o){return o.Curso===e}));(s.vagasPeriodizadas>0||s.vagasNaoPeriodizadas>0)&&t.push(C(C({},r),{},{pedidoDoCurso:s}))})),Object(l["a"])(t,["periodo","disciplina.codigo","letra"])},downloadFiles:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(o){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.setLoading({type:"partial",value:!0}),e.next=4,h["a"].generatePdfTurmasCurso({Plano:this.currentPlano.id,periodo:o});case 4:return e.next=6,h["a"].createZipTurmasCursos();case 6:return e.next=8,fetch("http://200.131.219.57:3000/api/download/downloadTurmasCursosZip",{method:"GET",headers:{Authorization:"Bearer ".concat(this.$store.state.auth.token)}});case 8:return t=e.sent,e.next=11,t.blob();case 11:r=e.sent,Object(m["saveAs"])(r,"TurmasCursos.zip"),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](0),console.log("Erro ao gerar download",e.t0);case 18:return e.prev=18,this.setLoading({type:"partial",value:!1}),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[0,15,18,21]])})));function o(o){return e.apply(this,arguments)}return o}(),generatePdf:function(e){var o=this;Promise.all([t.e("chunk-28d42982"),t.e("chunk-0947d182")]).then(t.bind(null,"a730")).then((function(t){var r,s,a=t.pdfTurmasCursos;e?(r=o.AllCursos,s=o.PeriodosOptions):(r=o.filtroCursos.ativados,s=o.filtroPeriodos.ativados),a({cursos:r,periodos:s,plano:o.currentPlano})}))}},computed:C(C({},Object(d["c"])(["AllTurmas","Pedidos","AllCursos"])),{},{CursosOrderedTable:function(){var e=this.ordenacaoTable.cursos,o=e.order,t=e.type;return Object(l["a"])(this.filtroCursos.ativados,o,t)},CursosOptionsOrdered:function(){var e=this.ordenacaoModal.cursos,o=e.order,t=e.type;return Object(l["a"])(this.CursosOptionsFiltered,o,t)},CursosOptionsFiltered:function(){if(""===this.searchCursos)return this.AllCursos;var e=Object(c["f"])(this.searchCursos);return this.AllCursos.filter((function(o){var t=Object(c["f"])(o.nome),r=Object(c["f"])(o.codigo);return t.match(e)||r.match(e)}))}})},g=b,w=t("2877"),y=Object(w["a"])(g,r,s,!1,null,null,null);o["default"]=y.exports}}]);
//# sourceMappingURL=chunk-2d212fc5.c7e5bb8e.js.map