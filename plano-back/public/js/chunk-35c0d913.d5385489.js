(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35c0d913","chunk-c39d30b2"],{"28a5":function(t,r,e){"use strict";var i=e("aae3"),o=e("cb7c"),n=e("ebd6"),a=e("0390"),s=e("9def"),l=e("5f1b"),c=e("520a"),u=e("79e5"),d=Math.min,f=[].push,p="split",v="length",h="lastIndex",m=4294967295,g=!u((function(){RegExp(m,"y")}));e("214f")("split",2,(function(t,r,e,u){var b;return b="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[v]||2!="ab"[p](/(?:ab)*/)[v]||4!="."[p](/(.?)(.?)/)[v]||"."[p](/()()/)[v]>1||""[p](/.?/)[v]?function(t,r){var o=String(this);if(void 0===t&&0===r)return[];if(!i(t))return e.call(o,t,r);var n,a,s,l=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,p=void 0===r?m:r>>>0,g=new RegExp(t.source,u+"g");while(n=c.call(g,o)){if(a=g[h],a>d&&(l.push(o.slice(d,n.index)),n[v]>1&&n.index<o[v]&&f.apply(l,n.slice(1)),s=n[0][v],d=a,l[v]>=p))break;g[h]===n.index&&g[h]++}return d===o[v]?!s&&g.test("")||l.push(""):l.push(o.slice(d)),l[v]>p?l.slice(0,p):l}:"0"[p](void 0,0)[v]?function(t,r){return void 0===t&&0===r?[]:e.call(this,t,r)}:e,[function(e,i){var o=t(this),n=void 0==e?void 0:e[r];return void 0!==n?n.call(e,o,i):b.call(String(o),e,i)},function(t,r){var i=u(b,t,this,r,b!==e);if(i.done)return i.value;var c=o(t),f=String(this),p=n(c,RegExp),v=c.unicode,h=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(g?"y":"g"),C=new p(g?c:"^(?:"+c.source+")",h),y=void 0===r?m:r>>>0;if(0===y)return[];if(0===f.length)return null===l(C,f)?[f]:[];var O=0,A=0,S=[];while(A<f.length){C.lastIndex=g?A:0;var w,D=l(C,g?f:f.slice(A));if(null===D||(w=d(s(C.lastIndex+(g?0:A)),f.length))===O)A=a(f,A,v);else{if(S.push(f.slice(O,A)),S.length===y)return S;for(var j=1;j<=D.length-1;j++)if(S.push(D[j]),S.length===y)return S;A=O=w}}return S.push(f.slice(O)),S}]}))},"2fdb":function(t,r,e){"use strict";var i=e("5ca1"),o=e("d2c8"),n="includes";i(i.P+i.F*e("5147")(n),"String",{includes:function(t){return!!~o(this,t,n).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"348f":function(t,r,e){"use strict";e.d(r,"b",(function(){return O})),e.d(r,"c",(function(){return f})),e.d(r,"d",(function(){return A})),e.d(r,"a",(function(){return S}));e("4f37"),e("6762"),e("2fdb"),e("28a5");function i(t){if(Array.isArray(t))return t}function o(t,r){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var e=[],i=!0,o=!1,n=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0)if(e.push(a.value),r&&e.length===r)break}catch(l){o=!0,n=l}finally{try{i||null==s["return"]||s["return"]()}finally{if(o)throw n}}return e}}var n=e("06c5");function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,r){return i(t)||o(t,r)||Object(n["a"])(t,r)||a()}var l=e("4360"),c=e("0a94"),u=e("9429"),d=e("eaf8");function f(t,r,e,i){var o=Object(d["c"])({periodo:i||null,Plano:e||null,letra:t[r.letra]||null});return o.letra?(p(o,t[r.disciplinaCod]),o.Disciplina?(v(o,t[r.horarioESala]),o.turno1?(h(o,t[r.docentes]),o):null):null):null}function p(t,r){if(r){var e=Object(c["a"])(l["a"].getters.AllDisciplinas,["codigo",r]);e?(t.Disciplina=e.id,t.creditoTotal=e.creditoTotal):t.Disciplina=null}}function v(t,r){if(r){var e=r.split(";"),i=s(e,2),o=i[0],n=i[1];t.Horario1=b(o),t.creditoTotal>=4&&(t.Horario2=b(n)),t.turno1=m(t.Horario1,t.Horario2),"EAD"!==t.turno1&&(t.Sala1=y(o),t.Sala2=y(n))}}function h(t,r){if(r){var e=r.split(";"),i=s(e,2),o=i[0],n=i[1];t.Docente1=g(o),t.Docente2=g(n)}}function m(t,r){return t||r?31===t?"EAD":Object(u["a"])(l["a"].getters.HorariosNoturno,["id",t])||Object(u["a"])(l["a"].getters.HorariosNoturno,["id",r])?"Noturno":"Diurno":null}function g(t){if(!t)return null;var r=Object(c["a"])(l["a"].getters.AllDocentes,(function(r){return Object(d["f"])(r.nome)===Object(d["f"])(t)}));return r?r.id:null}function b(t){if(!t)return null;var r=t.split(","),e=s(r,3),i=e[0],o=e[1],n=e[2],a=C(i,o);if(a){var u=Object(c["a"])(l["a"].getters.AllHorarios,["horario",a]);return u?u.id:null}return n.includes("EAD")?31:null}function C(t,r){if(!t||!r)return null;var e=null;switch(t.trim().substring(0,3)){case"SEG":e="2a";break;case"TER":e="3a";break;case"QUA":e="4a";break;case"QUI":e="5a";break;case"SEX":e="6a";break;case"SAB":return"EAD";default:return null}var i=r.split("AS"),o=s(i,2),n=o[0],a=o[1];if(!n||!a)return null;var l=n.trim().substring(0,2),c=a.trim().substring(0,2);return"".concat(e," ").concat(l,"-").concat(c)}function y(t){if(!t)return null;var r=t.split(","),e=s(r,3),i=e[2],o=Object(d["f"])(i),n=Object(c["a"])(l["a"].getters.AllSalas,(function(t){var r=Object(d["f"])(t.nome);return o.includes(r)}));return n?n.id:null}function O(t,r,e){var i={Turma:null,Curso:null,vagasOferecidas:0,vagasOcupadas:0},o=Object(c["a"])(l["a"].getters.AllCursos,["codigo",t[r.cursoCod]]);return i.Curso=o?o.id:null,i.Turma=e,i.vagasOferecidas=parseInt(t[r.vagas1],10),i.vagasOcupadas=parseInt(t[r.vagas2],10),i.Curso?i:null}e("ac6a"),e("456d");function A(t){if(t.length){var r=["DISCIPLINA","DISCIPLINA_COD.","TURMA","CURSO_COD.","CURSO","VAGASOFERECIDAS","VAGASOCUPADAS","HORARIOS","DOCENTES"];if(Object.keys(t[0]).length<r.length)throw new Error("Verifique a integridade e o formato do(s) arquivo(s)")}}function S(t){var r={disciplinaCod:null,letra:null,cursoCod:null,vagas1:null,vagas2:null,horarioESala:null,docentes:null},e=0;for(var i in t){if(1===e)r.disciplinaCod=i;else if(2===e)r.letra=i;else if(3===e)r.cursoCod=i;else if(5===e)r.vagas1=i;else if(6===e)r.vagas2=i;else if(7===e)r.horarioESala=i;else if(8===e){r.docentes=i;break}e++}return r}},"4f37":function(t,r,e){"use strict";e("aa77")("trim",(function(t){return function(){return t(this,3)}}))},5147:function(t,r,e){var i=e("2b4c")("match");t.exports=function(t){var r=/./;try{"/./"[t](r)}catch(e){try{return r[i]=!1,!"/./"[t](r)}catch(o){}}return!0}},a044:function(t,r,e){"use strict";e.r(r);var i=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"main-component row"},[e("portal",{attrs:{to:"page-header"}},[e("BaseButton",{attrs:{template:"ajuda"},on:{click:function(r){return t.$refs.modalAjuda.toggle()}}})],1),e("div",{staticClass:"page-content"},[e("div",{staticClass:"table-div"},[e("BaseTable",{scopedSlots:t._u([{key:"thead",fn:function(){return[e("v-th-ordination",{attrs:{currentOrder:t.ordenacaoConflitos,orderToCheck:"disciplina.codigo",width:"80",align:"start",title:"Código da Disciplina"}},[t._v("\n            Código\n          ")]),e("v-th-ordination",{attrs:{currentOrder:t.ordenacaoConflitos,orderToCheck:"disciplina.nome",width:"300",align:"start",title:"Nome da Disciplina"}},[t._v("\n            Disciplina\n          ")]),e("v-th",{attrs:{width:"45"}},[t._v("Turma")]),e("v-th",{attrs:{width:"55",title:"Código do Curso"}},[t._v("Curso")]),e("v-th",{attrs:{colspan:"420",paddingX:"0"}},[t._v("\n            Conflito\n            "),e("v-th",{attrs:{width:"180",align:"start",title:"Tipo do Conflito"}},[t._v("Tipo")]),e("v-th",{attrs:{width:"120",title:"Valor no SIGA"}},[t._v("SIGA")]),e("v-th",{attrs:{width:"120",title:"Valor no Sistema (SIPlanWeb)"}},[t._v("Sistema")])],1)]},proxy:!0},{key:"tbody",fn:function(){return[t._l(t.turmasConflitosOrdered,(function(r){return[e("tr",{key:r.id,staticClass:"bg-custom"},[e("v-td",{attrs:{width:"80",align:"start"}},[t._v(t._s(r.disciplina.codigo))]),e("v-td",{attrs:{width:"300",align:"start"}},[t._v(t._s(r.disciplina.nome))]),e("v-td",{attrs:{width:"45"}},[t._v(t._s(r.letra))]),e("v-td",{attrs:{width:"55"}}),e("v-td",{attrs:{width:"180"}}),e("v-td",{attrs:{width:"120"}}),e("v-td",{attrs:{width:"120"}})],1),t._l(r.conflitos,(function(i){return e("tr",{key:r.id+i.label+i.curso.id},[e("v-td",{attrs:{width:"80"}}),e("v-td",{attrs:{width:"300"}}),e("v-td",{attrs:{width:"45"}}),e("v-td",{attrs:{width:"55",title:i.curso.nome}},[t._v(t._s(i.curso.codigo))]),e("v-td",{attrs:{width:"180",align:"start"}},[t._v(t._s(i.label))]),e("v-td",{attrs:{width:"120",title:i.siga}},[t._v(t._s(i.siga))]),e("v-td",{attrs:{width:"120",title:i.sistema}},[t._v(t._s(i.sistema))])],1)}))]})),t.turmasConflitosOrdered.length?t._e():e("tr",[e("v-td",{attrs:{width:"900"}},[e("b",[t._v("Nenhum conflito encontrado.")]),t._v("\n              Certifiqui-se de selecionar um arquivo correspondente com o plano atual e o periodo\n              selecionado.\n            ")])],1)]},proxy:!0}])})],1),e("Card",{attrs:{title:"Validar pedidos"},scopedSlots:t._u([{key:"body",fn:function(){return[e("VSelect",{attrs:{label:"Perído",validation:t.$v.form.periodo},model:{value:t.form.periodo,callback:function(r){t.$set(t.form,"periodo",t._n(r))},expression:"form.periodo"}},t._l(t.PeriodosLetivos,(function(t){return e("VOption",{key:t.id+t.nome,attrs:{value:t.id,text:t.nome}})})),1),e("VInputFile",{attrs:{label:"Arquivo do plano SIGA (.csv)",validation:t.$v.form.file,accept:".csv"},model:{value:t.form.file,callback:function(r){t.$set(t.form,"file",r)},expression:"form.file"}})]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{attrs:{template:"Salvar",title:"Iniciar"},on:{click:t.handleCompareTurmas}}),e("BaseButton",{attrs:{template:"cancelar"},on:{click:t.clearForm}})]},proxy:!0}])})],1),e("ModalAjuda",{ref:"modalAjuda"},[e("li",{staticClass:"list-group-item"},[e("b",[t._v("Visualizar conteúdo:")]),t._v("\n      Preencha o cartão a direita com o período do plano atual que deseja validar, em seguida\n      selecione o arquivo (.csv) de plano gerado pelo SIGA para o período correspondente. E para\n      finalizar clique no botão iniciar\n      "),e("font-awesome-icon",{staticClass:"icon-blue",attrs:{icon:["fas","check"]}}),t._v("\n      .\n    ")],1),e("li",{staticClass:"list-group-item"},[e("b",[t._v("Limpar formulário:")]),t._v("\n      No cartão à direita, clique em Cancelar\n      "),e("font-awesome-icon",{staticClass:"icon-gray",attrs:{icon:["fas","times"]}}),t._v("\n      , para limpar as informações.\n    ")],1)])],1)},o=[],n=(e("1c01"),e("58b2"),e("8e6e"),e("456d"),e("2caf"),e("ac4d"),e("8a81"),e("5df3"),e("1c4c"),e("7f7f"),e("6b54"),e("87b3"),e("7514"),e("ac6a"),e("f3e2"),e("d25f"),e("ade3")),a=(e("20d6"),e("96cf"),e("1da1")),s=e("2f62"),l=e("9429"),c=e("d4b9"),u=e("b5ae"),d=e("eaf8"),f=e("348f"),p=e("a91e"),v=e("9165"),h=e("25df"),m=e("d027");function g(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,i)}return e}function b(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?g(Object(e),!0).forEach((function(r){Object(n["a"])(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):g(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function C(t,r){var e;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=y(t))||r&&t&&"number"===typeof t.length){e&&(t=e);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a=!0,s=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return a=t.done,t},e:function(t){s=!0,n=t},f:function(){try{a||null==e.return||e.return()}finally{if(s)throw n}}}}function y(t,r){if(t){if("string"===typeof t)return O(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?O(t,r):void 0}}function O(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,i=new Array(r);e<r;e++)i[e]=t[e];return i}var A={name:"ValidaçãoLançamentoSIGA",components:{Card:h["b"],ModalAjuda:m["a"],VSelect:h["m"],VOption:h["l"],VInputFile:h["i"]},mixins:[v["d"],v["e"]],data:function(){return{form:{periodo:1,filePlano:null},turmasConflitos:[],ordenacaoConflitos:{order:"disciplina.codigo",type:"asc"}}},validations:{form:{periodo:{required:u["required"],integer:u["integer"]},file:{required:u["required"]}}},methods:{clearForm:function(){var t=this;this.form.periodo=1,this.form.file=null,this.$nextTick((function(){return t.$v.$reset()}))},handleCompareTurmas:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var r,e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$v.form.$touch(),!this.$v.form.$anyError){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,this.setLoading({type:"partial",value:!0}),t.next=7,Object(d["g"])(this.form.file);case 7:r=t.sent,Object(f["d"])(r),e=this.normalizeTurmasEPedidosSIGA(r,this.form.periodo),this.searchConflitos(e,this.form.periodo),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](3),console.log(t.t0),this.pushNotification({type:"error"});case 17:return t.prev=17,this.setLoading({type:"partial",value:!1}),t.finish(17);case 20:case"end":return t.stop()}}),t,this,[[3,13,17,20]])})));function r(){return t.apply(this,arguments)}return r}(),normalizeTurmasEPedidosSIGA:function(t,r){var e,i=this,o=Object(f["a"])(t[0]),n=[],a={},s=C(t);try{var l=function(){var t=e.value,s=Object(f["c"])(t,o,null,r);if(!s)return"continue";s.pedidosSIGA=[];var l=Object(f["b"])(t,o,null);if(l){var c=l.vagasOferecidas,u=l.vagasOcupadas;l.totalVagas=c+u}if(i.turmasAreEqual(a,s)){if(l){var d=n[n.length-1].pedidosSIGA.findIndex((function(t){return t.Curso===l.Curso}));-1===d&&n[n.length-1].pedidosSIGA.push(l)}}else l&&s.pedidosSIGA.push(l),n.push(s),a=b({},s)};for(s.s();!(e=s.n()).done;)l()}catch(c){s.e(c)}finally{s.f()}return n},searchConflitos:function(t,r){var e=this;this.turmasConflitos=[];var i=[],o=this.AllTurmas.filter((function(t){return t.periodo===r&&15!=t.disciplina.Perfil}));o.forEach((function(r){var o=t.find((function(t){return r.Disciplina==t.Disciplina&&r.letra==t.letra})),n=b(b({},r),{},{conflitos:[]});if(!o)return n.conflitos.push({label:"Turma existe apenas no sistema",siga:"-",sistema:"-",curso:Object(p["a"])({codigo:"-"})}),void i.push(n);if(e.docentesAreEqual(r,o)||n.conflitos.push({label:"Docentes diferentes",siga:e.generateDocentesText(o.Docente1,o.Docente2),sistema:e.generateDocentesText(r.Docente1,r.Docente2),curso:Object(p["a"])({codigo:"-"})}),e.horariosAreEqual(r,o)||n.conflitos.push({label:"Horarios diferentes",siga:e.generateHorariosText(o.Horario1,o.Horario2),sistema:e.generateHorariosText(r.Horario1,r.Horario2),curso:Object(p["a"])({codigo:"-"})}),!Object(l["a"])(e.disciplinasGradeDCC1Periodo,["Disciplina",r.Disciplina])){var a=e.Pedidos[r.id]||[];o.pedidosSIGA.forEach((function(t){var r=a.find((function(r){return r.Curso==t.Curso}));if(r){var i=r.vagasPeriodizadas+r.vagasNaoPeriodizadas;i==t.totalVagas||n.conflitos.push({label:"Pedido com valores diferentes",siga:t.totalVagas,sistema:0==i?"-":i,curso:e.AllCursos.find((function(t){return t.id===r.Curso}))})}else n.conflitos.push({label:"Pedido não existe no sistema",siga:t.totalVagas,sistema:"-",curso:e.AllCursos.find((function(r){return r.id===t.Curso}))})})),a.filter((function(t){return 0!=t.vagasPeriodizadas||0!=t.vagasNaoPeriodizadas})).forEach((function(t){var r=o.pedidosSIGA.find((function(r){return t.Curso==r.Curso}));r||n.conflitos.push({label:"Pedido não existe no SIGA",siga:"-",sistema:t.vagasPeriodizadas+t.vagasNaoPeriodizadas,curso:e.AllCursos.find((function(r){return r.id===t.Curso}))})}))}n.conflitos.length&&i.push(n)})),this.turmasConflitos=i},turmasAreEqual:function(t,r){return t.letra===r.letra&&t.Disciplina===r.Disciplina&&t.Horario1===r.Horario1&&t.Horario2===r.Horario2},docentesAreEqual:function(t,r){return t.Docente1==r.Docente1&&t.Docente2==r.Docente2||t.Docente1==r.Docente2&&t.Docente2==r.Docente1},horariosAreEqual:function(t,r){return t.Horario1==r.Horario1&&t.Horario2==r.Horario2||t.Horario1==r.Horario2&&t.Horario2==r.Horario1||(null==t.Horario1&&(t.Horario2==r.Horario1||t.Horario2==r.Horario2)||(null==r.Horario1&&(r.Horario2==t.Horario1||r.Horario2==t.Horario2)||(null==t.Horario2&&(t.Horario1==r.Horario1||t.Horario1==r.Horario2)||null==r.Horario2&&(r.Horario1==t.Horario1||r.Horario1==t.Horario2))))}},computed:b(b({},Object(s["c"])(["AllCursos","AllTurmas","PeriodosLetivos","Pedidos","DisciplinasGrades"])),{},{turmasConflitosOrdered:function(){var t=this.ordenacaoConflitos,r=t.order,e=t.type;return Object(c["a"])(this.turmasConflitos,r,e)},disciplinasGradeDCC1Periodo:function(){var t=this.DisciplinasGrades.filter((function(t){return 1===t.periodo})),r=[];return t.forEach((function(t){var e=r.find((function(r){return r.Disciplina===t.Disciplina}));e||r.push(b({},t))})),r}})},S=A,w=e("2877"),D=Object(w["a"])(S,i,o,!1,null,null,null);r["default"]=D.exports},aae3:function(t,r,e){var i=e("d3f4"),o=e("2d95"),n=e("2b4c")("match");t.exports=function(t){var r;return i(t)&&(void 0!==(r=t[n])?!!r:"RegExp"==o(t))}},d2c8:function(t,r,e){var i=e("aae3"),o=e("be13");t.exports=function(t,r,e){if(i(r))throw TypeError("String#"+e+" doesn't accept regex!");return String(o(t))}}}]);
//# sourceMappingURL=chunk-35c0d913.d5385489.js.map