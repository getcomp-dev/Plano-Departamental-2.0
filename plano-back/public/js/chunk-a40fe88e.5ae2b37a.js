(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a40fe88e","chunk-5985da21"],{"469f":function(i,e,r){r("6c1c"),r("1654"),i.exports=r("7d7b")},4775:function(i,e,r){"use strict";r.r(e);var a=function(){var i=this,e=i.$createElement,r=i._self._c||e;return r("div",[r("p",{staticClass:"alert alert-secondary"},[i._v("\n    Selecione as disciplinas para quais as turmas do atual plano\n    "),r("b",[i._v(i._s(i.currentPlano.nome+" - "+i.currentPlano.ano))]),i._v("\n    serão copiadas para o novo plano.\n  ")]),r("div",{staticClass:"div-table"},[r("BaseTable",{attrs:{type:"modal",hasSearchBar:!0,styles:"max-height:500px; height:500px"},scopedSlots:i._u([{key:"thead-search",fn:function(){return[r("InputSearch",{attrs:{placeholder:"Pesquise nome ou codigo de uma disciplina..."},model:{value:i.searchDisciplinasModal,callback:function(e){i.searchDisciplinasModal=e},expression:"searchDisciplinasModal"}})]},proxy:!0},{key:"thead",fn:function(){return[r("v-th",{attrs:{width:"25"}}),r("v-th-ordination",{attrs:{currentOrder:i.ordenacaoModal.disciplinas,orderToCheck:"codigo",width:"80",align:"start"}},[i._v("\n          Código\n        ")]),r("v-th-ordination",{attrs:{currentOrder:i.ordenacaoModal.disciplinas,orderToCheck:"nome",width:"260",align:"start"}},[i._v("\n          Nome\n        ")]),r("v-th-ordination",{attrs:{currentOrder:i.ordenacaoModal.disciplinas,orderToCheck:"perfil.abreviacao",width:"85",align:"start"}},[i._v("\n          Perfil\n        ")])]},proxy:!0},{key:"tbody",fn:function(){return[i._l(i.DisciplinasOrderedModal,function(e){return r("tr",{directives:[{name:"prevent-click-selection",rawName:"v-prevent-click-selection"}],key:e.id,on:{click:function(r){return i.toggleItemInArray(e.id,i.filtrosDisciplinas)}}},[r("v-td",{attrs:{width:"25",type:"content"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:i.filtrosDisciplinas,expression:"filtrosDisciplinas"}],attrs:{type:"checkbox"},domProps:{value:e.id,checked:Array.isArray(i.filtrosDisciplinas)?i._i(i.filtrosDisciplinas,e.id)>-1:i.filtrosDisciplinas},on:{change:function(r){var a=i.filtrosDisciplinas,o=r.target,t=!!o.checked;if(Array.isArray(a)){var s=e.id,n=i._i(a,s);o.checked?n<0&&(i.filtrosDisciplinas=a.concat([s])):n>-1&&(i.filtrosDisciplinas=a.slice(0,n).concat(a.slice(n+1)))}else i.filtrosDisciplinas=t}}})]),r("v-td",{attrs:{width:"80",align:"start"}},[i._v(i._s(e.codigo))]),r("v-td",{attrs:{width:"260",align:"start",title:e.nome}},[i._v("\n            "+i._s(e.nome)+"\n          ")]),r("v-td",{attrs:{width:"85",align:"start"}},[i._v(i._s(e.perfil.abreviacao))])],1)}),i.DisciplinasOrderedModal.length?i._e():r("tr",[r("v-td",{attrs:{colspan:"3",width:"450"}},[i._v("NENHUMA DISCIPLINA ENCONTRADA.")])],1)]},proxy:!0}])})],1)])},o=[],t=(r("4917"),r("cebc")),s=(r("6762"),r("2fdb"),r("ac6a"),r("f3e2"),r("7514"),r("e814")),n=r.n(s),c=(r("d25f"),r("6d67"),r("2f62")),l=r("ebd8"),d=r("456a"),u=r("7ed3"),p=r("5bdd"),f=r("16ba"),h=r("eaf8"),C=r("9165"),v=r("25df"),m=r("9ae6"),D={name:"ModalNovoPlano",mixins:[C["n"],C["l"]],components:{InputSearch:v["d"],ImportPlano:m["default"]},props:{plano:{type:Object,required:!0}},data:function(){return{searchDisciplinasModal:"",filtrosDisciplinas:[],ordenacaoModal:{disciplinas:{order:"codigo",type:"asc"}},grades1semestre:{CCD:[],CCN:[],EC:[],SI:[]},grades2semestre:{CCD:[],CCN:[],EC:[],SI:[]}}},methods:{open:function(){this.$refs.baseModalNovoPlano.open()},close:function(){this.$refs.baseModalNovoPlano.close()},selectAllDisciplinas:function(){this.filtrosDisciplinas=this.$_.union(this.filtrosDisciplinas,this.$_.map(this.DisciplinasFiltredModal,"id"))},selectNoneDisciplinas:function(){this.filtrosDisciplinas=this.$_.difference(this.filtrosDisciplinas,this.$_.map(this.DisciplinasFiltredModal,"id"))},gradesAtivas:function(i){var e,r,a;e=this.$_.filter(this.$store.state.grade.Grades,["Curso",4]),e=this.$_.orderBy(e,"periodoInicio","desc"),a=0;for(var o=0;o<e.length;o++)if(r=a+1,a=1+2*(n()(i,10)-n()(e[o].periodoInicio.slice(0,4),10))+(1-n()(e[o].periodoInicio.slice(5,6),10))/2,this.grades1semestre.CCD.push({id:e[o].id,inicio:r,fim:a}),a>9)break;a=0;for(var t=0;t<e.length;t++)if(r=a+1,a=1+2*(n()(i,10)-n()(e[t].periodoInicio.slice(0,4),10))+(3-n()(e[t].periodoInicio.slice(5,6),10))/2,this.grades2semestre.CCD.push({id:e[t].id,inicio:r,fim:a}),a>9)break;e=this.$_.filter(this.$store.state.grade.Grades,["Curso",1]),e=this.$_.orderBy(e,"periodoInicio","desc"),a=0;for(var s=0;s<e.length;s++)if(r=a+1,a=1+2*(n()(i,10)-n()(e[s].periodoInicio.slice(0,4),10))+(1-n()(e[s].periodoInicio.slice(5,6),10))/2,this.grades1semestre.CCN.push({id:e[s].id,inicio:r,fim:a}),a>9)break;a=0;for(var c=0;c<e.length;c++)if(r=a+1,a=1+2*(n()(i,10)-n()(e[c].periodoInicio.slice(0,4),10))+(3-n()(e[c].periodoInicio.slice(5,6),10))/2,this.grades2semestre.CCN.push({id:e[c].id,inicio:r,fim:a}),a>9)break;e=this.$_.filter(this.$store.state.grade.Grades,["Curso",3]),e=this.$_.orderBy(e,"periodoInicio","desc"),a=0;for(var l=0;l<e.length;l++)if(r=a+1,a=1+2*(n()(i,10)-n()(e[l].periodoInicio.slice(0,4),10))+(1-n()(e[l].periodoInicio.slice(5,6),10))/2,this.grades1semestre.SI.push({id:e[l].id,inicio:r,fim:a}),a>9)break;a=0;for(var d=0;d<e.length;d++)if(r=a+1,a=1+2*(n()(i,10)-n()(e[d].periodoInicio.slice(0,4),10))+(3-n()(e[d].periodoInicio.slice(5,6),10))/2,this.grades2semestre.SI.push({id:e[d].id,inicio:r,fim:a}),a>9)break;e=this.$_.filter(this.$store.state.grade.Grades,["Curso",2]),e=this.$_.orderBy(e,"periodoInicio","desc"),a=0;for(var u=0;u<e.length;u++)if(r=a+1,a=1+2*(n()(i,10)-n()(e[u].periodoInicio.slice(0,4),10))+(1-n()(e[u].periodoInicio.slice(5,6),10))/2,this.grades1semestre.EC.push({id:e[u].id,inicio:r,fim:a}),a>9)break;a=0;for(var p=0;p<e.length;p++)if(r=a+1,a=1+2*(n()(i,10)-n()(e[p].periodoInicio.slice(0,4),10))+(3-n()(e[p].periodoInicio.slice(5,6),10))/2,this.grades2semestre.EC.push({id:e[p].id,inicio:r,fim:a}),a>9)break},generateTurmasNovoPlano:function(){var i=this;this.gradesAtivas(this.plano.ano);for(var e=[],r=[],a=function(r){var a=i.$_.filter(i.$store.state.disciplinaGrade.DisciplinaGrades,{Grade:i.grades1semestre.CCD[r].id});a.forEach(function(a){if(a.periodo%2===1&&a.periodo>=i.grades1semestre.CCD[r].inicio&&a.periodo<=i.grades1semestre.CCD[r].fim){var o=i.$_.find(e,{Disciplina:a.Disciplina});void 0===o?e.push({Disciplina:a.Disciplina,CCD:!0,EC:!1,CCN:!1,SI:!1,periodo:1}):o.CCD=!0}})},o=0;o<this.grades1semestre.CCD.length;o++)a(o);var t=function(r){var a=i.$_.filter(i.$store.state.disciplinaGrade.DisciplinaGrades,{Grade:i.grades1semestre.EC[r].id});a.forEach(function(a){if(a.periodo%2===1&&a.periodo>=i.grades1semestre.EC[r].inicio&&a.periodo<=i.grades1semestre.EC[r].fim){var o=i.$_.find(e,{Disciplina:a.Disciplina});void 0===o?e.push({Disciplina:a.Disciplina,CCD:!1,EC:!0,CCN:!1,SI:!1,periodo:1}):o.EC=!0}})};for(o=0;o<this.grades1semestre.EC.length;o++)t(o);var s=function(r){var a=i.$_.filter(i.$store.state.disciplinaGrade.DisciplinaGrades,{Grade:i.grades1semestre.CCN[r].id});a.forEach(function(a){if(a.periodo%2===0&&a.periodo>=i.grades1semestre.CCN[r].inicio&&a.periodo<=i.grades1semestre.CCN[r].fim){var o=i.$_.find(e,{Disciplina:a.Disciplina});void 0===o?e.push({Disciplina:a.Disciplina,CCD:!1,EC:!1,CCN:!0,SI:!1,periodo:1}):o.CCN=!0}})};for(o=0;o<this.grades1semestre.CCN.length;o++)s(o);var n=function(r){var a=i.$_.filter(i.$store.state.disciplinaGrade.DisciplinaGrades,{Grade:i.grades1semestre.SI[r].id});a.forEach(function(a){if(a.periodo%2===0&&a.periodo>=i.grades1semestre.SI[r].inicio&&a.periodo<=i.grades1semestre.SI[r].fim){var o=i.$_.find(e,{Disciplina:a.Disciplina});void 0===o?e.push({Disciplina:a.Disciplina,CCD:!1,EC:!1,CCN:!1,SI:!0,periodo:1}):o.SI=!0}})};for(o=0;o<this.grades1semestre.SI.length;o++)n(o);var c=function(e){var a=i.$_.filter(i.$store.state.disciplinaGrade.DisciplinaGrades,{Grade:i.grades2semestre.CCD[e].id});a.forEach(function(a){if(a.periodo%2===0&&a.periodo>=i.grades2semestre.CCD[e].inicio&&a.periodo<=i.grades2semestre.CCD[e].fim){var o=i.$_.find(r,{Disciplina:a.Disciplina});void 0===o?r.push({Disciplina:a.Disciplina,CCD:!0,EC:!1,CCN:!1,SI:!1,periodo:3}):o.CCD=!0}})};for(o=0;o<this.grades2semestre.CCD.length;o++)c(o);var l=function(e){var a=i.$_.filter(i.$store.state.disciplinaGrade.DisciplinaGrades,{Grade:i.grades2semestre.EC[e].id});a.forEach(function(a){if(a.periodo%2===0&&a.periodo>=i.grades2semestre.EC[e].inicio&&a.periodo<=i.grades2semestre.EC[e].fim){var o=i.$_.find(r,{Disciplina:a.Disciplina});void 0===o?r.push({Disciplina:a.Disciplina,CCD:!1,EC:!0,CCN:!1,SI:!1,periodo:3}):o.EC=!0}})};for(o=0;o<this.grades2semestre.EC.length;o++)l(o);var d=function(e){var a=i.$_.filter(i.$store.state.disciplinaGrade.DisciplinaGrades,{Grade:i.grades2semestre.CCN[e].id});a.forEach(function(a){if(a.periodo%2===1&&a.periodo>=i.grades2semestre.CCN[e].inicio&&a.periodo<=i.grades2semestre.CCN[e].fim){var o=i.$_.find(r,{Disciplina:a.Disciplina});void 0===o?r.push({Disciplina:a.Disciplina,CCD:!1,EC:!1,CCN:!0,SI:!1,periodo:3}):o.CCN=!0}})};for(o=0;o<this.grades2semestre.CCN.length;o++)d(o);var u=function(e){var a=i.$_.filter(i.$store.state.disciplinaGrade.DisciplinaGrades,{Grade:i.grades2semestre.SI[e].id});a.forEach(function(a){if(a.periodo%2===1&&a.periodo>=i.grades2semestre.SI[e].inicio&&a.periodo<=i.grades2semestre.SI[e].fim){var o=i.$_.find(r,{Disciplina:a.Disciplina});void 0===o?r.push({Disciplina:a.Disciplina,CCD:!1,EC:!1,CCN:!1,SI:!0,periodo:3}):o.SI=!0}})};for(o=0;o<this.grades2semestre.SI.length;o++)u(o);e=this.$_.filter(e,function(e){var r=i.$_.find(i.DisciplinasInPerfis,{id:e.Disciplina}).Perfil;return 13!==r&&15!==r}),r=this.$_.filter(r,function(e){var r=i.$_.find(i.DisciplinasInPerfis,{id:e.Disciplina}).Perfil;return 13!==r&&15!==r});var p=[];return e.forEach(function(e){i.$_.includes(i.filtrosDisciplinas,e.Disciplina)||((e.CCD||e.EC)&&(e.CCN||e.SI)?(p.push({semestre:1,Disciplina:e.Disciplina,turno:"Diurno",letra:"A",CCD:e.CCD,EC:e.EC}),p.push({semestre:1,Disciplina:e.Disciplina,turno:"Noturno",letra:"B",CCN:e.CCN,SI:e.SI})):e.CCD||e.EC?p.push({semestre:1,Disciplina:e.Disciplina,turno:"Diurno",letra:"A",CCD:e.CCD,EC:e.EC}):(e.CCN||e.SI)&&p.push({semestre:1,Disciplina:e.Disciplina,turno:"Noturno",letra:"A",CCN:e.CCN,SI:e.SI}))}),r.forEach(function(e){i.$_.includes(i.filtrosDisciplinas,e.Disciplina)||((e.CCD||e.EC)&&(e.CCN||e.SI)?(p.push({semestre:3,Disciplina:e.Disciplina,turno:"Diurno",letra:"A",CCD:e.CCD,EC:e.EC}),p.push({semestre:3,Disciplina:e.Disciplina,turno:"Noturno",letra:"B",CCN:e.CCN,SI:e.SI})):e.CCD||e.EC?p.push({semestre:3,Disciplina:e.Disciplina,turno:"Diurno",letra:"A",CCD:e.CCD,EC:e.EC}):(e.CCN||e.SI)&&p.push({semestre:3,Disciplina:e.Disciplina,turno:"Noturno",letra:"A",CCN:e.CCN,SI:e.SI}))}),p},handleCopyPlano:function(){var i=this;this.setPartialLoading(!0);var e=this.generateTurmasNovoPlano();l["a"].create(this.plano).then(function(r){e.forEach(function(i){d["a"].create({id:void 0,periodo:i.semestre,letra:i.letra,turno1:i.turno,turno2:void 0,Disciplina:i.Disciplina,Docente1:void 0,Docente2:void 0,Horario1:void 0,Horario2:void 0,Sala1:void 0,Sala2:void 0,Plano:r.Plano.id}).then(function(e){i.CCN&&u["a"].update(1,e.Turma.id,{Turma:e.Turma.id,Curso:1,vagasPeriodizadas:1,vagasNaoPeriodizadas:0}).then(function(i){}).catch(function(i){console.log("erro ao atualizar pedido: "+i)}),i.EC&&u["a"].update(2,e.Turma.id,{Turma:e.Turma.id,Curso:2,vagasPeriodizadas:1,vagasNaoPeriodizadas:0}).then(function(i){}).catch(function(i){console.log("erro ao atualizar pedido: "+i)}),i.SI&&u["a"].update(3,e.Turma.id,{Turma:e.Turma.id,Curso:3,vagasPeriodizadas:1,vagasNaoPeriodizadas:0}).then(function(i){}).catch(function(i){console.log("erro ao atualizar pedido: "+i)}),i.CCD&&u["a"].update(4,e.Turma.id,{Turma:e.Turma.id,Curso:4,vagasPeriodizadas:1,vagasNaoPeriodizadas:0}).then(function(i){}).catch(function(i){console.log("erro ao atualizar pedido: "+i)})}).catch(function(i){console.log("erro ao criar turma: "+i)})});var a=i.$_.filter(i.$store.state.turma.Turmas,function(e){var r=i.$_.includes(i.filtrosDisciplinas,e.Disciplina);return!!r});a.forEach(function(e){d["a"].create({id:void 0,periodo:e.periodo,letra:e.letra,turno1:e.turno1,turno2:void 0,Disciplina:e.Disciplina,Horario1:e.Horario1,Horario2:e.Horario2,Sala1:void 0,Sala2:void 0,Plano:r.Plano.id}).then(function(r){var a=i.$store.state.pedido.Pedidos[e.id];a.forEach(function(i){u["a"].update(i.Curso,r.Turma.id,{Turma:r.Turma.id,Curso:i.Curso,vagasPeriodizadas:i.vagasPeriodizadas,vagasNaoPeriodizadas:0}).then(function(i){}).catch(function(i){console.log("erro ao atualizar pedido: "+i)})})}).catch(function(i){console.log("erro ao criar turma externa: "+i)})}),i.$store.state.turmaExterna.Turmas.forEach(function(e){f["a"].create({id:void 0,periodo:e.periodo,letra:e.letra,turno1:e.turno1,turno2:void 0,Disciplina:e.Disciplina,Horario1:e.Horario1,Horario2:e.Horario2,Sala1:void 0,Sala2:void 0,Plano:r.Plano.id}).then(function(r){var a=i.$store.state.pedidoExterno.Pedidos[e.id];a.forEach(function(i){p["a"].update(i.Curso,r.Turma.id,{Turma:r.Turma.id,Curso:i.Curso,vagasPeriodizadas:i.vagasPeriodizadas,vagasNaoPeriodizadas:i.vagasNaoPeriodizadas}).then(function(i){}).catch(function(i){console.log("erro ao atualizar pedido externo: "+i)})})}).catch(function(i){console.log("erro ao criar turma externa: "+i)})}),i.$store.dispatch("fetchAll").then(function(){setTimeout(function(){i.setPartialLoading(!1),i.close()},300)})})}},computed:Object(t["a"])({},Object(c["c"])(["DisciplinasInPerfis"]),{DisciplinasOrderedModal:function(){return this.$_.orderBy(this.DisciplinasFiltredModal,this.ordenacaoModal.disciplinas.order,this.ordenacaoModal.disciplinas.type)},DisciplinasFiltredModal:function(){if(""===this.searchDisciplinasModal)return this.DisciplinasInPerfis;var i=Object(h["c"])(this.searchDisciplinasModal);return this.$_.filter(this.DisciplinasInPerfis,function(e){var r=Object(h["c"])(e.nome),a=Object(h["c"])(e.codigo);return r.match(i)||a.match(i)})}})},g=D,I=r("2877"),b=Object(I["a"])(g,a,o,!1,null,null,null);e["default"]=b.exports},"4f37":function(i,e,r){"use strict";r("aa77")("trim",function(i){return function(){return i(this,3)}})},"5d73":function(i,e,r){i.exports=r("469f")},"7d7b":function(i,e,r){var a=r("e4ae"),o=r("7cd6");i.exports=r("584a").getIterator=function(i){var e=o(i);if("function"!=typeof e)throw TypeError(i+" is not iterable!");return a(e.call(i))}},"9ae6":function(i,e,r){"use strict";r.r(e);var a=function(){var i=this,e=i.$createElement,r=i._self._c||e;return r("div",[i._m(0),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-4"},[r("label",{attrs:{for:"periodoPlano"}},[i._v("Período das turmas:")]),r("select",{directives:[{name:"model",rawName:"v-model.number",value:i.periodoTurmas,expression:"periodoTurmas",modifiers:{number:!0}}],staticClass:"form-control w-100",attrs:{id:"periodoPlano"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(i){return i.selected}).map(function(e){var r="_value"in e?e._value:e.value;return i._n(r)});i.periodoTurmas=e.target.multiple?r:r[0]}}},i._l(i.PeriodosLetivos,function(e){return r("option",{key:e.id+e.nome,domProps:{value:e.id}},[i._v("\n          "+i._s(e.nome)+"\n        ")])}),0)])]),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col"},[r("input",{ref:"inputFilePlano",staticClass:"w-100 form-control-file",attrs:{type:"file"}})])])])},o=[function(){var i=this,e=i.$createElement,r=i._self._c||e;return r("p",{staticClass:"alert alert-secondary"},[i._v("\n    Selecione um arquivo\n    "),r("b",[i._v(".csv")]),i._v("\n    para importar as turmas para o novo plano.\n  ")])}],t=(r("4f37"),r("6762"),r("2fdb"),r("7514"),r("759f"),r("28a5"),r("a745")),s=r.n(t);function n(i){if(s()(i))return i}var c=r("5d73"),l=r.n(c);function d(i,e){var r=[],a=!0,o=!1,t=void 0;try{for(var s,n=l()(i);!(a=(s=n.next()).done);a=!0)if(r.push(s.value),e&&r.length===e)break}catch(c){o=!0,t=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(o)throw t}}return r}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function p(i,e){return n(i)||d(i,e)||u()}r("a481");var f=r("f499"),h=r.n(f),C=(r("96cf"),r("3b8d")),v=r("cebc"),m=r("2f62"),D=r("1146"),g=r.n(D),I=r("ebd8"),b=r("eaf8"),_={name:"ModalImportPlano",props:{plano:{type:Object,required:!0}},data:function(){return{periodoTurmas:null}},methods:Object(v["a"])({},Object(m["b"])(["createTurma","editPedido"]),{handleImportPlano:function(){var i=Object(C["a"])(regeneratorRuntime.mark(function i(){var e,r,a=this;return regeneratorRuntime.wrap(function(i){while(1)switch(i.prev=i.next){case 0:this.setPartialLoading(!0),e=this.$refs.inputFilePlano.files[0],r=new FileReader,r.onload=function(){var i=Object(C["a"])(regeneratorRuntime.mark(function i(e){var r,o,t,s,n;return regeneratorRuntime.wrap(function(i){while(1)switch(i.prev=i.next){case 0:return r=g.a.read(e.target.result,{type:"binary"}),o=r.Sheets[r.SheetNames[0]],t=h()(g.a.utils.sheet_to_json(o)),s=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s/g,""),n=JSON.parse(s),i.next=7,a.createPlanoImported(n,a.periodoTurmas);case 7:return i.next=9,a.$store.dispatch("fetchAll");case 9:a.setPartialLoading(!1);case 10:case"end":return i.stop()}},i)}));return function(e){return i.apply(this,arguments)}}(),r.readAsBinaryString(e);case 5:case"end":return i.stop()}},i,this)}));function e(){return i.apply(this,arguments)}return e}(),createPlanoImported:function(){var i=Object(C["a"])(regeneratorRuntime.mark(function i(e){var r,a,o,t,s,n,c,d,u,f,h,C,m,D,g,_,N,E,$,S,P,y,T=arguments;return regeneratorRuntime.wrap(function(i){while(1)switch(i.prev=i.next){case 0:for(t in r=T.length>1&&void 0!==T[1]?T[1]:1,a={disciplinaCod:null,letra:null,cursoCod:null,vagas1:null,vagas2:null,horarioESala:null,docentes:null},o=0,e[0])1===o?a.disciplinaCod=t:2===o?a.letra=t:3===o?a.cursoCod=t:5===o?a.vagas1=t:6===o?a.vagas2=t:7===o?a.horarioESala=t:8===o&&(a.docentes=t),o++;return s={},i.next=7,I["a"].create(this.plano);case 7:n=i.sent,c=!0,d=!1,u=void 0,i.prev=11,f=l()(e);case 13:if(c=(h=f.next()).done){i.next=33;break}if(C=h.value,m=Object(b["b"])(),m.Plano=n.Plano.id,m.periodo=r,m.letra=C[a.letra]||null,m.Disciplina=this.findDisciplinaId(C[a.disciplinaCod]),C[a.horarioESala]&&(D=C[a.horarioESala].split(";"),g=p(D,2),_=g[0],N=g[1],m.Horario1=this.findHorarioId(_),m.Horario2=this.findHorarioId(N),m.turno1=this.findTurno(m.Horario1,m.Horario2),"EAD"!==m.turno1&&(m.Sala1=this.findSalaId(_),m.Sala2=this.findSalaId(N))),C[a.docentes]&&(E=C[a.docentes].split(";"),$=p(E,2),S=$[0],P=$[1],m.Docente1=this.findDocenteId(S),m.Docente2=this.findDocenteId(P)),m.Disciplina&&m.letra&&m.turno1){i.next=24;break}return i.abrupt("continue",30);case 24:if(!this.isTheSameTurma(s,m)){i.next=26;break}return i.abrupt("continue",30);case 26:return i.next=28,this.createTurma(m);case 28:y=i.sent,s=Object(v["a"])({},y);case 30:c=!0,i.next=13;break;case 33:i.next=39;break;case 35:i.prev=35,i.t0=i["catch"](11),d=!0,u=i.t0;case 39:i.prev=39,i.prev=40,c||null==f.return||f.return();case 42:if(i.prev=42,!d){i.next=45;break}throw u;case 45:return i.finish(42);case 46:return i.finish(39);case 47:case"end":return i.stop()}},i,this,[[11,35,39,47],[40,,42,46]])}));function e(e){return i.apply(this,arguments)}return e}(),createPedido:function(){var i=Object(C["a"])(regeneratorRuntime.mark(function i(e,r,a){var o;return regeneratorRuntime.wrap(function(i){while(1)switch(i.prev=i.next){case 0:if(o={Turma:null,Curso:null,vagasNaoPeriodizadas:0,vagasPeriodizadas:0,vagasOferecidas:0,vagasOcupadas:0},o.Turma=a,o.Curso=this.findCursoId(e[r.cursoCod]),o.vagasOferecidas=e[r.vagas1],o.vagasOcupadas=e[r.vagas2],!o.Curso){i.next=10;break}return i.next=8,this.editPedido(o);case 8:i.next=11;break;case 10:console.log("Curso não econtrado: "+e[r.cursoCod]);case 11:case"end":return i.stop()}},i,this)}));function e(e,r,a){return i.apply(this,arguments)}return e}(),findTurno:function(i,e){return i||e?31==i?"EAD":this.$_.some(this.HorariosNoturno,["id",i])||this.$_.some(this.HorariosNoturno,["id",e])?"Noturno":"Diurno":null},findCursoId:function(i){var e=this.$_.find(this.AllCursos,["codigo",i]);return e?e.id:null},findDocenteId:function(i){if(!i.length)return null;var e=this.$_.find(this.AllDocentes,function(e){return Object(b["c"])(e.nomesiga)===Object(b["c"])(i)});return e?e.id:null},findDisciplinaId:function(i){var e=this.$_.find(this.AllDisciplinas,["codigo",i]);return e?e.id:null},findHorarioId:function(i){if(!i)return null;var e=i.split(","),r=p(e,3),a=r[0],o=r[1],t=r[2],s=this.parseDiaEHora(a,o);if(s){var n=this.$_.find(this.AllHorarios,["horario",s]);return n?n.id:null}return Object(b["c"])(t).includes(Object(b["c"])("HORÁRIO EAD"))?(console.log("EAD sala",t),31):null},parseDiaEHora:function(i,e){if(!i||!e)return null;var r=null,a=null;switch(i.trim().substring(0,3).toLowerCase()){case"seg":r="2a";break;case"ter":r="3a";break;case"qua":r="4a";break;case"qui":r="5a";break;case"sex":r="6a";break;case"sab":return"EAD"}var o=this.$_.find(this.ListaDeTodosHorarios,function(i){return i.nome.includes(e.substring(0,2)+"-")})||{};return a=o.nome,r&&a?r+" "+a:null},findSalaId:function(i){if(!i)return null;var e=i.split(","),r=p(e,3),a=r[2],o=Object(b["c"])(a),t=this.$_.find(this.AllSalas,function(i){var e=Object(b["c"])(i.nome);return o.includes(e)});return t?t.id:null},isTheSameTurma:function(i,e){return i.letra===e.letra&&i.Disciplina===e.Disciplina&&i.turno1===e.turno1&&i.Horario1===e.Horario1&&i.Horario2===e.Horario2}}),computed:Object(v["a"])({},Object(m["c"])(["AllHorarios","HorariosNoturno","AllDisciplinas","AllCursos","ListaDeTodosHorarios","AllTurmas","AllSalas","AllDocentes","PeriodosLetivos"]))},N=_,E=r("2877"),$=Object(E["a"])(N,a,o,!1,null,null,null);e["default"]=$.exports},a21f:function(i,e,r){var a=r("584a"),o=a.JSON||(a.JSON={stringify:JSON.stringify});i.exports=function(i){return o.stringify.apply(o,arguments)}},f499:function(i,e,r){i.exports=r("a21f")}}]);
//# sourceMappingURL=chunk-a40fe88e.5ae2b37a.js.map