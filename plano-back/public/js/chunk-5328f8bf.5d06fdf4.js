(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5328f8bf"],{"469f":function(r,e,t){t("6c1c"),t("1654"),r.exports=t("7d7b")},"4f37":function(r,e,t){"use strict";t("aa77")("trim",function(r){return function(){return r(this,3)}})},"5d73":function(r,e,t){r.exports=t("469f")},"7d7b":function(r,e,t){var n=t("e4ae"),a=t("7cd6");r.exports=t("584a").getIterator=function(r){var e=a(r);if("function"!=typeof e)throw TypeError(r+" is not iterable!");return n(e.call(r))}},"7f7f":function(r,e,t){var n=t("86cc").f,a=Function.prototype,i=/^\s*function ([^ (]*)/,o="name";o in a||t("9e1e")&&n(a,o,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(r){return""}}})},a21f:function(r,e,t){var n=t("584a"),a=n.JSON||(n.JSON={stringify:JSON.stringify});r.exports=function(r){return a.stringify.apply(a,arguments)}},f499:function(r,e,t){r.exports=t("a21f")},f6c9:function(r,e,t){"use strict";t.r(e);var n=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("BaseModal",{ref:"baseModal",attrs:{title:"Importar plano",position:"center",hasBackground:!0,hasFooter:!0},scopedSlots:r._u([{key:"modal-body",fn:function(){return[t("input",{ref:"inputFilePlano",attrs:{type:"file"}})]},proxy:!0},{key:"modal-footer",fn:function(){return[t("BaseButton",{staticClass:"ml-auto",attrs:{color:"lightblue",text:"Importar"},on:{click:r.handleImportPlano}})]},proxy:!0}])})},a=[],i=(t("4f37"),t("6762"),t("2fdb"),t("7514"),t("759f"),t("5d73")),o=t.n(i),s=t("e814"),u=t.n(s),l=(t("7f7f"),t("28a5"),t("a745")),c=t.n(l);function f(r){if(c()(r))return r}function d(r,e){var t=[],n=!0,a=!1,i=void 0;try{for(var s,u=o()(r);!(n=(s=u.next()).done);n=!0)if(t.push(s.value),e&&t.length===e)break}catch(l){a=!0,i=l}finally{try{n||null==u["return"]||u["return"]()}finally{if(a)throw i}}return t}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function h(r,e){return f(r)||d(r,e)||p()}t("a481");var b=t("f499"),v=t.n(b),m=(t("96cf"),t("3b8d")),g=t("cebc"),x=t("1146"),y=t.n(x),k=t("2f62"),w=t("eaf8"),O={name:"ModalImportPlano",methods:Object(g["a"])({},Object(k["b"])(["createTurma","editPedido"]),{open:function(){this.$refs.baseModal.open()},toggle:function(){this.$refs.baseModal.toggle()},close:function(){this.$refs.baseModal.close()},handleImportPlano:function(){var r=Object(m["a"])(regeneratorRuntime.mark(function r(){var e,t,n=this;return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:if(!this.AllTurmas.length){r.next=4;break}return this.pushNotification({type:"error",text:"Plano atual deve estar vázio para fazer a importação!"}),this.$refs.baseModal.close(),r.abrupt("return");case 4:this.setPartialLoading(!0),e=this.$refs.inputFilePlano.files[0],t=new FileReader,t.onload=function(){var r=Object(m["a"])(regeneratorRuntime.mark(function r(t){var a,i,o,s,l,c,f,d,p;return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:return a=y.a.read(t.target.result,{type:"binary"}),i=a.Sheets[a.SheetNames[0]],o=v()(y.a.utils.sheet_to_json(i)),s=o.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s/g,""),l=JSON.parse(s),c=e.name.split("."),f=h(c,2),d=f[1],p=u()(d)||null,r.next=9,n.createPlanoImported(l.slice(480,500),p);case 9:return r.next=11,n.$store.dispatch("fetchAll");case 11:n.$refs.baseModal.close(),n.setPartialLoading(!1);case 13:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}(),t.readAsBinaryString(e);case 9:case"end":return r.stop()}},r,this)}));function e(){return r.apply(this,arguments)}return e}(),createPlanoImported:function(){var r=Object(m["a"])(regeneratorRuntime.mark(function r(e){var t,n,a,i,s,u,l,c,f,d,p,b,v,m,x,y,k,O=arguments;return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:for(i in t=O.length>1&&void 0!==O[1]?O[1]:1,n={disciplinaCod:null,letra:null,cursoCod:null,vagas1:null,vagas2:null,horarioESala:null},a=0,e[0])1===a?n.disciplinaCod=i:2===a?n.letra=i:3===a?n.cursoCod=i:5===a?n.vagas1=i:6===a?n.vagas2=i:7===a&&(n.horarioESala=i),a++;s={},u=!0,l=!1,c=void 0,r.prev=8,f=o()(e);case 10:if(u=(d=f.next()).done){r.next=32;break}if(p=d.value,b=Object(w["b"])(),b.periodo=t,b.letra=p[n.letra]||null,b.Disciplina=this.findDisciplinaId(p[n.disciplinaCod]),p[n.horarioESala]&&(v=p[n.horarioESala].split(";"),m=h(v,2),x=m[0],y=m[1],b.Horario1=this.findHorarioId(x),b.Horario2=this.findHorarioId(y),b.turno1=this.findTurno(b.Horario1,b.Horario2),"EAD"!==b.turno1&&(b.Sala1=this.findSalaId(x),b.Sala2=this.findSalaId(y))),b.Disciplina&&b.letra&&b.turno1){r.next=19;break}return r.abrupt("continue",29);case 19:if(!this.isTheSameTurma(s,b)){r.next=23;break}return r.next=22,this.createPedido(p,n,s.id);case 22:return r.abrupt("continue",29);case 23:return r.next=25,this.createTurma(b);case 25:return k=r.sent,s=Object(g["a"])({},k),r.next=29,this.createPedido(p,n,k.id);case 29:u=!0,r.next=10;break;case 32:r.next=38;break;case 34:r.prev=34,r.t0=r["catch"](8),l=!0,c=r.t0;case 38:r.prev=38,r.prev=39,u||null==f.return||f.return();case 41:if(r.prev=41,!l){r.next=44;break}throw c;case 44:return r.finish(41);case 45:return r.finish(38);case 46:case"end":return r.stop()}},r,this,[[8,34,38,46],[39,,41,45]])}));function e(e){return r.apply(this,arguments)}return e}(),createPedido:function(){var r=Object(m["a"])(regeneratorRuntime.mark(function r(e,t,n){var a;return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:if(a={Turma:null,Curso:null,vagasNaoPeriodizadas:0,vagasPeriodizadas:0,vagasOferecidas:0,vagasOcupadas:0},a.Turma=n,a.Curso=this.findCursoId(e[t.cursoCod]),a.vagasOferecidas=e[t.vagas1],a.vagasOcupadas=e[t.vagas2],!a.Curso){r.next=10;break}return r.next=8,this.editPedido(a);case 8:r.next=11;break;case 10:console.log("Curso não econtrado: "+e[t.cursoCod]);case 11:case"end":return r.stop()}},r,this)}));function e(e,t,n){return r.apply(this,arguments)}return e}(),findTurno:function(r,e){return r||e?31==r?"EAD":this.$_.some(this.HorariosNoturno,["id",r])||this.$_.some(this.HorariosNoturno,["id",e])?"Noturno":"Diurno":null},findCursoId:function(r){var e=this.$_.find(this.AllCursos,["codigo",r]);return e?e.id:null},findDisciplinaId:function(r){var e=this.$_.find(this.AllDisciplinas,["codigo",r]);return e?e.id:null},findHorarioId:function(r){if(!r)return null;var e=r.split(","),t=h(e,3),n=t[0],a=t[1],i=t[2],o=this.parseDiaEHora(n,a);if(o){var s=this.$_.find(this.AllHorarios,["horario",o]);return s?s.id:null}return Object(w["c"])(i).includes(Object(w["c"])("HORÁRIO EAD"))?(console.log("EAD sala",i),31):null},parseDiaEHora:function(r,e){if(!r||!e)return null;var t=null,n=null;switch(r.trim().substring(0,3).toLowerCase()){case"seg":t="2a";break;case"ter":t="3a";break;case"qua":t="4a";break;case"qui":t="5a";break;case"sex":t="6a";break;case"sab":return"EAD"}var a=this.$_.find(this.ListaDeTodosHorarios,function(r){return r.nome.includes(e.substring(0,2)+"-")})||{};return n=a.nome,t&&n?t+" "+n:null},findSalaId:function(r){if(!r)return null;var e=r.split(","),t=h(e,3),n=t[2],a=Object(w["c"])(n),i=this.$_.find(this.AllSalas,function(r){var e=Object(w["c"])(r.nome);return a.includes(e)});return i?i.id:null},isTheSameTurma:function(r,e){return r.letra===e.letra&&r.Disciplina===e.Disciplina&&r.turno1===e.turno1&&r.Horario1===e.Horario1&&r.Horario2===e.Horario2}}),computed:Object(g["a"])({},Object(k["c"])(["AllHorarios","HorariosNoturno","AllDisciplinas","AllCursos","ListaDeTodosHorarios","AllTurmas","AllSalas"]))},H=O,S=t("2877"),I=Object(S["a"])(H,n,a,!1,null,null,null);e["default"]=I.exports}}]);
//# sourceMappingURL=chunk-5328f8bf.5d06fdf4.js.map