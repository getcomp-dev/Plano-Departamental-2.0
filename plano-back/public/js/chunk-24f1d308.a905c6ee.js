(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24f1d308","chunk-18f2ec4b"],{"0441":function(e,t,a){},"1eb9":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("BaseModal",{ref:"baseModalPlano",staticClass:"modal-plano",attrs:{title:"Turmas do plano",type:"editTurma",hasBackground:!0,hasFooter:!0,btnOkText:"Criar plano"},scopedSlots:e._u([{key:"modal-body",fn:function(){return[a("NavTab",{attrs:{currentTab:e.currentTab,allTabs:["Copiar","Importar"]},on:{"change-tab":function(t){e.currentTab=t}}}),a("CopyPlano",{directives:[{name:"show",rawName:"v-show",value:"Copiar"===e.currentTab,expression:"currentTab === 'Copiar'"}],ref:"copyPlano",attrs:{plano:e.plano}}),a("ImportPlano",{directives:[{name:"show",rawName:"v-show",value:"Importar"===e.currentTab,expression:"currentTab === 'Importar'"}],ref:"importPlano",attrs:{plano:e.plano}})]},proxy:!0},{key:"modal-footer",fn:function(){return["Copiar"===e.currentTab?[a("div",[a("BaseButton",{attrs:{text:"Selecionar Todos",color:"lightblue"},on:{click:function(t){return e.$refs.copyPlano.selectAllDisciplinas()}}}),a("BaseButton",{attrs:{text:"Desmarcar Todos",color:"gray"},on:{click:function(t){return e.$refs.copyPlano.selectNoneDisciplinas()}}})],1),a("BaseButton",{staticClass:"px-3",attrs:{text:"OK",color:"green"},on:{click:e.handleCreatePlano}})]:[a("BaseButton",{staticClass:"px-3 ml-auto",attrs:{text:"OK",color:"green"},on:{click:e.handleCreatePlano}})]]},proxy:!0}])})},n=[],r=(a("96cf"),a("1da1")),i=a("25df"),l=a("4775"),s=a("9ae6"),c={name:"ModalNovoPlano",components:{CopyPlano:l["default"],ImportPlano:s["default"],NavTab:i["f"]},props:{plano:{type:Object,required:!0}},data:function(){return{currentTab:"Copiar"}},methods:{open:function(){this.$refs.baseModalPlano.open()},close:function(){this.$refs.baseModalPlano.close()},handleCreatePlano:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("Importar"!==this.currentTab){e.next=5;break}return e.next=3,this.$refs.importPlano.handleImportPlano();case 3:e.next=8;break;case 5:if("Copiar"!==this.currentTab){e.next=8;break}return e.next=8,this.$refs.copyPlano.handleCopyPlano();case 8:this.close();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},d=c,u=(a("4c05"),a("2877")),p=Object(u["a"])(d,o,n,!1,null,null,null);t["default"]=p.exports},"31eb":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-component"},[a("PageHeader",{attrs:{title:"Planos"}},[a("BaseButton",{attrs:{template:"ajuda"},on:{click:function(t){return e.$refs.modalAjuda.toggle()}}})],1),a("div",{staticClass:"page-content"},[a("div",{staticClass:"div-table"},[a("BaseTable",{attrs:{styles:"height:max-content"},scopedSlots:e._u([{key:"thead",fn:function(){return[a("v-th-ordination",{attrs:{currentOrder:e.ordenacaoMainPlanos,orderToCheck:"ano",width:"70",align:"start"}},[e._v("\n            Ano\n          ")]),a("v-th-ordination",{attrs:{currentOrder:e.ordenacaoMainPlanos,orderToCheck:"nome",width:"150",align:"start"}},[e._v("\n            Nome\n          ")]),a("v-th",{attrs:{width:"300",align:"start"}},[e._v("Observação")]),a("v-th-ordination",{attrs:{currentOrder:e.ordenacaoMainPlanos,orderToCheck:"isEditable",orderType:"desc",width:"70"}},[e._v("\n            Editável\n          ")]),a("v-th-ordination",{attrs:{currentOrder:e.ordenacaoMainPlanos,orderToCheck:"visible",orderType:"desc",width:"70"}},[e._v("\n            Visível\n          ")])]},proxy:!0},{key:"tbody",fn:function(){return[e._l(e.PlanosOrdered,(function(t){return a("tr",{key:t.id,class:{"bg-selected":t.id===e.planoSelectedId},on:{click:function(a){return e.handleClickInPlano(t)}}},[a("v-td",{attrs:{width:"70",align:"start"}},[e._v(e._s(t.ano))]),a("v-td",{attrs:{width:"150",align:"start"}},[e._v(e._s(t.nome))]),a("v-td",{attrs:{width:"300",align:"start",title:t.obs}},[e._v(e._s(t.obs))]),a("v-td",{attrs:{width:"70"}},[e._v(e._s(e.generateBooleanText(t.isEditable)))]),a("v-td",{attrs:{width:"70"}},[e._v(e._s(e.generateBooleanText(t.visible)))])],1)})),e.PlanosOrdered.length?e._e():a("tr",[a("v-td",{attrs:{width:"680",colspan:"5"}},[a("b",[e._v("Nenhum plano encontrado")])])],1)]},proxy:!0}])})],1),a("Card",{attrs:{title:"Plano",toggleFooter:e.isEditing,isPlano:e.isEditing},on:{"btn-salvar":e.handleEditPlano,"btn-delete":e.openModalDelete,"btn-add":e.openModalNovoPlano,"btn-clean":e.cleanPlano,"btn-copy":function(t){return e.copyPlanoSelected(e.planoForm)}},scopedSlots:e._u([{key:"form-group",fn:function(){return[a("div",{staticClass:"row w-100 m-0 mb-2"},[a("div",{staticClass:"form-group col-9 m-0 p-0 pr-3"},[a("label",{attrs:{required:"",for:"planoNome"}},[e._v("Nome")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.planoForm.nome,expression:"planoForm.nome"}],staticClass:"form-control w-100",attrs:{type:"text",id:"planoNome"},domProps:{value:e.planoForm.nome},on:{keypress:e.limitStringLength,input:function(t){t.target.composing||e.$set(e.planoForm,"nome",t.target.value)}}})]),a("div",{staticClass:"form-group col-3 m-0 p-0"},[a("label",{attrs:{required:"",for:"ano"}},[e._v("Ano")]),a("select",{directives:[{name:"model",rawName:"v-model.number",value:e.planoForm.ano,expression:"planoForm.ano",modifiers:{number:!0}}],staticClass:"form-control w-100",attrs:{id:"planoAno"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var a="_value"in t?t._value:t.value;return e._n(a)}));e.$set(e.planoForm,"ano",t.target.multiple?a:a[0])}}},e._l(e.AnosDoPlano,(function(t){return a("option",{key:"ano"+t,domProps:{value:t}},[e._v("\n                "+e._s(t)+"\n              ")])})),0)])]),a("div",{staticClass:"row mb-2 mx-0"},[a("div",{staticClass:"form-group col m-0 px-0"},[a("label",{attrs:{for:"planoObs"}},[e._v("Observações")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.planoForm.obs,expression:"planoForm.obs"}],staticClass:"form-control",attrs:{id:"planoObs",cols:"38",rows:"5"},domProps:{value:e.planoForm.obs},on:{input:function(t){t.target.composing||e.$set(e.planoForm,"obs",t.target.value)}}})])]),a("div",{staticClass:"row mb-2 mx-0"},[a("div",{staticClass:"form-group col-6 m-0 p-0 pr-2"},[a("label",{attrs:{required:"",for:"planoEditavel"}},[e._v("Editável")]),a("select",{directives:[{name:"model",rawName:"v-model.number",value:e.planoForm.isEditable,expression:"planoForm.isEditable",modifiers:{number:!0}}],staticClass:"form-control",attrs:{id:"planoEditavel"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var a="_value"in t?t._value:t.value;return e._n(a)}));e.$set(e.planoForm,"isEditable",t.target.multiple?a:a[0])}}},[a("option",{domProps:{value:!0}},[e._v("Sim")]),a("option",{domProps:{value:!1}},[e._v("Não")])])]),a("div",{staticClass:"form-group col-6 m-0 p-0 pl-2"},[a("label",{attrs:{required:"",for:"planoVisivel"}},[e._v("Visível")]),a("select",{directives:[{name:"model",rawName:"v-model.number",value:e.planoForm.visible,expression:"planoForm.visible",modifiers:{number:!0}}],staticClass:"form-control",attrs:{id:"planoVisivel"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var a="_value"in t?t._value:t.value;return e._n(a)}));e.$set(e.planoForm,"visible",t.target.multiple?a:a[0])}}},[a("option",{domProps:{value:!0}},[e._v("Sim")]),a("option",{domProps:{value:!1}},[e._v("Não")])])])])]},proxy:!0}])})],1),a("ModalNovoPlano",{ref:"modalNovoPlano",attrs:{plano:e.planoForm}}),a("ModalDelete",{ref:"modalDelete",attrs:{isDeleting:e.isEditing},on:{"btn-deletar":e.handleDeletePlano}},[a("li",{staticClass:"list-group-item"},[e.isEditing?a("span",[e._v("\n        Tem certeza que deseja excluír o plano\n        "),a("b",[e._v(e._s(e.planoForm.ano+" - "+e.planoForm.nome))]),e._v("\n        ?\n      ")]):a("span",{staticClass:"list-group-item"},[e._v("Nenhum plano selecionado.")])])]),a("ModalAjuda",{ref:"modalAjuda"},[a("li",{staticClass:"list-group-item"},[a("b",[e._v("Adicionar:")]),e._v("\n      Preencha o cartão em branco à direita e em seguida, clique em Adicionar\n      "),a("font-awesome-icon",{staticClass:"icon-green",attrs:{icon:["fas","plus"]}}),e._v("\n      .\n    ")],1),a("li",{staticClass:"list-group-item"},[a("b",[e._v("Editar:")]),e._v("\n      Clique na linha da tabela do plano que deseja alterar. Em seguida, no cartão à\n      direita, altere as informações que desejar e clique em Salvar\n      "),a("font-awesome-icon",{staticClass:"icon-green",attrs:{icon:["fas","check"]}}),e._v("\n      .\n    ")],1),a("li",{staticClass:"list-group-item"},[a("b",[e._v("Deletar:")]),e._v("\n      Clique na linha da tabela do plano que deseja remover. Em seguida, no cartão à\n      direita, clique em Remover\n      "),a("font-awesome-icon",{staticClass:"icon-red",attrs:{icon:["fas","trash-alt"]}}),e._v("\n      e confirme a remoção na janela que será aberta.\n    ")],1),a("li",{staticClass:"list-group-item"},[a("b",[e._v("Copiar:")]),e._v("\n      Clique na linha da tabela do plano que deseja copiar. Em seguida, no cartão à\n      direita, clique em Copiar\n      "),a("font-awesome-icon",{staticClass:"icon-lightblue",attrs:{icon:["fas","copy"]}}),e._v("\n      .\n    ")],1),a("li",{staticClass:"list-group-item"},[a("b",[e._v("Limpar:")]),e._v("\n      No cartão à direita, clique em Cancelar\n      "),a("font-awesome-icon",{staticClass:"icon-gray",attrs:{icon:["fas","times"]}}),e._v("\n      , para limpar as informações.\n    ")],1),a("li",{staticClass:"list-group-item"},[a("b",[e._v("Ordenar:")]),e._v("\n      Clique no cabeçalho da tabela, na coluna desejada, para alterar a ordenação das\n      informações.\n    ")])])],1)},n=[],r=(a("1c01"),a("58b2"),a("8e6e"),a("f3e2"),a("d25f"),a("ac6a"),a("456d"),a("a481"),a("96cf"),a("1da1")),i=a("ade3"),l=a("2f62"),s=a("9165"),c=a("d027"),d=a("25df"),u=a("2b0e"),p={copyPlano:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u["default"].axios.post("/copyPlano/".concat(e,"&&").concat(t),a).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))}},m=a("ebd8"),v=a("1eb9");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={ano:2019,nome:"",obs:"",isEditable:!0,visible:!0},g={name:"Planos",mixins:[s["e"]],components:{ModalAjuda:c["a"],ModalDelete:c["b"],Card:d["b"],ModalNovoPlano:v["default"]},data:function(){return{planoForm:this.$_.clone(h),planoSelectedId:null,ordenacaoMainPlanos:{order:"ano",type:"asc"}}},methods:b(b({},Object(l["b"])(["deletePlano","editPlano"])),{},{limitStringLength:function(e){e.target.value.length>=12&&e.preventDefault()},handleClickInPlano:function(e){this.cleanPlano(),this.planoSelectedId=e.id,this.planoForm=this.$_.clone(e)},cleanPlano:function(){this.planoSelectedId=null,this.planoForm=this.$_.clone(h)},openModalDelete:function(){this.$refs.modalDelete.open()},openModalNovoPlano:function(){""===this.planoForm.ano||null===this.planoForm.ano||""===this.planoForm.nome||null===this.planoForm.nome?this.pushNotification({type:"error",text:"Campos obrigatórios inválidos ou incompletos."}):this.$refs.modalNovoPlano.open()},handleEditPlano:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.setPartialLoading(!0),e.next=4,this.editPlano(this.planoForm);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.pushNotification({type:"error",title:"Erro ao atualizar plano",text:e.t0.message||""});case 9:return e.prev=9,this.setPartialLoading(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[0,6,9,12]])})));function t(){return e.apply(this,arguments)}return t}(),handleDeletePlano:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.setPartialLoading(!0),e.next=4,this.deletePlano(this.planoForm);case 4:this.cleanPlano(),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.pushNotification({type:"error",title:"Erro ao deletar plano",text:"Tente novamente"});case 10:return e.prev=10,this.setPartialLoading(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[0,7,10,13]])})));function t(){return e.apply(this,arguments)}return t}(),copyPlanoSelected:function(e){var t=this,a={nome:"Cópia de '".concat(e.nome,"'"),ano:e.ano,obs:"Cópia do plano '".concat(e.nome," - ").concat(e.ano,"'")};m["a"].create(a).then((function(a){p.copyPlano(e.id,a.Plano.id).then((function(a){t.$notify({group:"general",title:"Sucesso!",text:"O Plano ".concat(e.nome," foi copiado!"),type:"success"})})).catch((function(e){t.error="<b>Erro ao copiar plano</b>",e.response.data.fullMessage&&(t.error+="<br/>"+e.response.data.fullMessage.replace("\n","<br/>")),t.$notify({group:"general",title:"Erro!",text:t.error,type:"error"})}))}))}}),computed:b(b({},Object(l["c"])(["AllPlanos","AnosDoPlano"])),{},{PlanosOrdered:function(){var e=this.ordenacaoMainPlanos,t=e.order,a=e.type;return this.$_.orderBy(this.AllPlanos,t,a)},isEditing:function(){return null!=this.planoSelectedId}})},P=g,_=(a("f36a"),a("2877")),y=Object(_["a"])(P,o,n,!1,null,"9dd5e2b6",null);t["default"]=y.exports},"4c05":function(e,t,a){"use strict";var o=a("0441"),n=a.n(o);n.a},decb:function(e,t,a){},f36a:function(e,t,a){"use strict";var o=a("decb"),n=a.n(o);n.a}}]);
//# sourceMappingURL=chunk-24f1d308.a905c6ee.js.map