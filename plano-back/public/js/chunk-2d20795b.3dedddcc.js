(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20795b"],{a0c9:function(e,a,t){"use strict";t.r(a);var o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"main-component row"},[t("portal",{attrs:{to:"page-header"}},[t("BaseButton",{attrs:{template:"filtros"},on:{click:function(a){return e.toggleAsideModal("filtros")}}}),t("BaseButton",{attrs:{template:"ajuda"},on:{click:function(a){return e.toggleAsideModal("ajuda")}}})],1),t("div",{staticClass:"div-table"},[t("BaseTable",{scopedSlots:e._u([{key:"thead",fn:function(){return[t("v-th",{attrs:{width:"110"}},[e._v("Tabela Modificada")]),t("v-th",{attrs:{width:"120"}},[e._v("Campo Modificado")]),t("v-th",{attrs:{width:"200"}},[e._v("Linha Modificada")]),t("v-th",{attrs:{width:"120"}},[e._v("Valor Anterior")]),t("v-th",{attrs:{width:"120"}},[e._v("Novo Valor")]),t("v-th",{attrs:{width:"65"}},[e._v("Operação")]),t("v-th",{attrs:{width:"80",title:"Usuário que realizou a operação"}},[e._v("Usuário")]),t("v-th",{attrs:{width:"160"}},[e._v("Data")])]},proxy:!0},{key:"tbody",fn:function(){return[e._l(e.HistoryOrdered,(function(a){return t("tr",{key:a.id},[t("v-td",{attrs:{width:"110"}},[e._v(e._s(a.tabelaModificada))]),t("v-td",{attrs:{width:"120",paddingX:"0"}},[e._v("\n            "+e._s(a.campoModificado)+"\n          ")]),t("v-td",{attrs:{width:"200",paddingX:"0"}},[e._v("\n            "+e._s(e.getLinhaModificada(a))+"\n          ")]),t("v-td",{attrs:{width:"120",paddingX:"0"}},[e._v("\n            "+e._s(e.getValorAnterior(a))+"\n          ")]),t("v-td",{attrs:{width:"120",paddingX:"0"}},[e._v("\n            "+e._s(e.getValorNovo(a))+"\n          ")]),t("v-td",{attrs:{width:"65",paddingX:"0"}},[e._v("\n            "+e._s(a.tipoOperacao)+"\n          ")]),t("v-td",{attrs:{width:"80",paddingX:"0"}},[e._v("\n            "+e._s(a.usuario)+"\n          ")]),t("v-td",{attrs:{width:"160",paddingX:"0"}},[e._v("\n            "+e._s(e.parseDateUTC(a.createdAt))+"\n          ")])],1)})),e.HistoryOrdered.length?e._e():t("tr",[t("v-td",{attrs:{width:"975",colspan:"8"}},[t("b",[e._v("Nenhuma operação encontrada.")]),e._v("\n            Clique no botão de filtros\n            "),t("font-awesome-icon",{staticClass:"icon-gray",attrs:{icon:["fas","list-ul"]}}),e._v("\n            para selecioná-las.\n          ")],1)],1)]},proxy:!0}])})],1),t("ModalFiltros",{ref:"modalFiltros",attrs:{callbacks:e.modalFiltrosCallbacks,tabsOptions:e.modalFiltrosTabs}},[t("BaseTable",{directives:[{name:"show",rawName:"v-show",value:"Tabelas"===e.modalFiltrosTabs.current,expression:"modalFiltrosTabs.current === 'Tabelas'"}],attrs:{type:"modal"},scopedSlots:e._u([{key:"thead",fn:function(){return[t("v-th",{attrs:{width:"25"}}),t("v-th",{attrs:{width:"425",align:"start"}},[e._v("Nome")])]},proxy:!0},{key:"tbody",fn:function(){return e._l(e.TabelasOptions,(function(a){return t("tr",{directives:[{name:"prevent-click-selection",rawName:"v-prevent-click-selection"}],key:a.id+a.nome,on:{click:function(t){return e.toggleItemInArray(a,e.filtroTabelas.selecionados)}}},[t("v-td",{attrs:{width:"25",type:"content"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtroTabelas.selecionados,expression:"filtroTabelas.selecionados"}],attrs:{type:"checkbox"},domProps:{value:a,checked:Array.isArray(e.filtroTabelas.selecionados)?e._i(e.filtroTabelas.selecionados,a)>-1:e.filtroTabelas.selecionados},on:{change:function(t){var o=e.filtroTabelas.selecionados,r=t.target,i=!!r.checked;if(Array.isArray(o)){var s=a,n=e._i(o,s);r.checked?n<0&&e.$set(e.filtroTabelas,"selecionados",o.concat([s])):n>-1&&e.$set(e.filtroTabelas,"selecionados",o.slice(0,n).concat(o.slice(n+1)))}else e.$set(e.filtroTabelas,"selecionados",i)}}})]),t("v-td",{attrs:{width:"425",align:"start"}},[e._v(e._s(a.nome))])],1)}))},proxy:!0}])}),t("BaseTable",{directives:[{name:"show",rawName:"v-show",value:"Operações"===e.modalFiltrosTabs.current,expression:"modalFiltrosTabs.current === 'Operações'"}],attrs:{type:"modal"},scopedSlots:e._u([{key:"thead",fn:function(){return[t("v-th",{attrs:{width:"25"}}),t("v-th",{attrs:{width:"425",align:"start"}},[e._v("Tipo")])]},proxy:!0},{key:"tbody",fn:function(){return e._l(e.OperacoesOptions,(function(a){return t("tr",{directives:[{name:"prevent-click-selection",rawName:"v-prevent-click-selection"}],key:a.id+a.nome,on:{click:function(t){return e.toggleItemInArray(a,e.filtroOperacoes.selecionados)}}},[t("v-td",{attrs:{width:"25",type:"content"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtroOperacoes.selecionados,expression:"filtroOperacoes.selecionados"}],attrs:{type:"checkbox"},domProps:{value:a,checked:Array.isArray(e.filtroOperacoes.selecionados)?e._i(e.filtroOperacoes.selecionados,a)>-1:e.filtroOperacoes.selecionados},on:{change:function(t){var o=e.filtroOperacoes.selecionados,r=t.target,i=!!r.checked;if(Array.isArray(o)){var s=a,n=e._i(o,s);r.checked?n<0&&e.$set(e.filtroOperacoes,"selecionados",o.concat([s])):n>-1&&e.$set(e.filtroOperacoes,"selecionados",o.slice(0,n).concat(o.slice(n+1)))}else e.$set(e.filtroOperacoes,"selecionados",i)}}})]),t("v-td",{attrs:{width:"425",align:"start"}},[e._v(e._s(a.nome))])],1)}))},proxy:!0}])})],1),t("ModalAjuda",{ref:"modalAjuda"},[t("li",{staticClass:"list-group-item"},[t("b",[e._v("Visualizar conteúdo:")]),e._v("\n      Clique no ícone de filtros\n      "),t("font-awesome-icon",{staticClass:"icon-gray",attrs:{icon:["fas","list-ul"]}}),e._v("\n      no cabeçalho da página e, na janela que se abrirá, utilize as abas para navegar entre os\n      tipos de filtro disponíveis. Marque quais informações deseja visualizar, e para finalizar\n      clique no botão OK.\n    ")],1)])],1)},r=[],i=(t("1c01"),t("58b2"),t("8e6e"),t("f3e2"),t("ac6a"),t("456d"),t("d25f"),t("28a5"),t("ade3")),s=t("2909"),n=t("2f62"),c=t("0a94"),d=t("d4b9"),l=t("9429"),v=t("9165"),p=t("eaf8"),u=t("d027");function b(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);a&&(o=o.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,o)}return t}function f(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?b(Object(t),!0).forEach((function(a){Object(i["a"])(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var h={name:"DashboardHistory",components:{ModalFiltros:u["f"],ModalAjuda:u["a"]},mixins:[v["l"],v["k"],v["i"]],data:function(){var e=this;return{asideModalsRefs:["modalFiltros","modalAjuda"],filtroOperacoes:{ativados:[],selecionados:[]},filtroTabelas:{ativados:[],selecionados:[]},modalFiltrosTabs:{current:"Tabelas",array:["Tabelas","Operações"]},modalFiltrosCallbacks:{selectNone:{Tabelas:function(){e.filtroTabelas.selecionados=[]},Operacoes:function(){e.filtroOperacoes.selecionados=[]}},selectAll:{Tabelas:function(){e.filtroTabelas.selecionados=Object(s["a"])(e.TabelasOptions)},Operacoes:function(){e.filtroOperacoes.selecionados=Object(s["a"])(e.OperacoesOptions)}},btnOk:function(){e.filtroTabelas.ativados=Object(s["a"])(e.filtroTabelas.selecionados),e.filtroOperacoes.ativados=Object(s["a"])(e.filtroOperacoes.selecionados)}}}},beforeMount:function(){this.fetchAllHistory(),this.modalFiltrosCallbacks.selectAll.Operacoes()},beforeDestroy:function(){this.clearHistoryState()},methods:f(f({},Object(n["b"])(["fetchAllHistory","clearHistoryState"])),{},{parseDateUTC:p["h"],getLinhaModificada:function(e){var a=e.linhaModificada,t=void 0;switch(e.tabelaModificada){case"CargaPos":if("Delete"===e.tipoOperacao){t=a.split("/");var o=Object(c["a"])(this.$store.state.docente.Docentes,{id:parseInt(t[2])});a=void 0===o?"".concat(t[0],"/").concat(t[1],"/").concat(t[2]):"".concat(t[0],"/").concat(t[1],"/").concat(o.apelido)}break;case"DisciplinaGrade":t=a.split("/");var r=Object(c["a"])(this.$store.state.disciplina.Disciplinas,{id:parseInt(t[1])}),i=Object(c["a"])(this.$store.state.grade.Grades,{id:parseInt(t[2])}),s=void 0===i?void 0:Object(c["a"])(this.$store.state.curso.Cursos,{id:i.Curso});a="".concat(void 0===i?t[2]:(void 0===s?"Curso Excluído":s.codigo)+" - "+i.nome,"/").concat(void 0===r?t[1]:r.codigo,"/").concat(t[0]);break;case"DocentePerfil":t=a.split("/");var n=Object(c["a"])(this.$store.state.docente.Docentes,{id:parseInt(t[1])}),d=Object(c["a"])(this.$store.state.perfil.Perfis,{id:parseInt(t[0])});a="".concat(void 0===n?t[1]:n.nome,"/").concat(void 0===d?t[0]:d.nome);break;case"Grade":t=a.split("/");var l=Object(c["a"])(this.$store.state.curso.Cursos,{id:parseInt(t[0])});a="".concat(void 0===l?t[0]:l.codigo," - ").concat(t[1]);break;case"Pedido":t=a.split("/");var v=Object(c["a"])(this.$store.state.turma.Turmas,{id:parseInt(t[0])}),p=void 0===v?void 0:Object(c["a"])(this.$store.state.disciplina.Disciplinas,{id:v.Disciplina}),u=Object(c["a"])(this.$store.state.curso.Cursos,{id:parseInt(t[1])});a="".concat(void 0===v?t[0]:null===v.Disciplina?"Turma Excluída":p.codigo+" "+v.letra,"/").concat(void 0===u?t[1]:u.codigo);break;case"PedidoExterno":t=a.split("/");var b=Object(c["a"])(this.$store.state.turmaExterna.Turmas,{id:parseInt(t[0])}),f=void 0===b?void 0:Object(c["a"])(this.$store.state.disciplina.Disciplinas,{id:b.Disciplina}),h=Object(c["a"])(this.$store.state.curso.Cursos,{id:parseInt(t[1])});a="".concat(void 0===b?t[0]:f.codigo+" "+b.letra,"/").concat(void 0===h?t[1]:h.codigo);break;case"Turma":t=a.split("/");var O=Object(c["a"])(this.$store.state.disciplina.Disciplinas,{id:parseInt(t[1])});a="".concat(void 0===O?t[1]:O.codigo,"/").concat(t[0]);break;case"TurmaExterna":t=a.split("/");var m=Object(c["a"])(this.$store.state.disciplina.Disciplinas,{id:parseInt(t[1])});a="".concat(void 0===m?t[1]:m.codigo,"/").concat(t[0]);break}return a},getValorAnterior:function(e){var a=e.valorAnterior;switch(e.campoModificado){case"Curso":a=Object(c["a"])(this.$store.state.curso.Cursos,{id:parseInt(e.valorAnterior)}),a=void 0===a?e.valorAnterior:a.codigo;break;case"Disciplina":a=Object(c["a"])(this.$store.state.disciplina.Disciplinas,{id:parseInt(e.valorAnterior)}),a=void 0===a?e.valorAnterior:a.codigo;break;case"Docente":case"Docente1":case"Docente2":a=Object(c["a"])(this.$store.state.docente.Docentes,{id:parseInt(e.valorAnterior)}),a=void 0===a?e.valorAnterior:a.apelido;break;case"Grade":if(a=Object(c["a"])(this.$store.state.grade.Grades,{id:parseInt(e.valorAnterior)}),void 0===a)a=e.valorAnterior;else{var t=Object(c["a"])(this.$store.state.curso.Cursos,{id:parseInt(a.Curso)});a="".concat(void 0===t?a.Curso:t.codigo,"/").concat(a.nome)}break;case"Horario":case"Horario1":case"Horario2":a=Object(c["a"])(this.$store.state.horario.Horarios,{id:parseInt(e.valorAnterior)}),a=void 0===a?e.valorAnterior:a.horario;break;case"Perfil":a=Object(c["a"])(this.$store.state.perfil.Perfis,{id:parseInt(e.valorAnterior)}),a=void 0===a?e.valorAnterior:a.nome;break;case"Sala":case"Sala1":case"Sala2":a=Object(c["a"])(this.$store.state.sala.Salas,{id:parseInt(e.valorAnterior)}),a=void 0===a?e.valorAnterior:a.nome;break}return a},getValorNovo:function(e){var a=e.valorNovo;switch(e.campoModificado){case"Curso":a=Object(c["a"])(this.$store.state.curso.Cursos,{id:parseInt(e.valorNovo)}),a=void 0===a?e.valorNovo:a.codigo;break;case"Disciplina":a=Object(c["a"])(this.$store.state.disciplina.Disciplinas,{id:parseInt(e.valorNovo)}),a=void 0===a?e.valorNovo:a.codigo;break;case"Docente":case"Docente1":case"Docente2":a=Object(c["a"])(this.$store.state.docente.Docentes,{id:parseInt(e.valorNovo)}),a=void 0===a?e.valorNovo:a.apelido;break;case"Grade":if(a=Object(c["a"])(this.$store.state.grade.Grades,{id:parseInt(e.valorNovo)}),void 0===a)a=e.valorNovo;else{var t=Object(c["a"])(this.$store.state.curso.Cursos,{id:parseInt(a.Curso)});a="".concat(void 0===t?a.Curso:t.codigo,"/").concat(a.nome)}break;case"Horario":case"Horario1":case"Horario2":a=Object(c["a"])(this.$store.state.horario.Horarios,{id:parseInt(e.valorNovo)}),a=void 0===a?e.valorNovo:a.horario;break;case"Perfil":a=Object(c["a"])(this.$store.state.perfil.Perfis,{id:parseInt(e.valorNovo)}),a=void 0===a?e.valorNovo:a.nome;break;case"Sala":case"Sala1":case"Sala2":a=Object(c["a"])(this.$store.state.sala.Salas,{id:parseInt(e.valorNovo)}),a=void 0===a?e.valorNovo:a.nome;break}return a}}),computed:f(f({},Object(n["c"])(["onLoading","History"])),{},{HistoryOrdered:function(){return Object(d["a"])(this.HistoryFiltered,"id","desc")},HistoryFiltered:function(){var e=this,a=function(a){return Object(l["a"])(e.filtroOperacoes.ativados,["id",a.tipoOperacao])},t=function(a){return Object(l["a"])(e.filtroTabelas.ativados,["id",a.tabelaModificada])};return this.History.filter(t).filter(a)},OperacoesOptions:function(){return[{nome:"Criação",id:"Create"},{nome:"Exclusão",id:"Delete"},{nome:"Edição",id:"Edit"}]},TabelasOptions:function(){return[{nome:"CARGA PÓS",id:"CargaPos"},{nome:"CURSO",id:"Curso"},{nome:"DISCIPLINA",id:"Disciplina"},{nome:"DISCIPLINA GRADE",id:"DisciplinaGrade"},{nome:"DOCENTE",id:"Docente"},{nome:"DOCENTE PERFIL",id:"DocentePerfil"},{nome:"GRADE",id:"Grade"},{nome:"PEDIDO",id:"Pedido"},{nome:"PEDIDO EXTERNO",id:"PedidoExterno"},{nome:"PERFIL",id:"Perfil"},{nome:"PLANO",id:"Plano"},{nome:"SALA",id:"Sala"},{nome:"TURMA",id:"Turma"},{nome:"TURMA EXTERNA",id:"TurmaExterna"}]}})},O=h,m=t("2877"),g=Object(m["a"])(O,o,r,!1,null,null,null);a["default"]=g.exports}}]);
//# sourceMappingURL=chunk-2d20795b.3dedddcc.js.map