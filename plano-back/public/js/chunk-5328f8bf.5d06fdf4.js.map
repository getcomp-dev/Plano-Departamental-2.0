{"version":3,"sources":["webpack:///./node_modules/core-js/library/fn/get-iterator.js","webpack:///./node_modules/core-js/modules/es6.string.trim.js","webpack:///./node_modules/@babel/runtime-corejs2/core-js/get-iterator.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator.js","webpack:///./node_modules/core-js/modules/es6.function.name.js","webpack:///./node_modules/core-js/library/fn/json/stringify.js","webpack:///./node_modules/@babel/runtime-corejs2/core-js/json/stringify.js","webpack:///./src/pages/gerenciar/Planos/ModalImportPlano.vue?a5cb","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/slicedToArray.js","webpack:///src/pages/gerenciar/Planos/ModalImportPlano.vue","webpack:///./src/pages/gerenciar/Planos/ModalImportPlano.vue?4c1a","webpack:///./src/pages/gerenciar/Planos/ModalImportPlano.vue"],"names":["__webpack_require__","module","exports","$trim","this","anObject","get","getIterator","it","iterFn","TypeError","call","dP","f","FProto","Function","prototype","nameRE","NAME","configurable","match","e","core","$JSON","JSON","stringify","apply","arguments","render","_vm","_h","$createElement","_c","_self","ref","attrs","title","position","hasBackground","hasFooter","scopedSlots","_u","key","fn","type","proxy","staticClass","color","text","on","click","handleImportPlano","staticRenderFns","_arrayWithHoles","arr","is_array_default","_iterableToArrayLimit","i","_arr","_n","_d","_e","undefined","_s","_i","get_iterator_default","next","done","push","value","length","err","_nonIterableRest","_slicedToArray","ModalImportPlanovue_type_script_lang_js_","name","methods","Object","objectSpread","vuex_esm","open","$refs","baseModal","toggle","close","_handleImportPlano","asyncToGenerator","regeneratorRuntime","mark","_callee2","inputFile","reader","_this","wrap","_context2","prev","AllTurmas","pushNotification","abrupt","setPartialLoading","inputFilePlano","files","FileReader","onload","_ref","_callee","event","workbook","firstWorksheet","dataString","dataStringNormalized","turmasDoPlano","_inputFile$name$split","_inputFile$name$split2","periodoStr","periodoDoPlano","_context","xlsx_default","a","read","target","result","Sheets","SheetNames","stringify_default","utils","sheet_to_json","normalize","replace","parse","split","parse_int_default","createPlanoImported","slice","$store","dispatch","stop","_x","readAsBinaryString","_createPlanoImported","_callee3","turmasImported","periodo","keys","currentTurma","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","turmaFile","newTurma","_turmaFile$keys$horar","_turmaFile$keys$horar2","str1","str2","turmaCreated","_args3","_context3","disciplinaCod","letra","cursoCod","vagas1","vagas2","horarioESala","Disciplina","findDisciplinaId","Horario1","findHorarioId","Horario2","turno1","findTurno","Sala1","findSalaId","Sala2","isTheSameTurma","createPedido","id","createTurma","sent","t0","return","finish","_x2","_createPedido","_callee4","turmaId","pedido","_context4","Turma","Curso","vagasNaoPeriodizadas","vagasPeriodizadas","vagasOferecidas","vagasOcupadas","findCursoId","editPedido","console","log","_x3","_x4","_x5","horario1Id","horario2Id","$_","some","HorariosNoturno","cursoCodigo","cursoFounded","find","AllCursos","disciplinaCodigo","disciplinaFounded","AllDisciplinas","horarioString","_horarioString$split","_horarioString$split2","dia","hora","sala","nomeHorario","parseDiaEHora","horarioFounded","AllHorarios","includes","diaNormalized","horaNormalized","trim","substring","toLowerCase","ListaDeTodosHorarios","horarioItem","nome","salaString","_salaString$split","_salaString$split2","salaNormalized","salaFounded","AllSalas","nomeNormalized","turma1","turma2","computed","Planos_ModalImportPlanovue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-5328f8bf.5d06fdf4.js","sourcesContent":["require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n","'use strict';\n// 21.1.3.25 String.prototype.trim()\nrequire('./_string-trim')('trim', function ($trim) {\n  return function trim() {\n    return $trim(this, 3);\n  };\n});\n","module.exports = require(\"core-js/library/fn/get-iterator\");","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n","var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n","module.exports = require(\"core-js/library/fn/json/stringify\");","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('BaseModal',{ref:\"baseModal\",attrs:{\"title\":\"Importar plano\",\"position\":\"center\",\"hasBackground\":true,\"hasFooter\":true},scopedSlots:_vm._u([{key:\"modal-body\",fn:function(){return [_c('input',{ref:\"inputFilePlano\",attrs:{\"type\":\"file\"}})]},proxy:true},{key:\"modal-footer\",fn:function(){return [_c('BaseButton',{staticClass:\"ml-auto\",attrs:{\"color\":\"lightblue\",\"text\":\"Importar\"},on:{\"click\":_vm.handleImportPlano}})]},proxy:true}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import _Array$isArray from \"../../core-js/array/is-array\";\nexport default function _arrayWithHoles(arr) {\n  if (_Array$isArray(arr)) return arr;\n}","import _getIterator from \"../../core-js/get-iterator\";\nexport default function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = _getIterator(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","<template>\r\n  <BaseModal ref=\"baseModal\" title=\"Importar plano\" position=\"center\" :hasBackground=\"true\" :hasFooter=\"true\">\r\n    <template #modal-body>\r\n      <input type=\"file\" ref=\"inputFilePlano\" />\r\n    </template>\r\n\r\n    <template #modal-footer>\r\n      <BaseButton color=\"lightblue\" text=\"Importar\" class=\"ml-auto\" @click=\"handleImportPlano\" />\r\n    </template>\r\n  </BaseModal>\r\n</template>\r\n\r\n<script>\r\nimport XLSX from \"xlsx\";\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nimport { generateEmptyTurma, normalizeText } from \"@/common/utils\";\r\n// import planoService from \"../../../common/services/plano\";\r\n\r\nexport default {\r\n  name: \"ModalImportPlano\",\r\n\r\n  methods: {\r\n    ...mapActions([\"createTurma\", \"editPedido\"]),\r\n\r\n    open() {\r\n      this.$refs.baseModal.open();\r\n    },\r\n    toggle() {\r\n      this.$refs.baseModal.toggle();\r\n    },\r\n    close() {\r\n      this.$refs.baseModal.close();\r\n    },\r\n\r\n    async handleImportPlano() {\r\n      if (this.AllTurmas.length) {\r\n        this.pushNotification({\r\n          type: \"error\",\r\n          text: `Plano atual deve estar vázio para fazer a importação!`,\r\n        });\r\n        this.$refs.baseModal.close();\r\n        return;\r\n      }\r\n\r\n      this.setPartialLoading(true);\r\n      const inputFile = this.$refs.inputFilePlano.files[0];\r\n      const reader = new FileReader();\r\n\r\n      reader.onload = async (event) => {\r\n        const workbook = XLSX.read(event.target.result, { type: \"binary\" });\r\n        const firstWorksheet = workbook.Sheets[workbook.SheetNames[0]];\r\n\r\n        const dataString = JSON.stringify(XLSX.utils.sheet_to_json(firstWorksheet));\r\n        const dataStringNormalized = dataString\r\n          .normalize(\"NFD\")\r\n          .replace(/[\\u0300-\\u036f]/g, \"\")\r\n          .replace(/\\s/g, \"\");\r\n\r\n        const turmasDoPlano = JSON.parse(dataStringNormalized);\r\n\r\n        const [, periodoStr] = inputFile.name.split(\".\");\r\n        const periodoDoPlano = parseInt(periodoStr) || null;\r\n\r\n        await this.createPlanoImported(\r\n          turmasDoPlano.slice(480, 500),\r\n          periodoDoPlano\r\n        );\r\n        await this.$store.dispatch(\"fetchAll\");\r\n\r\n        this.$refs.baseModal.close();\r\n        this.setPartialLoading(false);\r\n      };\r\n\r\n      reader.readAsBinaryString(inputFile);\r\n    },\r\n\r\n    async createPlanoImported(turmasImported, periodo = 1) {\r\n      // Create plano // const newPlano = this.createPlano();\r\n      const keys = {\r\n        disciplinaCod: null,\r\n        letra: null,\r\n        cursoCod: null,\r\n        vagas1: null,\r\n        vagas2: null,\r\n        horarioESala: null,\r\n      };\r\n      let i = 0;\r\n      for (const key in turmasImported[0]) {\r\n        if (i === 1) keys.disciplinaCod = key;\r\n        else if (i === 2) keys.letra = key;\r\n        else if (i === 3) keys.cursoCod = key;\r\n        else if (i === 5) keys.vagas1 = key;\r\n        else if (i === 6) keys.vagas2 = key;\r\n        else if (i === 7) keys.horarioESala = key;\r\n        i++;\r\n      }\r\n      let currentTurma = {};\r\n\r\n      for (const turmaFile of turmasImported) {\r\n        const newTurma = generateEmptyTurma();\r\n        //newTurma.Plano = newPlano.id;\r\n        newTurma.periodo = periodo;\r\n        newTurma.letra = turmaFile[keys.letra] || null;\r\n        newTurma.Disciplina = this.findDisciplinaId(turmaFile[keys.disciplinaCod]);\r\n\r\n        if (turmaFile[keys.horarioESala]) {\r\n          const [str1, str2] = turmaFile[keys.horarioESala].split(\";\");\r\n          //Horarios\r\n          newTurma.Horario1 = this.findHorarioId(str1);\r\n          newTurma.Horario2 = this.findHorarioId(str2);\r\n          newTurma.turno1 = this.findTurno(newTurma.Horario1, newTurma.Horario2);\r\n\r\n          //Salas\r\n          if (newTurma.turno1 !== \"EAD\") {\r\n            newTurma.Sala1 = this.findSalaId(str1);\r\n            newTurma.Sala2 = this.findSalaId(str2);\r\n          }\r\n        }\r\n\r\n        if (!newTurma.Disciplina || !newTurma.letra || !newTurma.turno1) {\r\n          //Se não achou a Disciplina, letra ou turno1 não cria a turma\r\n          continue;\r\n        }\r\n\r\n        if (this.isTheSameTurma(currentTurma, newTurma)) {\r\n          //Se é igual a turma anterior, então cria apenas a vaga\r\n          await this.createPedido(turmaFile, keys, currentTurma.id);\r\n          continue;\r\n        }\r\n\r\n        const turmaCreated = await this.createTurma(newTurma); //Cria a turma\r\n        currentTurma = { ...turmaCreated }; //Atualiza currentTurma\r\n        await this.createPedido(turmaFile, keys, turmaCreated.id); //Cria pedido\r\n      }\r\n    },\r\n    async createPedido(turmaFile, keys, turmaId) {\r\n      const pedido = {\r\n        Turma: null,\r\n        Curso: null,\r\n        vagasNaoPeriodizadas: 0,\r\n        vagasPeriodizadas: 0,\r\n        vagasOferecidas: 0,\r\n        vagasOcupadas: 0,\r\n      };\r\n      pedido.Turma = turmaId;\r\n      pedido.Curso = this.findCursoId(turmaFile[keys.cursoCod]);\r\n      pedido.vagasOferecidas = turmaFile[keys.vagas1];\r\n      pedido.vagasOcupadas = turmaFile[keys.vagas2];\r\n\r\n      if (pedido.Curso) {\r\n        await this.editPedido(pedido);\r\n      } else {\r\n        console.log(\"Curso não econtrado: \" + turmaFile[keys.cursoCod]);\r\n      }\r\n    },\r\n\r\n    findTurno(horario1Id, horario2Id) {\r\n      if (!horario1Id && !horario2Id) return null;\r\n      else if (horario1Id == 31) return \"EAD\";\r\n      else if (\r\n        this.$_.some(this.HorariosNoturno, [\"id\", horario1Id]) ||\r\n        this.$_.some(this.HorariosNoturno, [\"id\", horario2Id])\r\n      )\r\n        return \"Noturno\";\r\n      else return \"Diurno\";\r\n    },\r\n    findCursoId(cursoCodigo) {\r\n      const cursoFounded = this.$_.find(this.AllCursos, [\"codigo\", cursoCodigo]);\r\n      return cursoFounded ? cursoFounded.id : null;\r\n    },\r\n    findDisciplinaId(disciplinaCodigo) {\r\n      const disciplinaFounded = this.$_.find(this.AllDisciplinas, [\r\n        \"codigo\",\r\n        disciplinaCodigo,\r\n      ]);\r\n\r\n      return disciplinaFounded ? disciplinaFounded.id : null;\r\n    },\r\n    findHorarioId(horarioString) {\r\n      if (!horarioString) return null;\r\n\r\n      const [dia, hora, sala] = horarioString.split(\",\");\r\n      const nomeHorario = this.parseDiaEHora(dia, hora);\r\n\r\n      if (nomeHorario) {\r\n        const horarioFounded = this.$_.find(this.AllHorarios, [\r\n          \"horario\",\r\n          nomeHorario,\r\n        ]);\r\n\r\n        return horarioFounded ? horarioFounded.id : null;\r\n      }\r\n\r\n      if (normalizeText(sala).includes(normalizeText(\"HORÁRIO EAD\"))) {\r\n        console.log(\"EAD sala\", sala);\r\n        return 31; //Id EAD\r\n      }\r\n\r\n      return null;\r\n    },\r\n    parseDiaEHora(dia, hora) {\r\n      if (!dia || !hora) return null;\r\n\r\n      let diaNormalized = null;\r\n      let horaNormalized = null;\r\n      switch (dia.trim().substring(0, 3).toLowerCase()) {\r\n        case \"seg\":\r\n          diaNormalized = \"2a\";\r\n          break;\r\n        case \"ter\":\r\n          diaNormalized = \"3a\";\r\n          break;\r\n        case \"qua\":\r\n          diaNormalized = \"4a\";\r\n          break;\r\n        case \"qui\":\r\n          diaNormalized = \"5a\";\r\n          break;\r\n        case \"sex\":\r\n          diaNormalized = \"6a\";\r\n          break;\r\n        case \"sab\":\r\n          return \"EAD\";\r\n      }\r\n\r\n      const horarioFounded =\r\n        this.$_.find(this.ListaDeTodosHorarios, (horarioItem) =>\r\n          horarioItem.nome.includes(hora.substring(0, 2) + \"-\")\r\n        ) || {};\r\n\r\n      horaNormalized = horarioFounded.nome;\r\n\r\n      if (diaNormalized && horaNormalized) {\r\n        return diaNormalized + \" \" + horaNormalized;\r\n      } else {\r\n        return null;\r\n      }\r\n    },\r\n    findSalaId(salaString) {\r\n      if (!salaString) return null;\r\n\r\n      const [, , sala] = salaString.split(\",\");\r\n      const salaNormalized = normalizeText(sala);\r\n\r\n      const salaFounded = this.$_.find(this.AllSalas, (sala) => {\r\n        const nomeNormalized = normalizeText(sala.nome);\r\n        return salaNormalized.includes(nomeNormalized);\r\n      });\r\n\r\n      return salaFounded ? salaFounded.id : null;\r\n    },\r\n    isTheSameTurma(turma1, turma2) {\r\n      return (\r\n        turma1.letra === turma2.letra &&\r\n        turma1.Disciplina === turma2.Disciplina &&\r\n        turma1.turno1 === turma2.turno1 &&\r\n        turma1.Horario1 === turma2.Horario1 &&\r\n        turma1.Horario2 === turma2.Horario2\r\n      );\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\r\n      \"AllHorarios\",\r\n      \"HorariosNoturno\",\r\n      \"AllDisciplinas\",\r\n      \"AllCursos\",\r\n      \"ListaDeTodosHorarios\",\r\n      \"AllTurmas\",\r\n      \"AllSalas\",\r\n    ]),\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalImportPlano.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalImportPlano.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ModalImportPlano.vue?vue&type=template&id=184c87a4&\"\nimport script from \"./ModalImportPlano.vue?vue&type=script&lang=js&\"\nexport * from \"./ModalImportPlano.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}