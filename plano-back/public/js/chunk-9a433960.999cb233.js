(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9a433960","chunk-c39d30b2"],{"28a5":function(e,r,t){"use strict";var n=t("aae3"),o=t("cb7c"),a=t("ebd6"),i=t("0390"),s=t("9def"),c=t("5f1b"),u=t("520a"),l=t("79e5"),d=Math.min,f=[].push,p="split",b="length",h="lastIndex",m=4294967295,v=!l((function(){RegExp(m,"y")}));t("214f")("split",2,(function(e,r,t,l){var g;return g="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[b]||2!="ab"[p](/(?:ab)*/)[b]||4!="."[p](/(.?)(.?)/)[b]||"."[p](/()()/)[b]>1||""[p](/.?/)[b]?function(e,r){var o=String(this);if(void 0===e&&0===r)return[];if(!n(e))return t.call(o,e,r);var a,i,s,c=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,p=void 0===r?m:r>>>0,v=new RegExp(e.source,l+"g");while(a=u.call(v,o)){if(i=v[h],i>d&&(c.push(o.slice(d,a.index)),a[b]>1&&a.index<o[b]&&f.apply(c,a.slice(1)),s=a[0][b],d=i,c[b]>=p))break;v[h]===a.index&&v[h]++}return d===o[b]?!s&&v.test("")||c.push(""):c.push(o.slice(d)),c[b]>p?c.slice(0,p):c}:"0"[p](void 0,0)[b]?function(e,r){return void 0===e&&0===r?[]:t.call(this,e,r)}:t,[function(t,n){var o=e(this),a=void 0==t?void 0:t[r];return void 0!==a?a.call(t,o,n):g.call(String(o),t,n)},function(e,r){var n=l(g,e,this,r,g!==t);if(n.done)return n.value;var u=o(e),f=String(this),p=a(u,RegExp),b=u.unicode,h=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(v?"y":"g"),P=new p(v?u:"^(?:"+u.source+")",h),y=void 0===r?m:r>>>0;if(0===y)return[];if(0===f.length)return null===c(P,f)?[f]:[];var A=0,O=0,I=[];while(O<f.length){P.lastIndex=v?O:0;var S,x=c(P,v?f:f.slice(O));if(null===x||(S=d(s(P.lastIndex+(v?0:O)),f.length))===A)O=i(f,O,b);else{if(I.push(f.slice(A,O)),I.length===y)return I;for(var j=1;j<=x.length-1;j++)if(I.push(x[j]),I.length===y)return I;O=A=S}}return I.push(f.slice(A)),I}]}))},"2fdb":function(e,r,t){"use strict";var n=t("5ca1"),o=t("d2c8"),a="includes";n(n.P+n.F*t("5147")(a),"String",{includes:function(e){return!!~o(this,e,a).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},"348f":function(e,r,t){"use strict";t.d(r,"b",(function(){return A})),t.d(r,"c",(function(){return f})),t.d(r,"d",(function(){return O})),t.d(r,"a",(function(){return I}));t("4f37"),t("6762"),t("2fdb"),t("28a5");function n(e){if(Array.isArray(e))return e}function o(e,r){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var t=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0)if(t.push(i.value),r&&t.length===r)break}catch(c){o=!0,a=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(o)throw a}}return t}}var a=t("06c5");function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,r){return n(e)||o(e,r)||Object(a["a"])(e,r)||i()}var c=t("4360"),u=t("0a94"),l=t("9429"),d=t("eaf8");function f(e,r,t,n){var o=Object(d["c"])({periodo:n||null,Plano:t||null,letra:e[r.letra]||null});return o.letra?(p(o,e[r.disciplinaCod]),o.Disciplina?(b(o,e[r.horarioESala]),o.turno1?(h(o,e[r.docentes]),o):null):null):null}function p(e,r){if(r){var t=Object(u["a"])(c["a"].getters.AllDisciplinas,["codigo",r]);t?(e.Disciplina=t.id,e.creditoTotal=t.creditoTotal):e.Disciplina=null}}function b(e,r){if(r){var t=r.split(";"),n=s(t,2),o=n[0],a=n[1];e.Horario1=g(o),e.creditoTotal>=4&&(e.Horario2=g(a)),e.turno1=m(e.Horario1,e.Horario2),"EAD"!==e.turno1&&(e.Sala1=y(o),e.Sala2=y(a))}}function h(e,r){if(r){var t=r.split(";"),n=s(t,2),o=n[0],a=n[1];e.Docente1=v(o),e.Docente2=v(a)}}function m(e,r){return e||r?31===e?"EAD":Object(l["a"])(c["a"].getters.HorariosNoturno,["id",e])||Object(l["a"])(c["a"].getters.HorariosNoturno,["id",r])?"Noturno":"Diurno":null}function v(e){if(!e)return null;var r=Object(u["a"])(c["a"].getters.AllDocentes,(function(r){return Object(d["f"])(r.nome)===Object(d["f"])(e)}));return r?r.id:null}function g(e){if(!e)return null;var r=e.split(","),t=s(r,3),n=t[0],o=t[1],a=t[2],i=P(n,o);if(i){var l=Object(u["a"])(c["a"].getters.AllHorarios,["horario",i]);return l?l.id:null}return a.includes("EAD")?31:null}function P(e,r){if(!e||!r)return null;var t=null;switch(e.trim().substring(0,3)){case"SEG":t="2a";break;case"TER":t="3a";break;case"QUA":t="4a";break;case"QUI":t="5a";break;case"SEX":t="6a";break;case"SAB":return"EAD";default:return null}var n=r.split("AS"),o=s(n,2),a=o[0],i=o[1];if(!a||!i)return null;var c=a.trim().substring(0,2),u=i.trim().substring(0,2);return"".concat(t," ").concat(c,"-").concat(u)}function y(e){if(!e)return null;var r=e.split(","),t=s(r,3),n=t[2],o=Object(d["f"])(n),a=Object(u["a"])(c["a"].getters.AllSalas,(function(e){var r=Object(d["f"])(e.nome);return o.includes(r)}));return a?a.id:null}function A(e,r,t){var n={Turma:null,Curso:null,vagasOferecidas:0,vagasOcupadas:0},o=Object(u["a"])(c["a"].getters.AllCursos,["codigo",e[r.cursoCod]]);return n.Curso=o?o.id:null,n.Turma=t,n.vagasOferecidas=parseInt(e[r.vagas1],10),n.vagasOcupadas=parseInt(e[r.vagas2],10),n.Curso?n:null}t("ac6a"),t("456d");function O(e){if(e.length){var r=["DISCIPLINA","DISCIPLINA_COD.","TURMA","CURSO_COD.","CURSO","VAGASOFERECIDAS","VAGASOCUPADAS","HORARIOS","DOCENTES"];if(Object.keys(e[0]).length<r.length)throw new Error("Verifique a integridade e o formato do(s) arquivo(s)")}}function I(e){var r={disciplinaCod:null,letra:null,cursoCod:null,vagas1:null,vagas2:null,horarioESala:null,docentes:null},t=0;for(var n in e){if(1===t)r.disciplinaCod=n;else if(2===t)r.letra=n;else if(3===t)r.cursoCod=n;else if(5===t)r.vagas1=n;else if(6===t)r.vagas2=n;else if(7===t)r.horarioESala=n;else if(8===t){r.docentes=n;break}t++}return r}},5147:function(e,r,t){var n=t("2b4c")("match");e.exports=function(e){var r=/./;try{"/./"[e](r)}catch(t){try{return r[n]=!1,!"/./"[e](r)}catch(o){}}return!0}},"7bf8":function(e,r,t){"use strict";t.r(r);var n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("BaseModal",{ref:"baseModalImportPedidos",attrs:{title:"Importar pedidos",hasOverlay:!0,hasFooter:!0,styles:{width:"500px"}},on:{"on-close":e.clearForm},scopedSlots:e._u([{key:"modal-body",fn:function(){return[t("p",{staticClass:"alert alert-secondary"},[e._v("\n      Selecione arquivos\n      "),t("b",[e._v(".csv")]),e._v("\n      para importar os pedidos SIGA (oferecidos e ocupados) de cada período no plano\n      "),t("b",[e._v(e._s(e.planoForm.nome)+" - "+e._s(e.planoForm.ano)+".")]),t("br"),e._v("\n      Note que o formato do arquivo requerido é o relatório de plano departamental gerado pelo\n      "),t("a",{attrs:{href:"https://siga.ufjf.br",target:"_blank"}},[e._v("SIGA")]),e._v("\n      na página:\n      "),t("b",[e._v("Acadêmico > Consultas > Plano Departamental.")]),e._v("\n      E você pode cancelar o processo durante a importação apertando a tecla esc.\n    ")]),e.planoFormHasPedidosSIGA?t("p",{staticClass:"alert alert-danger"},[e._v("\n      O plano selecionado já possui pedidos SIGA, continuar este processor irá\n      "),t("b",[e._v("sobreescreve-los.")])]):e._e(),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("VInputFile",{attrs:{label:"Primeiro período",validation:e.$v.form.file1Periodo,accept:".csv"},model:{value:e.form.file1Periodo,callback:function(r){e.$set(e.form,"file1Periodo",r)},expression:"form.file1Periodo"}})],1),t("div",{staticClass:"col"},[t("VInputFile",{attrs:{label:"Terceiro período",validation:e.$v.form.file3Periodo,accept:".csv"},model:{value:e.form.file3Periodo,callback:function(r){e.$set(e.form,"file3Periodo",r)},expression:"form.file3Periodo"}})],1)]),t("portal",{attrs:{to:"loading-content"}},[t("BaseButton",{staticClass:"paddingX-20",attrs:{color:"gray",text:"Cancelar",disable:e.abortImport},on:{click:function(r){e.abortImport=!0,e.close()}}})],1)]},proxy:!0},{key:"modal-footer",fn:function(){return[t("BaseButton",{staticClass:"px-3 ml-auto",attrs:{text:"Confirmar",color:"blue"},on:{click:e.handleImportPedidosSIGAS}})]},proxy:!0}])})},o=[],a=(t("2caf"),t("ac4d"),t("8a81"),t("5df3"),t("1c4c"),t("7f7f"),t("6b54"),t("87b3"),t("1c01"),t("58b2"),t("8e6e"),t("f3e2"),t("456d"),t("7514"),t("ac6a"),t("d25f"),t("759f"),t("2909")),i=(t("96cf"),t("1da1")),s=t("ade3"),c=t("2f62"),u=t("b5ae"),l=t("bfea"),d=t("eaf8"),f=t("348f"),p=t("25df");function b(e,r){var t;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=h(e))||r&&e&&"number"===typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==t.return||t.return()}finally{if(s)throw a}}}}function h(e,r){if(e){if("string"===typeof e)return m(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?m(e,r):void 0}}function m(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function v(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function g(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?v(Object(t),!0).forEach((function(r){Object(s["a"])(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var P={name:"ModalImportPedidos",components:{VInputFile:p["j"]},props:{planoForm:{type:Object,required:!0}},data:function(){return{form:{file1Periodo:null,file3Periodo:null},abortImport:!1,turmasDoPlanoForm:[],planoFormHasPedidosSIGA:!1}},validations:{form:{file1Periodo:{requiredIf:Object(u["requiredIf"])((function(){return!this.form.file3Periodo}))},file3Periodo:{requiredIf:Object(u["requiredIf"])((function(){return!this.form.file1Periodo}))}}},mounted:function(){document.addEventListener("keydown",this.onEscAbortImport)},beforeDestroy:function(){document.removeEventListener("keydown",this.onEscAbortImport)},methods:g(g({},Object(c["b"])(["createPedidoSIGA","updatePedidoSIGA","initializeProgressBar","updateProgressBar","finishProgressBar"])),{},{open:function(){this.checkPedidosSIGA(),this.$refs.baseModalImportPedidos.open()},close:function(){this.$refs.baseModalImportPedidos.close()},onEscAbortImport:function(e){e.stopPropagation(),"Escape"===e.code&&(this.abortImport=!0)},clearForm:function(){var e=this;this.form.file1Periodo=null,this.form.file3Periodo=null,this.$nextTick((function(){return e.$v.$reset()}))},checkPedidosSIGA:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var r,t,n,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.turmasDoPlanoForm=[],this.planoFormHasPedidosSIGA=!1,this.currentPlano.id===this.planoForm.id){e.next=11;break}return e.next=5,l["a"].fetchAll(this.planoForm.id);case 5:r=e.sent,t=r.Turmas,n=void 0===t?[]:t,this.turmasDoPlanoForm=Object(a["a"])(n),e.next=12;break;case 11:this.turmasDoPlanoForm=this.AllTurmas;case 12:this.planoFormHasPedidosSIGA=this.turmasDoPlanoForm.some((function(e){return o.AllPedidosSIGA[e.id]&&o.AllPedidosSIGA[e.id].length>0}));case 13:case"end":return e.stop()}}),e,this)})));function r(){return e.apply(this,arguments)}return r}(),handleImportPedidosSIGAS:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var r,t,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$v.form.$touch(),!this.$v.form.$anyError){e.next=3;break}return e.abrupt("return");case 3:if(this.turmasDoPlanoForm.length){e.next=6;break}return this.pushNotification({type:"error",text:"Plano selecionado não possui turmas"}),e.abrupt("return");case 6:return e.prev=6,this.abortImport=!1,e.next=10,Object(d["g"])(this.form.file1Periodo);case 10:return r=e.sent,e.next=13,Object(d["g"])(this.form.file3Periodo);case 13:return t=e.sent,Object(f["d"])(r),Object(f["d"])(t),this.initializeProgressBar({finalValue:r.length+t.length}),n=this.turmasDoPlanoForm.filter((function(e){return 1===e.periodo})),o=this.turmasDoPlanoForm.filter((function(e){return 3===e.periodo})),e.next=21,this.createPedidosFileSIGA(r,n,1);case 21:return e.next=23,this.createPedidosFileSIGA(t,o,3);case 23:this.abortImport?this.pushNotification({type:"warn",text:"Importação dos pedidos foi cancelada!"}):(this.close(),this.pushNotification({type:"success",text:"Pedidos importados para o plano ".concat(this.currentPlano.nome)})),e.next=30;break;case 26:e.prev=26,e.t0=e["catch"](6),console.log(e.t0),this.pushNotification({type:"error",title:"Erro ao importar pedidos!"});case 30:return e.prev=30,e.next=33,this.finishProgressBar();case 33:return e.finish(30);case 34:case"end":return e.stop()}}),e,this,[[6,26,30,34]])})));function r(){return e.apply(this,arguments)}return r}(),createPedidosFileSIGA:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r,t,n){var o,a,i,s,c,u,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.length&&t.length){e.next=2;break}return e.abrupt("return");case 2:o={},a=Object(f["a"])(r[0]),i=b(r),e.prev=5,c=regeneratorRuntime.mark((function e(){var r,i,c,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=s.value,!l.abortImport){e.next=3;break}return e.abrupt("return","break");case 3:if(l.updateProgressBar(),i=l.AllDisciplinas.find((function(e){return e.codigo===r[a.disciplinaCod]})),i){e.next=7;break}return e.abrupt("return","continue");case 7:if(c=t.find((function(e){return e.periodo===n&&e.Disciplina===i.id&&e.letra===r[a.letra]})),c){e.next=10;break}return e.abrupt("return","continue");case 10:if(u=Object(f["b"])(r,a,c.id),!u||l.pedidosAreEqual(u,o)){e.next=16;break}return e.next=14,l.handleCreatePedidoSIGA(u);case 14:d=e.sent,o=g({},d);case 16:case"end":return e.stop()}}),e)})),i.s();case 8:if((s=i.n()).done){e.next=17;break}return e.delegateYield(c(),"t0",10);case 10:if(u=e.t0,"break"!==u){e.next=13;break}return e.abrupt("break",17);case 13:if("continue"!==u){e.next=15;break}return e.abrupt("continue",15);case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e["catch"](5),i.e(e.t1);case 22:return e.prev=22,i.f(),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[5,19,22,25]])})));function r(r,t,n){return e.apply(this,arguments)}return r}(),handleCreatePedidoSIGA:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.createPedidoSIGA({data:r});case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e["catch"](0),e.next=10,this.updatePedidoSIGA({data:r});case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this,[[0,6]])})));function r(r){return e.apply(this,arguments)}return r}(),pedidosAreEqual:function(e,r){return e.Curso===r.Curso&&e.Turma===r.Turma}}),computed:g({},Object(c["c"])(["AllTurmas","AllDisciplinas","AllPedidosSIGA"]))},y=P,A=t("2877"),O=Object(A["a"])(y,n,o,!1,null,null,null);r["default"]=O.exports},aae3:function(e,r,t){var n=t("d3f4"),o=t("2d95"),a=t("2b4c")("match");e.exports=function(e){var r;return n(e)&&(void 0!==(r=e[a])?!!r:"RegExp"==o(e))}},d2c8:function(e,r,t){var n=t("aae3"),o=t("be13");e.exports=function(e,r,t){if(n(r))throw TypeError("String#"+t+" doesn't accept regex!");return String(o(e))}}}]);
//# sourceMappingURL=chunk-9a433960.999cb233.js.map