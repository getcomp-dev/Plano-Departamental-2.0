(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20ee5bc5"],{"2fdb":function(e,t,i){"use strict";var a=i("5ca1"),r=i("d2c8"),n="includes";a(a.P+a.F*i("5147")(n),"String",{includes:function(e){return!!~r(this,e,n).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},5147:function(e,t,i){var a=i("2b4c")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[a]=!1,!"/./"[e](t)}catch(r){}}return!0}},"5b2e":function(e,t,i){"use strict";var a=i("9ac7"),r=i("72fb"),n=i("fb63"),s=i("b703"),o=i("a2fb"),c=i("6568"),l=200;function d(e,t,i,d){var f=-1,p=r["a"],u=!0,h=e.length,v=[],D=t.length;if(!h)return v;i&&(t=Object(s["a"])(t,Object(o["a"])(i))),d?(p=n["a"],u=!1):t.length>=l&&(p=c["a"],u=!1,t=new a["a"](t));e:while(++f<h){var m=e[f],b=null==i?m:i(m);if(m=d||0!==m?m:0,u&&b===b){var y=D;while(y--)if(t[y]===b)continue e;v.push(m)}else p(t,b,d)||v.push(m)}return v}var f=d,p=i("b93d"),u=i("2d5d"),h=i("010c"),v=Object(u["a"])((function(e,t){return Object(h["a"])(e)?f(e,Object(p["a"])(t,1,h["a"],!0)):[]}));t["a"]=v},"6c6b":function(e,t,i){},a1c7:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-component"},[t("portal",{attrs:{to:"page-header"}},[t("BaseButton",{attrs:{template:"adicionar"},on:{click:function(t){return e.toggleAsideModal("newPref")}}}),t("BaseButton",{attrs:{template:"filtros"},on:{click:function(t){return e.toggleAsideModal("filtros")}}}),t("BaseButton",{attrs:{template:"file-upload"},on:{click:function(t){return e.toggleAsideModal("upload")}}}),t("BaseButton",{attrs:{template:"swap-modes"},on:{click:e.toggleTableMode}}),t("BaseButton",{attrs:{template:"ajuda"},on:{click:function(t){return e.toggleAsideModal("ajuda")}}})],1),t("div",{staticClass:"div-table"},["disciplina"===e.tableMode?t("BaseTable",{scopedSlots:e._u([{key:"thead",fn:function(){return[t("v-th-ordination",{attrs:{currentOrder:e.ordenacaoDisciplina.disciplinas,orderToCheck:"codigo",width:"90",align:"start",title:"Código da Disciplina"}},[e._v("\n          Código\n        ")]),t("v-th-ordination",{attrs:{currentOrder:e.ordenacaoDisciplina.disciplinas,orderToCheck:"nome",width:"420",align:"start",title:"Nome da Disciplina"}},[e._v("\n          Nome\n        ")]),t("v-th-ordination",{attrs:{width:"80",currentOrder:e.ordenacaoDisciplina.disciplinas,orderToCheck:"perfil.abreviacao",title:"Perfil da Disciplina"}},[e._v("\n          Perfil\n        ")]),t("v-th-ordination",{attrs:{currentOrder:e.ordenacaoDisciplina.docentes,orderToCheck:"docente.nome",width:"120",align:"start",title:"Nome do Docente"}},[e._v("\n          Docente\n        ")]),t("v-th-ordination",{attrs:{currentOrder:e.ordenacaoDisciplina.pref,orderToCheck:"preferencia",orderType:"desc",orderFixed:!0,width:"100",title:"Preferência do Docente"}},[e._v("\n          Preferência\n        ")])]},proxy:!0},{key:"tbody",fn:function(){return[e.DisciplinasFiltered.length&&e.DocentesFiltered.length?[e._l(e.DisciplinasInPreferenciasOrdered,(function(i){return[t("tr",{key:i.id,staticClass:"bg-custom"},[t("v-td",{staticClass:"table-data",attrs:{width:"90",align:"start"}},[e._v(e._s(i.codigo))]),t("v-td",{staticClass:"table-data",attrs:{width:"420",align:"start"}},[e._v("\n                "+e._s(i.nome.toLowerCase())+"\n              ")]),t("v-td",{staticClass:"table-data",attrs:{width:"80",paddingX:"2"}},[e._v("\n                "+e._s(i.perfil.abreviacao.toLowerCase())+"\n              ")]),t("v-td",{staticClass:"table-data",attrs:{width:"120"}}),t("v-td",{staticClass:"clickable",attrs:{width:"100",type:"content"},on:{click:function(t){return e.openModalAddPreferencia(i)}}},[t("font-awesome-icon",{staticClass:"icon-darkgray",attrs:{icon:["fas","plus"]}})],1)],1),e._l(i.preferencias,(function(i){return t("tr",{key:i.Docente+"-"+i.Disciplina},[t("v-td",{staticClass:"table-data",attrs:{width:"90"}}),t("v-td",{staticClass:"table-data",attrs:{width:"420"}}),t("v-td",{staticClass:"table-data",attrs:{width:"80"}}),t("v-td",{staticClass:"table-data",attrs:{width:"120",align:"start",title:i.docente.nome}},[e._v("\n                "+e._s(i.docente.apelido)+"\n              ")]),t("v-td",{staticClass:"td-pref",attrs:{width:"100",title:"Preferência: "+e.preferenciaText(i.preferencia)+"\nClique para editar"},on:{click:function(t){return e.openModalEditPreferencia(i)}}},[e._v("\n                "+e._s(i.preferencia)+"\n              ")])],1)}))]}))]:t("tr",[t("v-td",{staticClass:"table-data",attrs:{width:"810"}},[t("b",[e._v("Nenhuma disciplina encontrada.")]),e._v("\n            Clique no botão de filtros\n            "),t("font-awesome-icon",{staticClass:"icon-gray",attrs:{icon:["fas","list-ul"]}}),e._v("\n            para selecioná-las.\n          ")],1)],1)]},proxy:!0}],null,!1,129860082)}):"docente"===e.tableMode?t("BaseTable",{scopedSlots:e._u([{key:"thead",fn:function(){return[t("v-th-ordination",{attrs:{currentOrder:e.ordenacaoDocentes.docentes,orderToCheck:"nome",width:"120",align:"start",title:"Nome do Docente"}},[e._v("\n          Docente\n        ")]),t("v-th-ordination",{attrs:{currentOrder:e.ordenacaoDocentes.disciplinas,orderToCheck:"disciplina.nome",width:"90",title:"Código da Disciplina"}},[e._v("\n          Código\n        ")]),t("v-th-ordination",{attrs:{currentOrder:e.ordenacaoDocentes.disciplinas,orderToCheck:"disciplina.nome",width:"420",align:"start",title:"Nome da Disciplina"}},[e._v("\n          Nome\n        ")]),t("v-th-ordination",{attrs:{currentOrder:e.ordenacaoDocentes.disciplinas,orderToCheck:"disciplina.perfil.abreviacao",width:"80",title:"Perfil da Disciplina"}},[e._v("\n          Perfil\n        ")]),t("v-th-ordination",{attrs:{currentOrder:e.ordenacaoDocentes.pref,orderToCheck:"preferencia",orderType:"desc",orderFixed:!0,width:"100",title:"Preferência do Docente"}},[e._v("\n          Preferência\n        ")])]},proxy:!0},{key:"tbody",fn:function(){return[e.DisciplinasFiltered.length&&e.DocentesFiltered.length?[e._l(e.DocentesInPreferenciasOrdered,(function(i){return[t("tr",{key:i.id,staticClass:"bg-custom"},[t("v-td",{staticClass:"table-data",attrs:{width:"120",align:"start"}},[e._v("\n                "+e._s(i.apelido.toLowerCase())+"\n              ")]),t("v-td",{staticClass:"table-data",attrs:{width:"90"}}),t("v-td",{staticClass:"table-data",attrs:{width:"420"}}),t("v-td",{staticClass:"table-data",attrs:{width:"80"}}),t("v-td",{staticClass:"clickable",attrs:{width:"100",type:"content"},on:{click:function(t){return e.openModalAddPreferencia(i)}}},[t("font-awesome-icon",{staticClass:"icon-darkgray",attrs:{icon:["fas","plus"]}})],1)],1),e._l(i.preferencias,(function(i){return t("tr",{key:i.Docente+"-"+i.Disciplina},[t("v-td",{staticClass:"table-data",attrs:{width:"120"}}),t("v-td",{staticClass:"table-data",attrs:{width:"90"}},[e._v(e._s(i.disciplina.codigo))]),t("v-td",{staticClass:"table-data",attrs:{width:"420",align:"start"}},[e._v("\n                "+e._s(i.disciplina.nome.toLowerCase())+"\n              ")]),t("v-td",{staticClass:"table-data",attrs:{width:"80"}},[e._v("\n                "+e._s(i.disciplina.perfil.abreviacao.toLowerCase())+"\n              ")]),t("v-td",{staticClass:"td-pref",attrs:{width:"100",type:"content",title:"Preferência: "+e.preferenciaText(i.preferencia)+"\nClique para editar"},on:{click:function(t){return e.openModalEditPreferencia(i)}}},[e._v("\n                "+e._s(i.preferencia)+"\n              ")])],1)}))]}))]:t("tr",[t("v-td",{staticClass:"table-data",attrs:{width:"810"}},[t("b",[e._v("Nenhuma disciplina encontrada.")]),e._v("\n            Clique no botão de filtros\n            "),t("font-awesome-icon",{staticClass:"icon-gray",attrs:{icon:["fas","list-ul"]}}),e._v("\n            para selecioná-las.\n          ")],1)],1)]},proxy:!0}])}):e._e()],1),t("BaseModal",{ref:"modalEditPref",staticClass:"modal-pref",attrs:{title:"Editar Preferência",position:"right",hasFooter:"",styles:{width:"400px"}},scopedSlots:e._u([{key:"modal-body",fn:function(){return[t("div",{staticClass:"row"},[t("span",{staticClass:"col-12 mb-2",staticStyle:{"text-transform":"capitalize"}},[t("b",[e._v("Docente:")]),e._v("\n          "+e._s(e.edit.docente?e.edit.docente.nome.toLowerCase():"")+"\n        ")]),t("span",{staticClass:"col-12"},[t("b",[e._v("Disciplina:")]),e._v("\n          "+e._s(e.edit.disciplina?e.edit.disciplina.nome:"")+"\n        ")])]),t("VSelect",{attrs:{label:"Preferência",validation:e.$v.preferenciaForm.preferencia},model:{value:e.preferenciaForm.preferencia,callback:function(t){e.$set(e.preferenciaForm,"preferencia",e._n(t))},expression:"preferenciaForm.preferencia"}},e._l([0,1,2,3],(function(i){return t("VOption",{key:i,attrs:{value:i,text:"".concat(i," - ").concat(e.preferenciaText(i))}})})),1)]},proxy:!0},{key:"modal-footer",fn:function(){return[t("BaseButton",{staticClass:"ml-auto",attrs:{color:"lightblue",text:"Salvar"},on:{click:e.handleEditPrefs}})]},proxy:!0}])}),t("BaseModal",{ref:"modalAddPref",staticClass:"modal-pref",attrs:{title:"docente"===e.tableMode?"Adicionar preferência ao docente":"Adicionar preferência à disciplina",position:"right",hasFooter:"",styles:{width:"400px"}},scopedSlots:e._u([{key:"modal-body",fn:function(){return["disciplina"===e.tableMode?[t("div",{staticClass:"form-row w-100"},[t("span",{staticClass:"w-100"},[t("b",[e._v("Disciplina:")]),e._v("\n            "+e._s(e.add.Disciplina?e.add.Disciplina.nome:"")+"\n          ")])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("VSelect",{attrs:{validation:e.$v.add.Docente},model:{value:e.add.Docente,callback:function(t){e.$set(e.add,"Docente",e._n(t))},expression:"add.Docente"}},e._l(e.DocentesAtivos,(function(e){return t("VOption",{key:e.id+e.nome,staticStyle:{"text-transform":"capitalize"},attrs:{value:e.id,text:e.apelido}})})),1)],1),t("div",{staticClass:"col"},[t("VSelect",{attrs:{label:"Preferência",validation:e.$v.add.preferencia},model:{value:e.add.preferencia,callback:function(t){e.$set(e.add,"preferencia",e._n(t))},expression:"add.preferencia"}},e._l([0,1,2,3],(function(i){return t("VOption",{key:i,attrs:{value:i,text:"".concat(i," - ").concat(e.preferenciaText(i))}})})),1)],1)])]:"docente"===e.tableMode?[t("div",{staticClass:"row"},[t("span",{staticClass:"col"},[t("b",[e._v("Docente:")]),e._v("\n            "+e._s(e.add.Docente?e.add.Docente.apelido:"")+"\n          ")])]),t("VSelect",{attrs:{label:"Disciplina",validation:e.$v.add.Disciplina},model:{value:e.add.Disciplina,callback:function(t){e.$set(e.add,"Disciplina",e._n(t))},expression:"add.Disciplina"}},e._l(e.DisciplinasDCCOrderedByNome,(function(e){return t("VOption",{key:e.id+e.codigo,attrs:{value:e.id,text:e.nome}})})),1),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("VSelect",{attrs:{label:"Código",validation:e.$v.add.Disciplina},model:{value:e.add.Disciplina,callback:function(t){e.$set(e.add,"Disciplina",e._n(t))},expression:"add.Disciplina"}},e._l(e.DisciplinasDCCOrderedByNome,(function(e){return t("VOption",{key:e.id+e.codigo,attrs:{value:e.id,text:e.codigo}})})),1)],1),t("div",{staticClass:"col"},[t("VSelect",{attrs:{label:"Preferência",validation:e.$v.add.preferencia},model:{value:e.add.preferencia,callback:function(t){e.$set(e.add,"preferencia",e._n(t))},expression:"add.preferencia"}},e._l([0,1,2,3],(function(i){return t("VOption",{key:i,attrs:{value:i,text:"".concat(i," - ").concat(e.preferenciaText(i))}})})),1)],1)])]:e._e()]},proxy:!0},{key:"modal-footer",fn:function(){return[t("BaseButton",{staticClass:"ml-auto",attrs:{color:"lightblue",text:"Confirmar"},on:{click:e.addPreferencia}})]},proxy:!0}])}),t("BaseModal",{ref:"modalNewPref",staticClass:"modal-pref",attrs:{title:"Nova Preferência",position:"right",hasFooter:"",styles:{width:"400px"}},scopedSlots:e._u([{key:"modal-body",fn:function(){return[t("VSelect",{attrs:{label:"Disciplina",validation:e.$v.add.Disciplina},model:{value:e.add.Disciplina,callback:function(t){e.$set(e.add,"Disciplina",e._n(t))},expression:"add.Disciplina"}},e._l(e.DisciplinasDCCOrderedByNome,(function(e){return t("VOption",{key:e.id+e.codigo,attrs:{value:e.id,text:e.nome}})})),1),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("VSelect",{attrs:{label:"Código",validation:e.$v.add.Disciplina},model:{value:e.add.Disciplina,callback:function(t){e.$set(e.add,"Disciplina",e._n(t))},expression:"add.Disciplina"}},e._l(e.DisciplinasDCCOrderedByNome,(function(e){return t("VOption",{key:e.id+e.codigo,attrs:{value:e.id,text:e.codigo}})})),1)],1),t("div",{staticClass:"col"},[t("VSelect",{attrs:{label:"Docente",validation:e.$v.add.Docente},model:{value:e.add.Docente,callback:function(t){e.$set(e.add,"Docente",e._n(t))},expression:"add.Docente"}},e._l(e.DocentesAtivos,(function(e){return t("VOption",{key:e.id+e.nome,attrs:{value:e.id,text:e.apelido}})})),1)],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-6"},[t("VSelect",{attrs:{label:"Preferência",validation:e.$v.add.preferencia},model:{value:e.add.preferencia,callback:function(t){e.$set(e.add,"preferencia",e._n(t))},expression:"add.preferencia"}},e._l([0,1,2,3],(function(i){return t("VOption",{key:i,attrs:{value:i,text:"".concat(i," - ").concat(e.preferenciaText(i))}})})),1)],1)])]},proxy:!0},{key:"modal-footer",fn:function(){return[t("BaseButton",{staticClass:"ml-auto",attrs:{color:"lightblue",text:"Confirmar"},on:{click:e.addPreferencia}})]},proxy:!0}])}),t("ModalFiltros",{ref:"modalFiltros",attrs:{callbacks:e.modalFiltrosCallbacks,tabsOptions:e.modalFiltrosTabs}},[t("BaseTable",{directives:[{name:"show",rawName:"v-show",value:"Perfis"===e.modalFiltrosTabs.current,expression:"modalFiltrosTabs.current === 'Perfis'"}],attrs:{type:"modal"},scopedSlots:e._u([{key:"thead",fn:function(){return[t("v-th",{attrs:{width:"25"}}),t("v-th-ordination",{attrs:{currentOrder:e.ordenacaoModal.perfis,orderToCheck:"nome",width:"425",align:"start"}},[e._v("\n          Nome\n        ")])]},proxy:!0},{key:"tbody",fn:function(){return e._l(e.PerfisOptionsOrdered,(function(i){return t("tr",{key:i.id+i.nome,on:{click:function(t){return t.stopPropagation(),e.selectPerfis(i)}}},[t("v-td",{staticClass:"table-data",attrs:{width:"25",type:"content"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtroPerfis.selecionados,expression:"filtroPerfis.selecionados"}],attrs:{type:"checkbox"},domProps:{value:i,indeterminate:i.halfChecked,checked:Array.isArray(e.filtroPerfis.selecionados)?e._i(e.filtroPerfis.selecionados,i)>-1:e.filtroPerfis.selecionados},on:{click:function(t){return t.stopPropagation(),e.selectPerfis(i)},change:function(t){var a=e.filtroPerfis.selecionados,r=t.target,n=!!r.checked;if(Array.isArray(a)){var s=i,o=e._i(a,s);r.checked?o<0&&e.$set(e.filtroPerfis,"selecionados",a.concat([s])):o>-1&&e.$set(e.filtroPerfis,"selecionados",a.slice(0,o).concat(a.slice(o+1)))}else e.$set(e.filtroPerfis,"selecionados",n)}}})]),t("v-td",{staticStyle:{"text-transform":"capitalize","font-size":"11px"},attrs:{width:"425",align:"start"}},[e._v("\n            "+e._s(i.nome.toLowerCase())+"\n          ")])],1)}))},proxy:!0}])}),t("BaseTable",{directives:[{name:"show",rawName:"v-show",value:"Disciplinas"===e.modalFiltrosTabs.current,expression:"modalFiltrosTabs.current === 'Disciplinas'"}],attrs:{type:"modal",hasSearchBar:!0},scopedSlots:e._u([{key:"thead-search",fn:function(){return[t("VInputSearch",{attrs:{placeholder:"Pesquise nome ou codigo de uma disciplina..."},model:{value:e.searchDisciplinas,callback:function(t){e.searchDisciplinas=t},expression:"searchDisciplinas"}})]},proxy:!0},{key:"thead",fn:function(){return[t("v-th",{attrs:{width:"25"}}),t("v-th-ordination",{attrs:{currentOrder:e.ordenacaoModal.disciplinas,orderToCheck:"codigo",width:"70",align:"start"}},[e._v("\n          Código\n        ")]),t("v-th-ordination",{attrs:{currentOrder:e.ordenacaoModal.disciplinas,orderToCheck:"nome",width:"270",align:"start"}},[e._v("\n          Nome\n        ")]),t("v-th-ordination",{attrs:{currentOrder:e.ordenacaoModal.disciplinas,orderToCheck:"perfil.abreviacao",width:"85",align:"start"}},[e._v("\n          Perfil\n        ")])]},proxy:!0},{key:"tbody",fn:function(){return[e._l(e.DisciplinasOptionsOrdered,(function(i){return t("tr",{directives:[{name:"prevent-click-selection",rawName:"v-prevent-click-selection"}],key:i.id+i.nome,on:{click:function(t){return e.selectDisciplina(i)}}},[t("v-td",{staticClass:"table-data",attrs:{width:"25",type:"content"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtroDisciplinas.selecionados,expression:"filtroDisciplinas.selecionados"}],attrs:{type:"checkbox"},domProps:{value:i,checked:Array.isArray(e.filtroDisciplinas.selecionados)?e._i(e.filtroDisciplinas.selecionados,i)>-1:e.filtroDisciplinas.selecionados},on:{click:function(t){return t.stopPropagation(),e.selectDisciplina(i)},change:function(t){var a=e.filtroDisciplinas.selecionados,r=t.target,n=!!r.checked;if(Array.isArray(a)){var s=i,o=e._i(a,s);r.checked?o<0&&e.$set(e.filtroDisciplinas,"selecionados",a.concat([s])):o>-1&&e.$set(e.filtroDisciplinas,"selecionados",a.slice(0,o).concat(a.slice(o+1)))}else e.$set(e.filtroDisciplinas,"selecionados",n)}}})]),t("v-td",{staticClass:"table-data",attrs:{width:"70",align:"start"}},[e._v(e._s(i.codigo))]),t("v-td",{staticStyle:{"text-transform":"capitalize","font-size":"11px"},attrs:{align:"start",width:"270"}},[e._v("\n            "+e._s(i.nome.toLowerCase())+"\n          ")]),t("v-td",{staticStyle:{"text-transform":"capitalize","font-size":"11px"},attrs:{width:"85",align:"start"}},[e._v("\n            "+e._s(i.perfil.abreviacao.toLowerCase())+"\n          ")])],1)})),e.DisciplinasOptionsOrdered.length?e._e():t("tr",[t("v-td",{staticClass:"table-data",attrs:{colspan:"3",width:"450"}},[e._v("NENHUMA DISCIPLINA ENCONTRADA.")])],1)]},proxy:!0}])}),t("BaseTable",{directives:[{name:"show",rawName:"v-show",value:"Docentes"===e.modalFiltrosTabs.current,expression:"modalFiltrosTabs.current === 'Docentes'"}],attrs:{type:"modal",hasSearchBar:!0},scopedSlots:e._u([{key:"thead-search",fn:function(){return[t("VInputSearch",{attrs:{placeholder:"Pesquise pelo apelido de um docente..."},model:{value:e.searchDocentes,callback:function(t){e.searchDocentes=t},expression:"searchDocentes"}})]},proxy:!0},{key:"thead",fn:function(){return[t("v-th",{attrs:{width:"25"}}),t("v-th-ordination",{attrs:{currentOrder:e.ordenacaoModal.docentes,orderToCheck:"apelido",width:"425",align:"start"}},[e._v("\n          Nome\n        ")])]},proxy:!0},{key:"tbody",fn:function(){return e._l(e.DocentesOptionsOrdered,(function(i){return t("tr",{directives:[{name:"prevent-click-selection",rawName:"v-prevent-click-selection"}],key:i.id+i.apelido,on:{click:function(t){return e.toggleItemInArray(i,e.filtroDocentes.selecionados)}}},[t("v-td",{staticClass:"table-data",attrs:{width:"25",type:"content"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtroDocentes.selecionados,expression:"filtroDocentes.selecionados"}],attrs:{type:"checkbox"},domProps:{value:i,checked:Array.isArray(e.filtroDocentes.selecionados)?e._i(e.filtroDocentes.selecionados,i)>-1:e.filtroDocentes.selecionados},on:{change:function(t){var a=e.filtroDocentes.selecionados,r=t.target,n=!!r.checked;if(Array.isArray(a)){var s=i,o=e._i(a,s);r.checked?o<0&&e.$set(e.filtroDocentes,"selecionados",a.concat([s])):o>-1&&e.$set(e.filtroDocentes,"selecionados",a.slice(0,o).concat(a.slice(o+1)))}else e.$set(e.filtroDocentes,"selecionados",n)}}})]),t("v-td",{staticStyle:{"text-transform":"capitalize","font-size":"11px"},attrs:{width:"425",align:"start"}},[e._v("\n            "+e._s(i.apelido.toLowerCase())+"\n          ")])],1)}))},proxy:!0}])})],1),t("BaseModal",{ref:"modalUpload",staticClass:"modal-pref",attrs:{title:"Importar preferências",position:"right",hasFooter:"",styles:{width:"400px"}},scopedSlots:e._u([{key:"modal-body",fn:function(){return[t("VInputFile",{attrs:{validation:e.$v.fileXlsxPrefs,accept:".xlsx"},model:{value:e.fileXlsxPrefs,callback:function(t){e.fileXlsxPrefs=t},expression:"fileXlsxPrefs"}})]},proxy:!0},{key:"modal-footer",fn:function(){return[t("BaseButton",{staticClass:"ml-auto",attrs:{color:"lightblue",text:"Importar"},on:{click:e.importPrefs}})]},proxy:!0}])}),t("ModalAjuda",{ref:"modalAjuda"},[t("li",{staticClass:"list-group-item"},[t("b",[e._v("Adicionar preferência do docente:")]),e._v("\n      Clique no ícone de adicionar\n      "),t("font-awesome-icon",{staticClass:"icon-green",attrs:{icon:["fas","plus"]}}),e._v("\n      no cabeçalho da página. Em seguida, preencha a janela que se abrirá à direita e para\n      finalizar clique no botão Confirmar. Para adicionar uma preferência diretamente numa linha\n      da tabela clique no icone de adicionar\n      "),t("font-awesome-icon",{staticClass:"icon-darkgray",attrs:{icon:["fas","plus"]}}),e._v("\n      na coluna Pref. (Preferência) da linha que deseja, preencha a janela que se abrirá à direita\n      e para finalizar clique no botão Confirmar.\n    ")],1),t("li",{staticClass:"list-group-item"},[t("b",[e._v("Editar preferência do docente:")]),e._v("\n      Clique no número da coluna Pref. (Preferência) na linha que deseja alterar. Em seguida, na\n      janela que se abrirá à direita, altere as informações que desejar e clique em Salvar.\n    ")]),t("li",{staticClass:"list-group-item"},[t("b",[e._v("Deletar preferência do docente:")]),e._v("\n      Clique no número da coluna Pref. (Preferência) na linha que deseja remover. Em seguida, na\n      janela que se abrirá à direita, coloque o valor de preferência como zero (Inapto).\n    ")]),t("li",{staticClass:"list-group-item"},[t("b",[e._v("Visualizar conteúdo:")]),e._v("\n      Clique no ícone filtros\n      "),t("font-awesome-icon",{staticClass:"icon-gray",attrs:{icon:["fas","list-ul"]}}),e._v("\n      . Em seguida, utilize as abas para navegar entre os filtros. Selecione as informações que\n      deseja visualizar e clique em OK.\n    ")],1),t("li",{staticClass:"list-group-item"},[t("b",[e._v("Alterar visualização da tabela:")]),e._v("\n      Clique no ícone de alterar visualização\n      "),t("font-awesome-icon",{staticClass:"icon-gray",attrs:{icon:["fas","sync-alt"]}}),e._v("\n      no cabeçalho da página para alterar a visualização das preferências entre docentes por\n      disciplinas, ou disciplinas por docentes.\n    ")],1)])],1)},r=[],n=(i("8e6e"),i("456d"),i("4917"),i("6762"),i("2fdb"),i("28a5"),i("a481"),i("ade3")),s=(i("ac6a"),i("2909")),o=i("1146"),c=i.n(o),l=i("2f62"),d=i("7191"),f=i("5b2e"),p=i("0a94"),u=i("6740"),h=i("ce69"),v=i("d4b9"),D=i("b5ae"),m=i("eaf8"),b=i("dd42"),y=i("d027"),C=i("9165"),g=i("25df");function O(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function P(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?O(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):O(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var _={name:"PreferenciasDocentes",components:{ModalAjuda:y["a"],VInputFile:g["i"],VSelect:g["m"],VOption:g["l"],ModalFiltros:y["f"],VInputSearch:g["k"]},mixins:[C["k"],C["a"],C["i"]],data:function(){var e=this;return{searchDisciplinas:"",searchDocentes:"",asideModalsRefs:["modalAjuda","modalAddPref","modalEditPref","modalNewPref","modalUpload","modalFiltros"],ordenacaoModal:{perfis:{order:"nome",type:"asc"},disciplinas:{order:"codigo",type:"asc"},docentes:{order:"apelido",type:"asc"}},filtroDisciplinas:{ativados:[],selecionados:[]},filtroPerfis:{selecionados:[]},filtroDocentes:{ativados:[],selecionados:[]},modalFiltrosTabs:{current:"Perfis",array:["Perfis","Disciplinas","Docentes"]},modalFiltrosCallbacks:{selectAll:{Perfis:function(){e.filtroDisciplinas.selecionados=Object(s["a"])(e.DisciplinasOptions),e.filtroPerfis.selecionados=Object(s["a"])(e.PerfisOptions)},Disciplinas:function(){e.filtroDisciplinas.selecionados=Object(d["a"])(e.DisciplinasOptionsFiltered,e.filtroDisciplinas.selecionados),e.conectaDisciplinasEmPerfis()},Docentes:function(){e.filtroDocentes.selecionados=Object(d["a"])(e.filtroDocentes.selecionados,e.DocentesOptionsFiltered)}},selectNone:{Docentes:function(){e.filtroDocentes.selecionados=Object(f["a"])(e.filtroDocentes.selecionados,e.DocentesOptionsFiltered)},Perfis:function(){e.filtroPerfis.selecionados=[],e.filtroDisciplinas.selecionados=[]},Disciplinas:function(){e.filtroDisciplinas.selecionados=Object(f["a"])(e.filtroDisciplinas.selecionados,e.DisciplinasOptionsFiltered),e.conectaDisciplinasEmPerfis()}},btnOk:function(){e.filtroDisciplinas.ativados=Object(s["a"])(e.filtroDisciplinas.selecionados),e.filtroDocentes.ativados=Object(s["a"])(e.filtroDocentes.selecionados)}},fileXlsxPrefs:null,preferenciaForm:{Docente:null,Disciplina:null,preferencia:null},edit:{docente:null,disciplina:null,isZero:null},add:{Docente:null,Disciplina:null,preferencia:0},error:null,tableMode:"docente",ordenacaoDocentes:{docentes:{order:"apelido",type:"asc"},disciplinas:{order:"disciplina.codigo",type:"asc"},pref:{order:"preferencia",type:"desc"}},ordenacaoDisciplina:{disciplinas:{order:"codigo",type:"asc"},docentes:{order:"docente.nome",type:"asc"},pref:{order:"preferencia",type:"desc"}}}},beforeMount:function(){this.modalFiltrosCallbacks.selectAll.Perfis(),this.modalFiltrosCallbacks.selectAll.Disciplinas(),this.modalFiltrosCallbacks.selectAll.Docentes(),this.modalFiltrosCallbacks.btnOk()},validations:{fileXlsxPrefs:{required:D["required"]},preferenciaForm:{Docente:{required:D["required"]},Disciplina:{required:D["required"]},preferencia:{required:D["required"],integer:D["integer"]}},edit:{docente:{required:D["required"]},disciplina:{required:D["required"],integer:D["integer"]}},add:{Docente:{required:D["required"]},Disciplina:{required:D["required"]},preferencia:{required:D["required"],integer:D["integer"]}}},methods:{preferenciaText:function(e){switch(e){case 0:return"Inapto";case 1:return"Emergência";case 2:return"Confortável";case 3:return"Interesse";default:break}},toggleTableMode:function(){"docente"===this.tableMode?this.tableMode="disciplina":this.tableMode="docente",this.$refs.modalNewPref.close(),this.$refs.modalAddPref.close(),this.$refs.modalEditPref.close()},closeAllModals:function(){var e=this;this.asideModalsRefs.forEach((function(t){e.$refs[t].close()}))},openModalEditPreferencia:function(e){var t=this;this.edit.docente=P({},e.docente),this.edit.disciplina=P({},e.disciplina);var i=e.preferencia;this.edit.isZero=0===i,this.preferenciaForm={Docente:e.Docente,Disciplina:e.Disciplina,preferencia:i},this.closeAllModals(),this.$nextTick((function(){return t.$v.$reset()})),this.$refs.modalEditPref.open()},openModalAddPreferencia:function(e){var t=this;"disciplina"===this.tableMode?this.add.Disciplina=e:this.add.Docente=e,this.closeAllModals(),this.$nextTick((function(){return t.$v.$reset()})),this.$refs.modalAddPref.open()},findPreferencia:function(e,t){var i=Object(p["a"])(this.PreferenciasDocentes,{Docente:e.id,Disciplina:t.id});return i?i.preferencia:0},addPreferencia:function(){var e=this;if(this.$v.add.$touch(),!this.$v.add.$anyError){var t=P({},this.add);this.add.Docente.id&&(t.Docente=this.add.Docente.id),this.add.Disciplina.id&&(t.Disciplina=this.add.Disciplina.id),b["a"].create(t).then((function(){e.pushNotification({type:"success",text:"Preferência adicionada com sucesso!"})})).catch((function(){e.pushNotification({type:"error",title:"Erro ao adicionar preferência!",text:"Verifique se a preferência já não existe"})}))}},handleEditPrefs:function(){var e=this;this.$v.preferenciaForm.$touch(),this.$v.preferenciaForm.$anyError||(this.edit.isZero?0!=this.preferenciaForm.preferencia&&(b["a"].create(this.preferenciaForm).then((function(){e.pushNotification({type:"success",text:"Preferência atualizada com sucesso!"})})).catch((function(t){e.error="<b>Erro ao atualizar Preferência</b>",t.response.data.fullMessage&&(e.error+="<br/>"+t.response.data.fullMessage.replace("\n","<br/>")),e.pushNotification({type:"error",text:e.error})})),this.edit.isZero=!1):this.preferenciaForm.preferencia!=this.findPreferencia(this.edit.docente,this.edit.disciplina)&&(0==this.preferenciaForm.preferencia?(b["a"].delete(this.preferenciaForm.Disciplina,this.preferenciaForm.Docente).then((function(){e.pushNotification({type:"success",text:"Preferência atualizada com sucesso!"})})).catch((function(t){e.error="<b>Erro ao atualizar Preferência</b>",t.response.data.fullMessage&&(e.error+="<br/>"+t.response.data.fullMessage.replace("\n","<br/>")),e.pushNotification({type:"error",text:e.error})})),this.edit.isZero=!0):b["a"].update(this.preferenciaForm.Disciplina,this.preferenciaForm.Docente,this.preferenciaForm).then((function(){e.pushNotification({type:"success",text:"Preferência atualizada com sucesso!"})})).catch((function(t){e.error="<b>Erro ao atualizar Preferência</b>",t.response.data.fullMessage&&(e.error+="<br/>"+t.response.data.fullMessage.replace("\n","<br/>")),e.pushNotification({type:"error",text:e.error})}))))},importPrefs:function(){if(this.$v.fileXlsxPrefs.$touch(),!this.$v.fileXlsxPrefs.$anyError){var e=new FileReader,t=this.DocentesAtivos,i=this.DisciplinasDCC,a=this.PreferenciasDocentes;e.onload=function(e){for(var r=c.a.read(e.target.result,{type:"binary"}),n=r.Sheets[r.SheetNames[0]],s=c.a.utils.sheet_to_json(n),o=Object(u["a"])(c.a.utils.sheet_to_csv(n).split(","),(function(e){return"Disciplinas"===e.substring(0,11)})),l=[],d=0;d<o.length;d++){var f=o[d].indexOf("["),h=o[d].indexOf("\t"),v=Object(p["a"])(i,{codigo:o[d].substring(f+1,h)});l.push(v),v||console.log(o[d]+" não existe no sistema")}for(var D=0;D<s.length;D++){var m=Object(p["a"])(t,{nome:s[D].Nome.toUpperCase()});if(m)for(var y=0;y<o.length;y++)if(l[y]){var C=Object(p["a"])(a,{Docente:m.id,Disciplina:l[y].id});if(s[D][o[y]]&&0!=s[D][o[y]]){var g={Docente:m.id,Disciplina:l[y].id,preferencia:s[D][o[y]]};C?C.preferencia!=g.preferencia&&b["a"].update(C.Disciplina,C.Docente,g):b["a"].create(g)}else C&&b["a"].delete(C.Disciplina,C.Docente)}}},e.readAsBinaryString(this.fileXlsxPrefs),this.$refs.modalUpload.close()}}},computed:P(P({},Object(l["c"])(["DocentesAtivos","DisciplinasDCC","PreferenciasDocentes","PerfisDCC"])),{},{DocentesInPreferenciasOrdered:function(){var e=this.ordenacaoDocentes.disciplinas,t=this.ordenacaoDocentes.docentes,i=this.ordenacaoDocentes.pref,a=Object(h["a"])(this.DocentesInPreferencias,(function(t){return P(P({},t),{},{preferencias:Object(v["a"])(t.preferencias,[i.order,e.order],[i.type,e.type])})}));return Object(v["a"])(a,t.order,t.type)},DocentesInPreferencias:function(){var e=this,t=[];return this.DocentesFiltered.forEach((function(i){var a=Object(u["a"])(e.DisciplinasFiltered,["Docente",i.id]);a.length&&t.push(P(P({},a[0].docente),{},{preferencias:a}))})),t},DisciplinasInPreferenciasOrdered:function(){var e=this.ordenacaoDisciplina.docentes,t=this.ordenacaoDisciplina.disciplinas,i=this.ordenacaoDisciplina.pref,a=Object(h["a"])(this.DisciplinasInPreferencias,(function(t){return P(P({},t),{},{preferencias:Object(v["a"])(t.preferencias,[i.order,e.order],[i.type,e.type])})}));return Object(v["a"])(a,t.order,t.type)},DisciplinasInPreferencias:function(){var e=this,t=[];return this.DisciplinasDCC.forEach((function(i){var a=Object(u["a"])(e.DisciplinasFiltered,["Disciplina",i.id]);a.length&&t.push(P(P({},a[0].disciplina),{},{preferencias:a}))})),t},DisciplinasFiltered:function(){var e=this;if(!this.filtroDisciplinas.ativados.length)return[];var t=[];return this.PreferenciasDocentes.forEach((function(i){e.filtroDisciplinas.ativados.includes(i.disciplina)&&e.filtroDocentes.ativados.includes(i.docente)&&t.push(i)})),t},DocentesFiltered:function(){var e=this;if(!this.filtroDocentes.ativados.length)return[];var t=[];return this.DocentesAtivos.forEach((function(i){e.filtroDocentes.ativados.includes(i)&&t.push(i)})),t},DisciplinasDCCOrderedByNome:function(){return Object(v["a"])(this.DisciplinasDCC,["nome"])},DisciplinasDCCOrderedByCodigo:function(){return Object(v["a"])(this.DisciplinasDCC,["codigo"])},PerfisOptionsOrdered:function(){return Object(v["a"])(this.PerfisOptions,this.ordenacaoModal.perfis.order,this.ordenacaoModal.perfis.type)},PerfisOptions:function(){var e=this;return this.PerfisDCC.map((function(t){var i=Object(u["a"])(e.DisciplinasOptions,["Perfil",t.id]),a=Object(u["a"])(e.filtroDisciplinas.selecionados,["Perfil",t.id]),r=!1;return i.length===a.length?r=!1:a.length>0&&(r=!0),P(P({},t),{},{halfChecked:r})}))},DisciplinasOptionsFiltered:function(){if(""===this.searchDisciplinas)return this.DisciplinasOptions;var e=Object(m["f"])(this.searchDisciplinas);return Object(u["a"])(this.DisciplinasOptions,(function(t){var i=Object(m["f"])(t.nome),a=Object(m["f"])(t.codigo);return i.match(e)||a.match(e)}))},DisciplinasOptionsOrdered:function(){return Object(v["a"])(this.DisciplinasOptionsFiltered,this.ordenacaoModal.disciplinas.order,this.ordenacaoModal.disciplinas.type)},DisciplinasOptions:function(){return this.DisciplinasDCC},DocentesOptionsOrdered:function(){return Object(v["a"])(this.DocentesOptionsFiltered,this.ordenacaoModal.docentes.order,this.ordenacaoModal.docentes.type)},DocentesOptionsFiltered:function(){if(""===this.searchDocentes)return this.DocentesAtivos;var e=Object(m["f"])(this.searchDocentes);return this.DocentesAtivos.filter((function(t){var i=Object(m["f"])(t.apelido);return i.match(e)}))}})},k=_,w=(i("a5b5"),i("2877")),x=Object(w["a"])(k,a,r,!1,null,"3b438210",null);t["default"]=x.exports},a5b5:function(e,t,i){"use strict";i("6c6b")},d2c8:function(e,t,i){var a=i("aae3"),r=i("be13");e.exports=function(e,t,i){if(a(t))throw TypeError("String#"+i+" doesn't accept regex!");return String(r(e))}}}]);
//# sourceMappingURL=chunk-20ee5bc5.dc0fa9ad.js.map