(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e33ab9a4"],{"1c5c":function(e,t,r){"use strict";r("bdbb")},"7bf8":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("BaseModal",{ref:"baseModalImportPedidos",attrs:{title:"Importar pedidos",hasOverlay:!0,hasFooter:!0,classes:"modal-import-pedidos"},scopedSlots:e._u([{key:"modal-body",fn:function(){return[r("p",{staticClass:"alert alert-secondary"},[e._v("\n      Selecione arquivos\n      "),r("b",[e._v(".csv")]),e._v("\n      para importar os pedidos oferecidos e ocupados de cada período no plano\n      "),r("b",[e._v(e._s(e.planoForm.nome)+" - "+e._s(e.planoForm.ano)+".")]),r("br"),e._v("\n      Note que o formato do arquivo requerido é o relatório de plano departamental gerado pelo\n      "),r("a",{attrs:{href:"https://siga.ufjf.br",target:"_blank"}},[e._v("SIGA")]),e._v("\n      na página:\n      "),r("b",[e._v("Acadêmico > Consultas > Plano Departamental.")]),e._v("\n      E você pode cancelar o processo durante a importação apertando a tecla esc.\n    ")]),r("div",{staticClass:"row mb-2 mx-0"},[r("div",{staticClass:"form-group col m-0 p-0"},[r("label",{attrs:{for:"inputPedidos"}},[e._v("Primeiro periodo:")]),r("input",{ref:"input1periodo",staticClass:"w-100 form-control-file mt-1",attrs:{id:"inputPedidos",type:"file",accept:".csv"}})])]),r("div",{staticClass:"row mb-2 mx-0"},[r("div",{staticClass:"form-group col m-0 p-0"},[r("label",{attrs:{for:"inputPedidos"}},[e._v("Terceiro periodo:")]),r("input",{ref:"input3periodo",staticClass:"w-100 form-control-file mt-1",attrs:{id:"inputPedidos",type:"file",accept:".csv"}})])])]},proxy:!0},{key:"modal-footer",fn:function(){return[r("BaseButton",{staticClass:"px-3 ml-auto",attrs:{text:"Confirmar",color:"blue"},on:{click:e.handleImportPedidosOferecidos}})]},proxy:!0}])})},o=[],a=(r("2caf"),r("ac4d"),r("8a81"),r("5df3"),r("1c4c"),r("7f7f"),r("6b54"),r("87b3"),r("1c01"),r("58b2"),r("8e6e"),r("f3e2"),r("d25f"),r("456d"),r("7514"),r("ac6a"),r("2909")),i=r("3835"),s=(r("96cf"),r("1da1")),c=r("ade3"),u=r("2f62"),d=r("bfea"),p=r("eaf8"),l=r("348f");function f(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=b(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function b(e,t){if(e){if("string"===typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){Object(c["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y={name:"ModalNovoPlano",props:{planoForm:{type:Object,required:!0}},data:function(){return{abortImport:!1}},mounted:function(){document.addEventListener("keydown",this.onEscAbortImport)},beforeDestroy:function(){document.removeEventListener("keydown",this.onEscAbortImport)},methods:v(v({},Object(u["b"])(["createPedidoOferecido","updatePedidoOferecido","initializeProgressBar","updateProgressBar","finishProgressBar"])),{},{open:function(){this.$refs.baseModalImportPedidos.open()},close:function(){this.$refs.baseModalImportPedidos.close()},onEscAbortImport:function(e){e.stopPropagation(),"Escape"===e.code&&(this.abortImport=!0)},handleImportPedidosOferecidos:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,n,o,s,c,u,f,b,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object(i["a"])(this.$refs.input1periodo.files,1),r=t[0],n=Object(i["a"])(this.$refs.input3periodo.files,1),o=n[0],r||o){e.next=5;break}return this.pushNotification({type:"error",text:"Nenhum arquivo selecionado"}),e.abrupt("return");case 5:return e.prev=5,this.abortImport=!1,e.next=9,Object(p["g"])(r);case 9:return s=e.sent,e.next=12,Object(p["g"])(o);case 12:if(c=e.sent,Object(l["d"])(s),Object(l["d"])(c),this.initializeProgressBar({finalValue:s.length+c.length}),this.planoForm.id!==this.currentPlano.id){e.next=20;break}u=Object(a["a"])(this.AllTurmas),e.next=26;break;case 20:return e.next=22,d["a"].fetchAll(this.planoForm.id);case 22:f=e.sent,b=f.Turmas,m=void 0===b?[]:b,u=m;case 26:if(u.length){e.next=29;break}return this.pushNotification({type:"error",text:"Plano selecionado não possui turmas"}),e.abrupt("return");case 29:return e.next=31,this.createPedidosFileSIGA(s,u,1);case 31:return e.next=33,this.createPedidosFileSIGA(c,u,3);case 33:this.abortImport?this.pushNotification({type:"warn",text:"Importação dos pedidos foi cancelada!"}):(this.close(),this.pushNotification({type:"success",text:"Pedidos importados para o plano ".concat(this.currentPlano.nome)})),e.next=39;break;case 36:e.prev=36,e.t0=e["catch"](5),this.pushNotification({type:"error",title:"Erro ao importar pedidos!"});case 39:return e.prev=39,e.next=42,this.finishProgressBar();case 42:return e.finish(39);case 43:case"end":return e.stop()}}),e,this,[[5,36,39,43]])})));function t(){return e.apply(this,arguments)}return t}(),createPedidosFileSIGA:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r,n){var o,a,i,s,c,u,d=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.length&&r.length){e.next=2;break}return e.abrupt("return");case 2:o={},a=Object(l["a"])(t[0]),i=f(t),e.prev=5,c=regeneratorRuntime.mark((function e(){var t,i,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=s.value,!d.abortImport){e.next=3;break}return e.abrupt("return","break");case 3:if(d.updateProgressBar(),i=r.find((function(e){return e.periodo===n&&e.disciplina.codigo===t[a.disciplinaCod]&&e.letra===t[a.letra]})),!i){e.next=12;break}if(c=Object(l["b"])(t,a,i.id),!c||d.pedidosAreEqual(c,o)){e.next=12;break}return e.next=10,d.handleCreatePedidoOferecido(c);case 10:u=e.sent,o=v({},u);case 12:case"end":return e.stop()}}),e)})),i.s();case 8:if((s=i.n()).done){e.next=15;break}return e.delegateYield(c(),"t0",10);case 10:if(u=e.t0,"break"!==u){e.next=13;break}return e.abrupt("break",15);case 13:e.next=8;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e["catch"](5),i.e(e.t1);case 20:return e.prev=20,i.f(),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[5,17,20,23]])})));function t(t,r,n){return e.apply(this,arguments)}return t}(),handleCreatePedidoOferecido:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.createPedidoOferecido({data:t});case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e["catch"](0),e.next=10,this.updatePedidoOferecido({data:t});case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}(),pedidosAreEqual:function(e,t){return e.Curso===t.Curso&&e.Turma===t.Turma}}),computed:v({},Object(u["c"])(["AllTurmas"]))},O=y,g=(r("1c5c"),r("2877")),P=Object(g["a"])(O,n,o,!1,null,null,null);t["default"]=P.exports},bdbb:function(e,t,r){}}]);
//# sourceMappingURL=chunk-e33ab9a4.e1f3c412.js.map