(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-96739e4e"],{7366:function(t,r,o){"use strict";o.r(r);var e=function(){var t=this,r=t.$createElement,o=t._self._c||r;return o("div",{staticClass:"main-component row"},[o("portal",{attrs:{to:"page-header"}},[o("BaseButton",{attrs:{template:"ajuda"},on:{click:function(r){return t.$refs.modalAjuda.toggle()}}})],1),o("div",{staticClass:"page-content"},[o("div",{staticClass:"table-div"},[o("BaseTable",{scopedSlots:t._u([{key:"thead",fn:function(){return[o("v-th-ordination",{attrs:{currentOrder:t.ordenacaoConflitos,orderToCheck:"disciplina.codigo",width:"80",align:"start",title:"Código da Disciplina"}},[t._v("\n            Código\n          ")]),o("v-th-ordination",{attrs:{currentOrder:t.ordenacaoConflitos,orderToCheck:"disciplina.nome",width:"300",align:"start"}},[t._v("\n            Disciplina\n          ")]),o("v-th",{attrs:{width:"30",title:"Turma"}},[t._v("T.")]),o("v-th",{attrs:{width:"55",title:"Código do Curso"}},[t._v("Curso")]),o("v-th",{attrs:{width:"180",align:"start",title:"Valor do pedido no SIGA"}},[t._v("Conflito")]),o("v-th",{attrs:{width:"120",paddingX:"0",title:"Valor do pedido no SIGA"}},[t._v("Valor SIGA")]),o("v-th",{attrs:{width:"120",paddingX:"0",title:"Valor do pedido no Sistema"}},[t._v("Valor Sistema")])]},proxy:!0},{key:"tbody",fn:function(){return[t._l(t.turmasConflitosOrdered,(function(r){return[o("tr",{key:r.id,staticClass:"bg-custom"},[o("v-td",{attrs:{width:"80",align:"start"}},[t._v(t._s(r.disciplina.codigo))]),o("v-td",{attrs:{width:"300",align:"start"}},[t._v(t._s(r.disciplina.nome))]),o("v-td",{attrs:{width:"30"}},[t._v(t._s(r.letra))]),o("v-td",{attrs:{width:"55"}}),o("v-td",{attrs:{width:"180"}}),o("v-td",{attrs:{width:"120"}}),o("v-td",{attrs:{width:"120"}})],1),t._l(r.conflitos,(function(e){return o("tr",{key:r.id+e.label+e.curso.id},[o("v-td",{attrs:{width:"80"}}),o("v-td",{attrs:{width:"300"}}),o("v-td",{attrs:{width:"30"}}),o("v-td",{attrs:{width:"55",title:e.curso.nome}},[t._v("\n                "+t._s(e.curso.codigo)+"\n              ")]),o("v-td",{attrs:{width:"180",align:"start"}},[t._v(t._s(e.label))]),o("v-td",{attrs:{width:"120",paddingX:"0",title:e.siga}},[t._v(t._s(e.siga))]),o("v-td",{attrs:{width:"120",paddingX:"0",title:e.sistema}},[t._v("\n                "+t._s(e.sistema)+"\n              ")])],1)}))]})),t.turmasConflitosOrdered.length?t._e():o("tr",[o("v-td",{attrs:{width:"870"}},[o("b",[t._v("Nenhum conflito encontrado.")]),t._v("\n              Certifiqui-se de selecionar um arquivo correspondente com o plano atual e o periodo\n              selecionado.\n            ")])],1)]},proxy:!0}])})],1),o("Card",{attrs:{title:"Validar pedidos"},scopedSlots:t._u([{key:"body",fn:function(){return[o("div",{staticClass:"row mb-2 mx-0"},[o("div",{staticClass:"form-group col m-0 px-0"},[o("label",{staticClass:"col-form-label",attrs:{required:"",for:"periodoPlano"}},[t._v("Período")]),o("select",{directives:[{name:"model",rawName:"v-model.number",value:t.periodoForm,expression:"periodoForm",modifiers:{number:!0}}],staticClass:"input-lg form-control form-control-sm",attrs:{id:"periodoPlano"},on:{change:function(r){var o=Array.prototype.filter.call(r.target.options,(function(t){return t.selected})).map((function(r){var o="_value"in r?r._value:r.value;return t._n(o)}));t.periodoForm=r.target.multiple?o:o[0]}}},t._l(t.PeriodosLetivos,(function(r){return o("option",{key:r.id+r.nome,domProps:{value:r.id}},[t._v("\n                "+t._s(r.nome)+"\n              ")])})),0)])]),o("div",{staticClass:"row mb-2 mx-0"},[o("div",{staticClass:"form-group col m-0 px-0"},[o("label",{staticClass:"col-form-label",attrs:{required:"",for:"turmaFile"}},[t._v("\n              Arquivo .csv do plano SIGA\n            ")]),o("input",{ref:"inputFileForm",staticClass:"form-control-file mt-1",attrs:{type:"file",id:"turmaFile",accept:".csv"}})])])]},proxy:!0},{key:"footer",fn:function(){return[o("BaseButton",{attrs:{template:"Salvar",title:"Iniciar"},on:{click:t.handleCompareTurmas}}),o("BaseButton",{attrs:{template:"cancelar"},on:{click:t.clearCardForm}})]},proxy:!0}])})],1),o("ModalAjuda",{ref:"modalAjuda"},[o("li",{staticClass:"list-group-item"},[o("b",[t._v("Limpar:")]),t._v("\n      No cartão à direita, clique em Cancelar\n      "),o("font-awesome-icon",{staticClass:"icon-gray",attrs:{icon:["fas","times"]}}),t._v("\n      , para limpar as informações.\n    ")],1),o("li",{staticClass:"list-group-item"},[o("b",[t._v("Ordenar:")]),t._v("\n      Clique no cabeçalho da tabela, na coluna desejada, para alterar a ordenação das informações.\n    ")])])],1)},i=[],a=(o("1c01"),o("58b2"),o("8e6e"),o("456d"),o("2caf"),o("ac4d"),o("8a81"),o("5df3"),o("1c4c"),o("7f7f"),o("6b54"),o("87b3"),o("7514"),o("ac6a"),o("f3e2"),o("d25f"),o("ade3")),n=(o("20d6"),o("3835")),s=(o("96cf"),o("1da1")),d=o("2f62"),l=o("9429"),c=o("d4b9"),u=o("eaf8"),f=o("a91e"),p=o("9165"),v=o("25df"),m=o("d027"),h=o("348f");function g(t,r){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);r&&(e=e.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),o.push.apply(o,e)}return o}function b(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?g(Object(o),!0).forEach((function(r){Object(a["a"])(t,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):g(Object(o)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(o,r))}))}return t}function C(t,r){var o;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=y(t))||r&&t&&"number"===typeof t.length){o&&(t=o);var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,n=!0,s=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return n=t.done,t},e:function(t){s=!0,a=t},f:function(){try{n||null==o.return||o.return()}finally{if(s)throw a}}}}function y(t,r){if(t){if("string"===typeof t)return O(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?O(t,r):void 0}}function O(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,e=new Array(r);o<r;o++)e[o]=t[o];return e}var w={name:"ValidaçãoLançamentoSIGA",components:{Card:v["c"],ModalAjuda:m["a"]},mixins:[p["d"],p["e"]],data:function(){return{periodoForm:1,turmasConflitos:[],ordenacaoConflitos:{order:"disciplina.codigo",type:"asc"}}},methods:{clearCardForm:function(){this.periodoForm=1,this.$refs.inputFileForm.value=""},handleCompareTurmas:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var r,o,e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.periodoForm){t.next=3;break}return this.pushNotification({type:"error",text:"Nenhum período selecionado"}),t.abrupt("return");case 3:if(r=Object(n["a"])(this.$refs.inputFileForm.files,1),o=r[0],o){t.next=7;break}return this.pushNotification({type:"error",text:"Nenhum arquivo selecionado"}),t.abrupt("return");case 7:return t.prev=7,this.setLoading({type:"partial",value:!0}),t.next=11,Object(u["g"])(o);case 11:e=t.sent,Object(h["d"])(e),i=this.normalizeTurmasEPedidosSIGA(e,this.periodoForm),this.searchConflitos(i,this.periodoForm),t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](7),console.log(t.t0),this.pushNotification({type:"error"});case 21:return t.prev=21,this.setLoading({type:"partial",value:!1}),t.finish(21);case 24:case"end":return t.stop()}}),t,this,[[7,17,21,24]])})));function r(){return t.apply(this,arguments)}return r}(),normalizeTurmasEPedidosSIGA:function(t,r){var o,e=this,i=Object(h["a"])(t[0]),a=[],n={},s=C(t);try{var d=function(){var t=o.value,s=Object(h["c"])(t,i,null,r);if(!s)return"continue";s.pedidosOferecidos=[];var d=Object(h["b"])(t,i,null);if(d){var l=d.vagasOferecidas,c=d.vagasOcupadas;d.totalVagas=l+c}if(e.turmasAreEqual(n,s)){if(d){var u=a[a.length-1].pedidosOferecidos.findIndex((function(t){return t.Curso===d.Curso}));-1===u&&a[a.length-1].pedidosOferecidos.push(d)}}else d&&s.pedidosOferecidos.push(d),a.push(s),n=b({},s)};for(s.s();!(o=s.n()).done;)d()}catch(l){s.e(l)}finally{s.f()}return a},searchConflitos:function(t,r){var o=this;this.turmasConflitos=[];var e=[],i=this.AllTurmas.filter((function(t){return t.periodo===r&&15!=t.disciplina.Perfil}));i.forEach((function(r){var i=t.find((function(t){return r.Disciplina==t.Disciplina&&r.letra==t.letra})),a=b(b({},r),{},{conflitos:[]});if(!i)return a.conflitos.push({label:"Turma existe apenas no sistema",siga:"-",sistema:"-",curso:Object(f["a"])({codigo:"-"})}),void e.push(a);if(o.docentesAreEqual(r,i)||a.conflitos.push({label:"Docentes diferentes",siga:o.generateDocentesText(i.Docente1,i.Docente2),sistema:o.generateDocentesText(r.Docente1,r.Docente2),curso:Object(f["a"])({codigo:"-"})}),o.horariosAreEqual(r,i)||a.conflitos.push({label:"Horarios diferentes",siga:o.generateHorariosText(i.Horario1,i.Horario2),sistema:o.generateHorariosText(r.Horario1,r.Horario2),curso:Object(f["a"])({codigo:"-"})}),!Object(l["a"])(o.disciplinasGradeDCC1Periodo,["Disciplina",r.Disciplina])){var n=o.Pedidos[r.id]||[];i.pedidosOferecidos.forEach((function(t){var r=n.find((function(r){return r.Curso==t.Curso}));if(r){var e=r.vagasPeriodizadas+r.vagasNaoPeriodizadas;e==t.totalVagas||a.conflitos.push({label:"Pedido com valores diferentes",siga:t.totalVagas,sistema:0==e?"-":e,curso:o.AllCursos.find((function(t){return t.id===r.Curso}))})}else a.conflitos.push({label:"Pedido não existe no sistema",siga:t.totalVagas,sistema:"-",curso:o.AllCursos.find((function(r){return r.id===t.Curso}))})})),n.filter((function(t){return 0!=t.vagasPeriodizadas||0!=t.vagasNaoPeriodizadas})).forEach((function(t){var r=i.pedidosOferecidos.find((function(r){return t.Curso==r.Curso}));r||a.conflitos.push({label:"Pedido não existe no SIGA",siga:"-",sistema:t.vagasPeriodizadas+t.vagasNaoPeriodizadas,curso:o.AllCursos.find((function(r){return r.id===t.Curso}))})}))}a.conflitos.length&&e.push(a)})),this.turmasConflitos=e},turmasAreEqual:function(t,r){return t.letra===r.letra&&t.Disciplina===r.Disciplina&&t.Horario1===r.Horario1&&t.Horario2===r.Horario2},docentesAreEqual:function(t,r){return t.Docente1==r.Docente1&&t.Docente2==r.Docente2||t.Docente1==r.Docente2&&t.Docente2==r.Docente1},horariosAreEqual:function(t,r){return t.Horario1==r.Horario1&&t.Horario2==r.Horario2||t.Horario1==r.Horario2&&t.Horario2==r.Horario1||(null==t.Horario1&&(t.Horario2==r.Horario1||t.Horario2==r.Horario2)||(null==r.Horario1&&(r.Horario2==t.Horario1||r.Horario2==t.Horario2)||(null==t.Horario2&&(t.Horario1==r.Horario1||t.Horario1==r.Horario2)||null==r.Horario2&&(r.Horario1==t.Horario1||r.Horario1==t.Horario2))))}},computed:b(b({},Object(d["c"])(["AllCursos","AllTurmas","PeriodosLetivos","Pedidos","DisciplinasGrades"])),{},{turmasConflitosOrdered:function(){var t=this.ordenacaoConflitos,r=t.order,o=t.type;return Object(c["a"])(this.turmasConflitos,r,o)},disciplinasGradeDCC1Periodo:function(){var t=this.DisciplinasGrades.filter((function(t){return 1===t.periodo})),r=[];return t.forEach((function(t){var o=r.find((function(r){return r.Disciplina===t.Disciplina}));o||r.push(b({},t))})),r}})},_=w,H=o("2877"),j=Object(H["a"])(_,e,i,!1,null,null,null);r["default"]=j.exports},a91e:function(t,r,o){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.id,o=void 0===r?null:r,e=t.semestreInicial,i=void 0===e?null:e,a=t.posicao,n=void 0===a?null:a,s=t.nome,d=void 0===s?"":s,l=t.codigo,c=void 0===l?"":l,u=t.turno,f=void 0===u?"":u,p=t.alunosEntrada,v=void 0===p?0:p,m=t.alunosEntrada2,h=void 0===m?0:m;return{id:o,semestreInicial:i,posicao:n,nome:d,codigo:c,turno:f,alunosEntrada:v,alunosEntrada2:h}}o.d(r,"a",(function(){return i})),o.d(r,"b",(function(){return n}));var i=e;function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.id,o=void 0===r?null:r,e=t.nome,i=void 0===e?"":e,a=t.codigo,n=void 0===a?"":a,s=t.Perfil,d=void 0===s?"":s,l=t.cargaTeorica,c=void 0===l?0:l,u=t.cargaPratica,f=void 0===u?0:u,p=t.laboratorio,v=void 0===p?0:p,m=t.ead,h=void 0===m?0:m,g=t.departamento,b=void 0===g?1:g;return{id:o,nome:i,codigo:n,Perfil:d,cargaTeorica:c,cargaPratica:f,laboratorio:v,ead:h,departamento:b}}var n=a}}]);
//# sourceMappingURL=chunk-96739e4e.d62d4d24.js.map