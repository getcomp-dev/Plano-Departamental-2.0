(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d6792"],{7366:function(t,r,e){"use strict";e.r(r);var a=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"main-component row"},[e("portal",{attrs:{to:"page-header"}},[e("BaseButton",{attrs:{template:"ajuda"},on:{click:function(r){return t.$refs.modalAjuda.toggle()}}})],1),e("div",{staticClass:"page-content"},[e("div",{staticClass:"table-div"},[e("BaseTable",{scopedSlots:t._u([{key:"thead",fn:function(){return[e("v-th-ordination",{attrs:{currentOrder:t.ordenacaoConflitos,orderToCheck:"turma.disciplina.codigo",width:"100",paddingX:"0",title:"Código da Disciplina"}},[t._v("\n            Cód. Disciplina\n          ")]),e("v-th-ordination",{attrs:{currentOrder:t.ordenacaoConflitos,orderToCheck:"turma.disciplina.nome",width:"300",align:"start"}},[t._v("\n            Disciplina\n          ")]),e("v-th",{attrs:{width:"30",title:"Turma"}},[t._v("T.")]),e("v-th-ordination",{attrs:{currentOrder:t.ordenacaoConflitos,orderToCheck:"curso.codigo",width:"90",title:"Código do Curso"}},[t._v("\n            Cód. Curso\n          ")]),e("v-th",{attrs:{width:"180",align:"start",title:"Valor do pedido no SIGA"}},[t._v("Conflito")]),e("v-th",{attrs:{width:"85",paddingX:"0",title:"Valor do pedido no SIGA"}},[t._v("Valor SIGA")]),e("v-th",{attrs:{width:"85",paddingX:"0",title:"Valor do pedido no Sistema"}},[t._v("Valor Sistema")])]},proxy:!0},{key:"tbody",fn:function(){return[t._l(t.conflitosOrdered,(function(r){return e("tr",{key:r.label+r.turma.id+r.curso.id},[e("v-td",{attrs:{width:"100"}},[t._v(t._s(r.turma.disciplina.codigo))]),e("v-td",{attrs:{width:"300",align:"start"}},[t._v(t._s(r.turma.disciplina.nome))]),e("v-td",{attrs:{width:"30"}},[t._v(t._s(r.turma.letra))]),e("v-td",{attrs:{width:"90"}},[t._v(t._s(r.curso.codigo))]),e("v-td",{attrs:{width:"180",align:"start"}},[t._v(t._s(r.label))]),e("v-td",{attrs:{width:"85"}},[t._v(t._s(r.siga))]),e("v-td",{attrs:{width:"85"}},[t._v(t._s(r.sistema))])],1)})),t.conflitosOrdered.length?t._e():e("tr",[e("v-td",{attrs:{width:"870"}},[e("b",[t._v("Nenhum conflito encontrado.")]),t._v("\n              Certifiqui-se de selecionar um arquivo correspondente com o plano atual e o periodo\n              selecionado.\n            ")])],1)]},proxy:!0}])})],1),e("Card",{attrs:{title:"Validar pedidos"},scopedSlots:t._u([{key:"form-group",fn:function(){return[e("div",{staticClass:"row mb-2 mx-0"},[e("div",{staticClass:"form-group col m-0 px-0"},[e("label",{staticClass:"col-form-label",attrs:{required:"",for:"nome"}},[t._v("Período")]),e("select",{directives:[{name:"model",rawName:"v-model.number",value:t.periodoDasTurmas,expression:"periodoDasTurmas",modifiers:{number:!0}}],staticClass:"input-lg form-control form-control-sm",attrs:{id:"periodoPlano"},on:{change:function(r){var e=Array.prototype.filter.call(r.target.options,(function(t){return t.selected})).map((function(r){var e="_value"in r?r._value:r.value;return t._n(e)}));t.periodoDasTurmas=r.target.multiple?e:e[0]}}},t._l(t.PeriodosLetivos,(function(r){return e("option",{key:r.id+r.nome,domProps:{value:r.id}},[t._v("\n                "+t._s(r.nome)+"\n              ")])})),0)])]),e("div",{staticClass:"row mb-2 mx-0"},[e("div",{staticClass:"form-group col m-0 px-0"},[e("label",{staticClass:"col-form-label",attrs:{required:"",for:"turmaFile"}},[t._v("\n              Arquivo .csv do plano SIGA\n            ")]),e("input",{ref:"inputFilePlano",staticClass:"form-control-file mt-1",attrs:{type:"file",id:"turmaFile",accept:".csv"}})])])]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{attrs:{template:"Salvar",title:"Iniciar"},on:{click:t.handleCompareTurmas}}),e("BaseButton",{attrs:{template:"cancelar"},on:{click:t.clearCardForm}})]},proxy:!0}])})],1),e("ModalAjuda",{ref:"modalAjuda"},[e("li",{staticClass:"list-group-item"},[e("b",[t._v("Limpar:")]),t._v("\n      No cartão à direita, clique em Cancelar\n      "),e("font-awesome-icon",{staticClass:"icon-gray",attrs:{icon:["fas","times"]}}),t._v("\n      , para limpar as informações.\n    ")],1),e("li",{staticClass:"list-group-item"},[e("b",[t._v("Ordenar:")]),t._v("\n      Clique no cabeçalho da tabela, na coluna desejada, para alterar a ordenação das informações.\n    ")])])],1)},o=[],i=(e("1c01"),e("58b2"),e("8e6e"),e("456d"),e("2caf"),e("ac4d"),e("8a81"),e("5df3"),e("1c4c"),e("7f7f"),e("6b54"),e("87b3"),e("7514"),e("ac6a"),e("f3e2"),e("d25f"),e("ade3")),n=e("3835"),s=(e("96cf"),e("1da1")),c=e("2f62"),l=e("9429"),d=e("0a94"),u=e("12a1");function f(t,r){return Object(u["a"])(t,r)}var p=f,m=e("d4b9"),v=e("eaf8"),h=e("25df"),b=e("d027"),g=e("348f");function C(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,a)}return e}function y(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?C(Object(e),!0).forEach((function(r){Object(i["a"])(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):C(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function O(t,r){var e;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=_(t))||r&&t&&"number"===typeof t.length){e&&(t=e);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,n=!0,s=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return n=t.done,t},e:function(t){s=!0,i=t},f:function(){try{n||null==e.return||e.return()}finally{if(s)throw i}}}}function _(t,r){if(t){if("string"===typeof t)return w(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?w(t,r):void 0}}function w(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,a=new Array(r);e<r;e++)a[e]=t[e];return a}var j={name:"ValidaçãoLançamentoSIGA",components:{Card:h["c"],ModalAjuda:b["a"]},data:function(){return{periodoDasTurmas:1,conflitos:[],ordenacaoConflitos:{order:"turma.disciplina.codigo",type:"asc"}}},methods:{clearCardForm:function(){this.periodoDasTurmas=1,this.$refs.inputFilePlano.value=""},handleCompareTurmas:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var r,e,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.periodoDasTurmas){t.next=3;break}return this.pushNotification({type:"error",text:"Nenhum período selecionado"}),t.abrupt("return");case 3:if(r=Object(n["a"])(this.$refs.inputFilePlano.files,1),e=r[0],e){t.next=7;break}return this.pushNotification({type:"error",text:"Nenhum arquivo selecionado"}),t.abrupt("return");case 7:return t.prev=7,this.setLoading({type:"partial",value:!0}),t.next=11,Object(v["f"])(e);case 11:a=t.sent,Object(g["d"])(a),o=this.normalizeTurmasEPedidosSIGA(a,this.periodoDasTurmas),this.searchConflictsTurmas(o),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](7),this.pushNotification({type:"error",text:t.t0.message||""});case 20:return t.prev=20,this.setLoading({type:"partial",value:!1}),t.finish(20);case 23:case"end":return t.stop()}}),t,this,[[7,17,20,23]])})));function r(){return t.apply(this,arguments)}return r}(),normalizeTurmasEPedidosSIGA:function(t,r){var e,a=Object(g["a"])(t[0]),o=[],i={},n=O(t);try{for(n.s();!(e=n.n()).done;){var s=e.value,c=Object(g["c"])(s,a,null,r);if(c){c.pedidosOferecidos=[];var l=Object(g["b"])(s,a,null);if(l){var d=l.vagasOferecidas,u=l.vagasOcupadas;l.totalVagas=d+u}this.turmasIsEqual(i,c)?l&&o[o.length-1].pedidosOferecidos.push(l):(l&&c.pedidosOferecidos.push(l),o.push(c),i=y({},c))}}}catch(f){n.e(f)}finally{n.f()}return o},searchConflictsTurmas:function(t){var r=this;this.conflitos=[];var e,a=this.AllTurmas.filter((function(t){return t.periodo===r.periodoDasTurmas&&15!=t.disciplina.Perfil&&!Object(l["a"])(r.disciplinasGradeDCC1Periodo,["Disciplina",t.Disciplina])})),o=O(a);try{var i=function(){var a=e.value,o=t.find((function(t){return a.Disciplina==t.Disciplina&&a.letra==t.letra}));if(!o)return r.conflitos.push({label:"Turma existe apenas no sistema",siga:"-",sistema:"-",turma:y({},a),curso:{codigo:"-"}}),"continue";var i=r.Pedidos[a.id];o.pedidosOferecidos.forEach((function(t){var e=i.find((function(r){return r.Curso==t.Curso}));if(e){var o=e.vagasPeriodizadas+e.vagasNaoPeriodizadas;o==t.totalVagas||r.conflitos.push({label:"Pedido com valores diferentes",siga:t.totalVagas,sistema:0==o?"-":o,turma:y({},a),curso:Object(d["a"])(r.AllCursos,["id",e.Curso])})}else r.conflitos.push({label:"Pedido não existe no sistema",siga:t.totalVagas,sistema:"-",turma:y({},a),curso:Object(d["a"])(r.AllCursos,["id",e.Curso])})})),i.filter((function(t){return 0!=t.vagasPeriodizadas||0!=t.vagasNaoPeriodizadas})).forEach((function(t){var e=o.pedidosOferecidos.find((function(r){return t.Curso==r.Curso}));e||r.conflitos.push({label:"Pedido não existe no SIGA",siga:"-",sistema:t.vagasPeriodizadas+t.vagasNaoPeriodizadas,turma:y({},a),curso:Object(d["a"])(r.AllCursos,["id",t.Curso])})}))};for(o.s();!(e=o.n()).done;)i()}catch(s){o.e(s)}finally{o.f()}var n=[];this.conflitos.forEach((function(t){var r=n.find((function(r){return p(t,r)}));r||n.push(t)})),this.conflitos=[].concat(n)},turmasIsEqual:function(t,r){return t.letra===r.letra&&t.Disciplina===r.Disciplina&&t.Horario1===r.Horario1&&t.Horario2===r.Horario2}},computed:y(y({},Object(c["c"])(["AllCursos","AllTurmas","PeriodosLetivos","Pedidos","DisciplinasGrades"])),{},{conflitosOrdered:function(){var t=this.ordenacaoConflitos,r=t.order,e=t.type;return Object(m["a"])(this.conflitos,r,e)},disciplinasGradeDCC1Periodo:function(){var t=this.DisciplinasGrades.filter((function(t){return 1===t.periodo})),r=[];return t.forEach((function(t){var e=r.find((function(r){return r.Disciplina===t.Disciplina}));e||r.push(y({},t))})),r}})},P=j,D=e("2877"),A=Object(D["a"])(P,a,o,!1,null,null,null);r["default"]=A.exports}}]);
//# sourceMappingURL=chunk-2d0d6792.169882de.js.map