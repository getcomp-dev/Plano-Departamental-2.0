(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44fea651"],{"2fdb":function(t,r,e){"use strict";var o=e("5ca1"),a=e("d2c8"),i="includes";o(o.P+o.F*e("5147")(i),"String",{includes:function(t){return!!~a(this,t,i).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"348f":function(t,r,e){"use strict";e.d(r,"b",(function(){return g})),e.d(r,"c",(function(){return l})),e.d(r,"d",(function(){return b})),e.d(r,"a",(function(){return O}));e("6762"),e("2fdb"),e("28a5");var o=e("3835"),a=e("4360"),i=e("0a94"),n=e("9429"),s=e("eaf8");function l(t,r,e,o){var a=Object(s["c"])({periodo:o||null,Plano:e||null,letra:t[r.letra]||null});return a.letra?(c(a,t[r.disciplinaCod]),a.Disciplina?(u(a,t[r.horarioESala]),a.turno1?(d(a,t[r.docentes]),a):null):null):null}function c(t,r){if(r){var e=Object(i["a"])(a["a"].getters.AllDisciplinas,["codigo",r]);e?(t.Disciplina=e.id,t.creditoTotal=e.creditoTotal):t.Disciplina=null}}function u(t,r){if(r){var e=r.split(";"),a=Object(o["a"])(e,2),i=a[0],n=a[1];t.Horario1=v(i),t.creditoTotal>=4&&(t.Horario2=v(n)),t.turno1=f(t.Horario1,t.Horario2),"EAD"!==t.turno1&&(t.Sala1=m(i),t.Sala2=m(n))}}function d(t,r){if(r){var e=r.split(";"),a=Object(o["a"])(e,2),i=a[0],n=a[1];t.Docente1=p(i),t.Docente2=p(n)}}function f(t,r){return t||r?31===t?"EAD":Object(n["a"])(a["a"].getters.HorariosNoturno,["id",t])||Object(n["a"])(a["a"].getters.HorariosNoturno,["id",r])?"Noturno":"Diurno":null}function p(t){if(!t)return null;var r=Object(i["a"])(a["a"].getters.AllDocentes,(function(r){return Object(s["f"])(r.nome)===Object(s["f"])(t)}));return r?r.id:null}function v(t){if(!t)return null;var r=t.split(","),e=Object(o["a"])(r,3),n=e[0],s=e[1],l=e[2],c=h(n,s);if(c){var u=Object(i["a"])(a["a"].getters.AllHorarios,["horario",c]);return u?u.id:null}return l.includes("EAD")?31:null}function h(t,r){if(!t||!r)return null;var e=null;switch(t.trim().substring(0,3)){case"SEG":e="2a";break;case"TER":e="3a";break;case"QUA":e="4a";break;case"QUI":e="5a";break;case"SEX":e="6a";break;case"SAB":return"EAD";default:return null}var a=r.split("AS"),i=Object(o["a"])(a,2),n=i[0],s=i[1];if(!n||!s)return null;var l=n.trim().substring(0,2),c=s.trim().substring(0,2);return"".concat(e," ").concat(l,"-").concat(c)}function m(t){if(!t)return null;var r=t.split(","),e=Object(o["a"])(r,3),n=e[2],l=Object(s["f"])(n),c=Object(i["a"])(a["a"].getters.AllSalas,(function(t){var r=Object(s["f"])(t.nome);return l.includes(r)}));return c?c.id:null}function g(t,r,e){var o={Turma:null,Curso:null,vagasOferecidas:0,vagasOcupadas:0},n=Object(i["a"])(a["a"].getters.AllCursos,["codigo",t[r.cursoCod]]);return o.Curso=n?n.id:null,o.Turma=e,o.vagasOferecidas=parseInt(t[r.vagas1],10),o.vagasOcupadas=parseInt(t[r.vagas2],10),o.Curso?o:null}e("ac6a"),e("456d");function b(t){if(t.length){var r=["DISCIPLINA","DISCIPLINA_COD.","TURMA","CURSO_COD.","CURSO","VAGASOFERECIDAS","VAGASOCUPADAS","HORARIOS","DOCENTES"];if(Object.keys(t[0]).length<r.length)throw new Error("Verifique a integridade e o formato do(s) arquivo(s)")}}function O(t){var r={disciplinaCod:null,letra:null,cursoCod:null,vagas1:null,vagas2:null,horarioESala:null,docentes:null},e=0;for(var o in t){if(1===e)r.disciplinaCod=o;else if(2===e)r.letra=o;else if(3===e)r.cursoCod=o;else if(5===e)r.vagas1=o;else if(6===e)r.vagas2=o;else if(7===e)r.horarioESala=o;else if(8===e){r.docentes=o;break}e++}return r}},5147:function(t,r,e){var o=e("2b4c")("match");t.exports=function(t){var r=/./;try{"/./"[t](r)}catch(e){try{return r[o]=!1,!"/./"[t](r)}catch(a){}}return!0}},7366:function(t,r,e){"use strict";e.r(r);var o=function(){var t=this,r=t._self._c;return r("div",{staticClass:"main-component row"},[r("portal",{attrs:{to:"page-header"}},[r("BaseButton",{attrs:{template:"ajuda"},on:{click:function(r){return t.$refs.modalAjuda.toggle()}}})],1),r("div",{staticClass:"page-content"},[r("div",{staticClass:"table-div"},[r("BaseTable",{scopedSlots:t._u([{key:"thead",fn:function(){return[r("v-th-ordination",{attrs:{currentOrder:t.ordenacaoConflitos,orderToCheck:"disciplina.codigo",width:"80",align:"start",title:"Código da Disciplina"}},[t._v("\n            Código\n          ")]),r("v-th-ordination",{attrs:{currentOrder:t.ordenacaoConflitos,orderToCheck:"disciplina.nome",width:"300",align:"start",title:"Nome da Disciplina"}},[t._v("\n            Disciplina\n          ")]),r("v-th",{attrs:{width:"45"}},[t._v("Turma")]),r("v-th",{attrs:{width:"55",title:"Código do Curso"}},[t._v("Curso")]),r("v-th",{attrs:{colspan:"420",paddingX:"0"}},[t._v("\n            Conflito\n            "),r("v-th",{attrs:{width:"180",align:"start",title:"Tipo do Conflito"}},[t._v("Tipo")]),r("v-th",{attrs:{width:"120",title:"Valor no SIGA"}},[t._v("SIGA")]),r("v-th",{attrs:{width:"120",title:"Valor no Sistema (SIPlanWeb)"}},[t._v("Sistema")])],1)]},proxy:!0},{key:"tbody",fn:function(){return[t._l(t.turmasConflitosOrdered,(function(e){return[r("tr",{key:e.id,staticClass:"bg-custom"},[r("v-td",{attrs:{width:"80",align:"start"}},[t._v(t._s(e.disciplina.codigo))]),r("v-td",{attrs:{width:"300",align:"start"}},[t._v(t._s(e.disciplina.nome))]),r("v-td",{attrs:{width:"45"}},[t._v(t._s(e.letra))]),r("v-td",{attrs:{width:"55"}}),r("v-td",{attrs:{width:"180"}}),r("v-td",{attrs:{width:"120"}}),r("v-td",{attrs:{width:"120"}})],1),t._l(e.conflitos,(function(o){return r("tr",{key:e.id+o.label+o.curso.id},[r("v-td",{attrs:{width:"80"}}),r("v-td",{attrs:{width:"300"}}),r("v-td",{attrs:{width:"45"}}),r("v-td",{attrs:{width:"55",title:o.curso.nome}},[t._v(t._s(o.curso.codigo))]),r("v-td",{attrs:{width:"180",align:"start"}},[t._v(t._s(o.label))]),r("v-td",{attrs:{width:"120",title:o.siga}},[t._v(t._s(o.siga))]),r("v-td",{attrs:{width:"120",title:o.sistema}},[t._v(t._s(o.sistema))])],1)}))]})),t.turmasConflitosOrdered.length?t._e():r("tr",[r("v-td",{attrs:{width:"900"}},[r("b",[t._v("Nenhum conflito encontrado.")]),t._v("\n              Certifiqui-se de selecionar um arquivo correspondente com o plano atual e o periodo\n              selecionado.\n            ")])],1)]},proxy:!0}])})],1),r("Card",{attrs:{title:"Validar pedidos"},scopedSlots:t._u([{key:"body",fn:function(){return[r("VSelect",{attrs:{label:"Perído",validation:t.$v.form.periodo},model:{value:t.form.periodo,callback:function(r){t.$set(t.form,"periodo",t._n(r))},expression:"form.periodo"}},t._l(t.PeriodosLetivos,(function(t){return r("VOption",{key:t.id+t.nome,attrs:{value:t.id,text:t.nome}})})),1),r("VInputFile",{attrs:{label:"Arquivo do plano SIGA (.csv)",validation:t.$v.form.file,accept:".csv"},model:{value:t.form.file,callback:function(r){t.$set(t.form,"file",r)},expression:"form.file"}})]},proxy:!0},{key:"footer",fn:function(){return[r("BaseButton",{attrs:{template:"Salvar",title:"Iniciar"},on:{click:t.handleCompareTurmas}}),r("BaseButton",{attrs:{template:"cancelar"},on:{click:t.clearForm}})]},proxy:!0}])})],1),r("ModalAjuda",{ref:"modalAjuda"},[r("li",{staticClass:"list-group-item"},[r("b",[t._v("Visualizar conteúdo:")]),t._v("\n      Preencha o cartão à direita com o período do plano atual que deseja validar, em seguida\n      selecione o arquivo (.csv) de plano gerado pelo SIGA para o período correspondente. E para\n      finalizar clique no botão iniciar\n      "),r("font-awesome-icon",{staticClass:"icon-blue",attrs:{icon:["fas","check"]}}),t._v("\n      .\n    ")],1),r("li",{staticClass:"list-group-item"},[r("b",[t._v("Limpar formulário:")]),t._v("\n      No cartão à direita, clique em Cancelar\n      "),r("font-awesome-icon",{staticClass:"icon-gray",attrs:{icon:["fas","times"]}}),t._v("\n      , para limpar as informações.\n    ")],1)])],1)},a=[],i=(e("8e6e"),e("456d"),e("ac4d"),e("8a81"),e("5df3"),e("1c4c"),e("7f7f"),e("6b54"),e("87b3"),e("7514"),e("ac6a"),e("ade3")),n=(e("20d6"),e("96cf"),e("1da1")),s=e("2f62"),l=e("9429"),c=e("d4b9"),u=e("b5ae"),d=e("eaf8"),f=e("348f"),p=e("a91e"),v=e("9165"),h=e("25df"),m=e("d027");function g(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,o)}return e}function b(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?g(Object(e),!0).forEach((function(r){Object(i["a"])(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):g(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function O(t,r){var e="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=C(t))||r&&t&&"number"===typeof t.length){e&&(t=e);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,n=!0,s=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return n=t.done,t},e:function(t){s=!0,i=t},f:function(){try{n||null==e.return||e.return()}finally{if(s)throw i}}}}function C(t,r){if(t){if("string"===typeof t)return A(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?A(t,r):void 0}}function A(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,o=new Array(r);e<r;e++)o[e]=t[e];return o}var y={name:"ValidaçãoLançamentoSIGA",components:{Card:h["b"],ModalAjuda:m["a"],VSelect:h["m"],VOption:h["l"],VInputFile:h["i"]},mixins:[v["d"],v["e"]],data:function(){return{form:{periodo:1,filePlano:null},turmasConflitos:[],ordenacaoConflitos:{order:"disciplina.codigo",type:"asc"}}},validations:{form:{periodo:{required:u["required"],integer:u["integer"]},file:{required:u["required"]}}},methods:{clearForm:function(){var t=this;this.form.periodo=1,this.form.file=null,this.$nextTick((function(){return t.$v.$reset()}))},handleCompareTurmas:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var r,e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$v.form.$touch(),!this.$v.form.$anyError){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,this.setLoading({type:"partial",value:!0}),t.next=7,Object(d["g"])(this.form.file);case 7:r=t.sent,Object(f["d"])(r),e=this.normalizeTurmasEPedidosSIGA(r,this.form.periodo),this.searchConflitos(e,this.form.periodo),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](3),console.log(t.t0),this.pushNotification({type:"error"});case 17:return t.prev=17,this.setLoading({type:"partial",value:!1}),t.finish(17);case 20:case"end":return t.stop()}}),t,this,[[3,13,17,20]])})));function r(){return t.apply(this,arguments)}return r}(),normalizeTurmasEPedidosSIGA:function(t,r){var e,o=this,a=Object(f["a"])(t[0]),i=[],n={},s=O(t);try{var l=function(){var t=e.value,s=Object(f["c"])(t,a,null,r);if(!s)return"continue";s.pedidosSIGA=[];var l=Object(f["b"])(t,a,null);if(l){var c=l.vagasOferecidas,u=l.vagasOcupadas;l.totalVagas=c+u}if(o.turmasAreEqual(n,s)){if(l){var d=i[i.length-1].pedidosSIGA.findIndex((function(t){return t.Curso===l.Curso}));-1===d&&i[i.length-1].pedidosSIGA.push(l)}}else l&&s.pedidosSIGA.push(l),i.push(s),n=b({},s)};for(s.s();!(e=s.n()).done;)l()}catch(c){s.e(c)}finally{s.f()}return i},searchConflitos:function(t,r){var e=this;this.turmasConflitos=[];var o=[],a=this.AllTurmas.filter((function(t){return t.periodo===r&&15!=t.disciplina.Perfil}));a.forEach((function(r){var a=t.find((function(t){return r.Disciplina==t.Disciplina&&r.letra==t.letra})),i=b(b({},r),{},{conflitos:[]});if(!a)return i.conflitos.push({label:"Turma existe apenas no sistema",siga:"-",sistema:"-",curso:Object(p["a"])({codigo:"-"})}),void o.push(i);if(e.docentesAreEqual(r,a)||i.conflitos.push({label:"Docentes diferentes",siga:e.generateDocentesText(a.Docente1,a.Docente2),sistema:e.generateDocentesText(r.Docente1,r.Docente2),curso:Object(p["a"])({codigo:"-"})}),e.horariosAreEqual(r,a)||i.conflitos.push({label:"Horarios diferentes",siga:e.generateHorariosText(a.Horario1,a.Horario2),sistema:e.generateHorariosText(r.Horario1,r.Horario2),curso:Object(p["a"])({codigo:"-"})}),!Object(l["a"])(e.disciplinasGradeDCC1Periodo,["Disciplina",r.Disciplina])){var n=e.Pedidos[r.id]||[];a.pedidosSIGA.forEach((function(t){var r=n.find((function(r){return r.Curso==t.Curso}));if(r){var o=r.vagasPeriodizadas+r.vagasNaoPeriodizadas;o==t.totalVagas||i.conflitos.push({label:"Pedido com valores diferentes",siga:t.totalVagas,sistema:0==o?"-":o,curso:e.AllCursos.find((function(t){return t.id===r.Curso}))})}else i.conflitos.push({label:"Pedido não existe no sistema",siga:t.totalVagas,sistema:"-",curso:e.AllCursos.find((function(r){return r.id===t.Curso}))})})),n.filter((function(t){return 0!=t.vagasPeriodizadas||0!=t.vagasNaoPeriodizadas})).forEach((function(t){var r=a.pedidosSIGA.find((function(r){return t.Curso==r.Curso}));r||i.conflitos.push({label:"Pedido não existe no SIGA",siga:"-",sistema:t.vagasPeriodizadas+t.vagasNaoPeriodizadas,curso:e.AllCursos.find((function(r){return r.id===t.Curso}))})}))}i.conflitos.length&&o.push(i)})),this.turmasConflitos=o},turmasAreEqual:function(t,r){return t.letra===r.letra&&t.Disciplina===r.Disciplina&&t.Horario1===r.Horario1&&t.Horario2===r.Horario2},docentesAreEqual:function(t,r){return t.Docente1==r.Docente1&&t.Docente2==r.Docente2||t.Docente1==r.Docente2&&t.Docente2==r.Docente1},horariosAreEqual:function(t,r){return t.Horario1==r.Horario1&&t.Horario2==r.Horario2||t.Horario1==r.Horario2&&t.Horario2==r.Horario1||(null==t.Horario1&&(t.Horario2==r.Horario1||t.Horario2==r.Horario2)||(null==r.Horario1&&(r.Horario2==t.Horario1||r.Horario2==t.Horario2)||(null==t.Horario2&&(t.Horario1==r.Horario1||t.Horario1==r.Horario2)||null==r.Horario2&&(r.Horario1==t.Horario1||r.Horario1==t.Horario2))))}},computed:b(b({},Object(s["c"])(["AllCursos","AllTurmas","PeriodosLetivos","Pedidos","DisciplinasGrades"])),{},{turmasConflitosOrdered:function(){var t=this.ordenacaoConflitos,r=t.order,e=t.type;return Object(c["a"])(this.turmasConflitos,r,e)},disciplinasGradeDCC1Periodo:function(){var t=this.DisciplinasGrades.filter((function(t){return 1===t.periodo})),r=[];return t.forEach((function(t){var e=r.find((function(r){return r.Disciplina===t.Disciplina}));e||r.push(b({},t))})),r}})},D=y,j=e("2877"),S=Object(j["a"])(D,o,a,!1,null,null,null);r["default"]=S.exports},d2c8:function(t,r,e){var o=e("aae3"),a=e("be13");t.exports=function(t,r,e){if(o(r))throw TypeError("String#"+e+" doesn't accept regex!");return String(a(t))}}}]);
//# sourceMappingURL=chunk-44fea651.272d2bf7.js.map