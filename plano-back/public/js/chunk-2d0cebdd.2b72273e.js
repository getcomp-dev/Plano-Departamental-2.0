(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cebdd"],{"616b":function(i,e,t){"use strict";t.r(e);var r=function(){var i=this,e=i._self._c;return e("div",{staticClass:"page-content"},[e("div",{staticClass:"flex flex-column flex-grow-1"},[e("NavTab",{attrs:{currentTab:i.currentTab,allTabs:["DCC","Outros"]},on:{"change-tab":function(e){return i.$emit("change-tab",e)}}}),e("div",{staticClass:"div-table"},[e("BaseTable",{attrs:{styles:"height:calc(100vh - 130px)"},scopedSlots:i._u([{key:"thead",fn:function(){return[e("v-th-ordination",{attrs:{currentOrder:i.ordenacaoDisciplinasMain,orderToCheck:"periodo",width:"70",title:"Período letivo"}},[i._v("\n            Período\n          ")]),e("v-th-ordination",{attrs:{currentOrder:i.ordenacaoDisciplinasMain,orderToCheck:"disciplina.codigo",width:"80",align:"start",title:"Código da Disciplina"}},[i._v("\n            Código\n          ")]),e("v-th-ordination",{attrs:{currentOrder:i.ordenacaoDisciplinasMain,orderToCheck:"disciplina.nome",width:"400",align:"start",title:"Nome da Disciplina"}},[i._v("\n            Disciplina\n          ")]),e("v-th-ordination",{attrs:{currentOrder:i.ordenacaoDisciplinasMain,orderToCheck:"obrigatoria",width:"70",title:"Disciplina Obrigatória na Grade"}},[i._v("\n            Obrigatória\n          ")])]},proxy:!0},{key:"tbody",fn:function(){return[i._l(i.DisciplinaGradesOrdered,(function(t){return e("tr",{key:t.Disciplina,class:["clickable",{"bg-custom":i.isEven(t.periodo)},{"bg-selected":i.disciplinaSelectedId===t.Disciplina}],on:{click:function(e){return i.handleClickInDisciplina(t)}}},[15!==t.periodo?e("v-td",{attrs:{width:"70"}},[i._v("\n              "+i._s(t.periodo)+"\n            ")]):e("v-td",{attrs:{width:"70"}},[i._v("-")]),e("v-td",{attrs:{width:"80",align:"start"}},[i._v(i._s(t.disciplina.codigo))]),e("v-td",{attrs:{width:"400",align:"start"}},[i._v(i._s(t.disciplina.nome))]),t.obrigatoria?e("v-td",{attrs:{width:"70"}},[i._v("Sim")]):e("v-td",{attrs:{width:"70"}},[i._v("-")])],1)})),i.hasGradeSelected?i.DisciplinaGradesOrdered.length?i._e():e("tr",[e("v-td",{attrs:{width:"620",colspan:"3"}},[e("b",[i._v("Nenhuma disciplina encontrada")]),i._v("\n              na grade selecionada.\n            ")])],1):e("tr",[e("v-td",{attrs:{width:"620",colspan:"3"}},[e("b",[i._v("Nenhuma disciplina encontrada")]),i._v("\n              , selecione uma grade.\n            ")])],1)]},proxy:!0}])})],1)],1),e("Card",{attrs:{title:"Disciplinas",width:"420"},scopedSlots:i._u([{key:"body",fn:function(){return[e("div",{staticClass:"row"},[e("div",{staticClass:"col-8"},[e("VSelect",{attrs:{label:"Curso"},on:{change:i.handleSelectCursos},model:{value:i.currentCursoId,callback:function(e){i.currentCursoId=e},expression:"currentCursoId"}},[i.CursosOptions.length?i._e():e("VOption",{attrs:{text:"Nenhum cursos encontrado"}}),i._l(i.CursosOptions,(function(i){return e("VOption",{key:i.nome+i.id,attrs:{value:i.id,text:i.nome}})}))],2)],1),e("div",{staticClass:"col"},[e("VSelect",{attrs:{label:"Grade",disabled:!i.hasCursoSelected},on:{change:i.handleSelectGrade},model:{value:i.currentGradeId,callback:function(e){i.currentGradeId=e},expression:"currentGradeId"}},[i.GradesOptionsFiltred.length?i._e():e("VOption",{attrs:{text:"Nenhuma grade encontrada"}}),i._l(i.GradesOptionsFiltred,(function(i){return e("VOption",{key:i.id+i.nome,attrs:{value:i.id,text:i.nome}})}))],2)],1)]),e("div",{staticClass:"w-100 border my-2"}),e("VSelect",{attrs:{label:"Disciplina",validation:i.$v.disciplinaGradeForm.Disciplina,disabled:!i.hasGradeSelected},on:{change:i.handleSelectDisciplina},model:{value:i.disciplinaGradeForm.Disciplina,callback:function(e){i.$set(i.disciplinaGradeForm,"Disciplina",e)},expression:"disciplinaGradeForm.Disciplina"}},[i.DisciplinasOptions.length?i._e():e("VOption",{attrs:{text:"Nenhuma disciplina encontrada"}}),i._l(i.DisciplinasOptions,(function(i){return e("VOption",{key:i.id+i.nome,attrs:{value:i.id,text:i.nome}})}))],2),e("div",{staticClass:"row"},[e("div",{staticClass:"col-4"},[e("VSelect",{attrs:{label:"Código",validation:i.$v.disciplinaGradeForm.Disciplina,disabled:!i.hasGradeSelected},on:{change:i.handleSelectDisciplina},model:{value:i.disciplinaGradeForm.Disciplina,callback:function(e){i.$set(i.disciplinaGradeForm,"Disciplina",e)},expression:"disciplinaGradeForm.Disciplina"}},[i.DisciplinasOptions.length?i._e():e("VOption",{attrs:{text:"Nenhuma disciplina encontrada"}}),i._l(i.DisciplinasOptions,(function(i){return e("VOption",{key:i.id+i.nome,attrs:{value:i.id,text:i.codigo}})}))],2)],1),e("div",{staticClass:"col-3"},[e("VInput",{attrs:{inputType:"number",label:"Período",validation:i.$v.disciplinaGradeForm.periodo,min:1,disabled:!i.hasGradeSelected},model:{value:i.disciplinaGradeForm.periodo,callback:function(e){i.$set(i.disciplinaGradeForm,"periodo",i._n(e))},expression:"disciplinaGradeForm.periodo"}})],1),e("div",{staticClass:"col-3"},[e("VSelect",{attrs:{label:"Obrigatória",validation:i.$v.disciplinaGradeForm.obrigatoria,disabled:!i.hasDisciplinaSelected},on:{change:i.handleSelectObrigatoria},model:{value:i.disciplinaGradeForm.obrigatoria,callback:function(e){i.$set(i.disciplinaGradeForm,"obrigatoria",e)},expression:"disciplinaGradeForm.obrigatoria"}},[i.DisciplinasOptions.length?i._e():e("VOption",{attrs:{text:"-"}}),i._l(i.obrigatoriaOpcoes,(function(i){return e("VOption",{key:i,attrs:{text:i,value:i}})}))],2)],1),e("div",{staticClass:"col"},[e("BaseButton",{staticClass:"btn-append",staticStyle:{"margin-top":"23px"},attrs:{disabled:!i.hasGradeSelected||!i.isEditDisciplina,template:"salvar",title:"Atualizar período da disciplina"},on:{click:i.handleUpdateDisciplinaGrade}})],1)])]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{attrs:{template:"adicionar",title:"Adicionar à Grade",disabled:!i.hasGradeSelected||i.isEditDisciplina},on:{click:i.handleCreateDisciplinaGrade}}),e("BaseButton",{attrs:{template:"deletar",title:"Deletar Disciplina",disabled:!i.hasGradeSelected||!i.isEditDisciplina},on:{click:function(e){return i.$refs.modalDelete.open()}}}),e("BaseButton",{attrs:{template:"cancelar",disabled:!i.hasGradeSelected},on:{click:i.clearDisciplina}})]},proxy:!0}])}),e("ModalDelete",{ref:"modalDelete",attrs:{isDeleting:i.isEditDisciplina},on:{"btn-deletar":i.handleDeleteDisciplinaGrade}},[i.isEditDisciplina?e("li",{staticClass:"list-group-item"},[e("span",[i._v("\n        Tem certeza que deseja excluír a disciplina\n        "),e("b",[i._v(i._s(i.disciplinaGradeForm.disciplina.nome))]),i._v("\n        ?\n      ")])]):e("li",{staticClass:"list-group-item"},[i._v("Nenhuma disciplina selecionada.")])])],1)},a=[],n=(t("ac4d"),t("8a81"),t("5df3"),t("1c4c"),t("7f7f"),t("6b54"),t("87b3"),t("8e6e"),t("ac6a"),t("456d"),t("96cf"),t("1da1")),s=t("ade3"),c=(t("7514"),t("2f62")),o=t("5c8a"),l=t("d4b9"),d=t("b5ae"),p=t("a91e"),u=t("d027"),h=t("25df");function b(i,e){var t="undefined"!==typeof Symbol&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=f(i))||e&&i&&"number"===typeof i.length){t&&(i=t);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(i){throw i},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,c=!1;return{s:function(){t=t.call(i)},n:function(){var i=t.next();return s=i.done,i},e:function(i){c=!0,n=i},f:function(){try{s||null==t.return||t.return()}finally{if(c)throw n}}}}function f(i,e){if(i){if("string"===typeof i)return v(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);return"Object"===t&&i.constructor&&(t=i.constructor.name),"Map"===t||"Set"===t?Array.from(i):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?v(i,e):void 0}}function v(i,e){(null==e||e>i.length)&&(e=i.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=i[t];return r}function m(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),t.push.apply(t,r)}return t}function g(i){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?m(Object(t),!0).forEach((function(e){Object(s["a"])(i,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(t,e))}))}return i}var D={name:"DisciplinasGradesContent",components:{Card:h["b"],ModalDelete:u["b"],NavTab:h["e"],VInput:h["h"],VSelect:h["m"],VOption:h["l"]},props:{currentTab:{type:String,required:!0},arraysData:{type:Object,required:!0,validator:function(i){return"DisciplinasGrades"in i&&"Grades"in i&&"Cursos"in i}},disciplinaGradeServices:{type:Object,required:!0,validator:function(i){return"create"in i&&"update"in i&&"delete"in i}}},data:function(){return{disciplinaGradeForm:Object(p["c"])(),gradeForm:Object(p["e"])(),currentGradeId:null,currentCursoId:null,currentDisciplina:null,disciplinaSelectedId:null,ordenacaoDisciplinasMain:{order:"periodo",type:"asc"},obrigatoriaOpcoes:["Não","Sim"]}},validations:{disciplinaGradeForm:{periodo:{required:d["required"],integer:d["integer"],maxValue:Object(d["maxValue"])(15),minValue:Object(d["minValue"])(1)},Disciplina:{required:d["required"]},obrigatoria:{required:d["required"]}}},methods:{handleSelectCursos:function(){this.clearDisciplina(),this.clearGradeForm(),this.currentGradeId=null,this.currentDisciplina=null},handleSelectGrade:function(){this.clearDisciplina(),this.currentDisciplina=null,this.currentGradeId&&this.showGrade(this.currentGradeId)},handleSelectDisciplina:function(){var i=this;this.currentDisciplina=this.disciplinaGradeForm.Disciplina;var e=this.AllDisciplinas.find((function(e){return e.id===i.disciplinaGradeForm.Disciplina}));if(e){this.disciplinaGradeForm.disciplina=g({},e),this.disciplinaGradeForm.Grade=this.currentGradeId,this.disciplinaGradeForm.obrigatoria=this.obrigatoriaOpcoes[this.isDisciplinaObrigatoria(this.disciplinaGradeForm.disciplina)];var t=this.DisciplinaGradesFiltred.find((function(i){return i.Disciplina===e.id}));t?(this.disciplinaSelectedId=e.id,this.disciplinaGradeForm.periodo=t.periodo):this.clearClick()}},handleSelectObrigatoria:function(){return this.currentObrigatoria=this.disciplinaGradeForm.obrigatoria},isDisciplinaObrigatoria:function(i){if(i){var e,t=b(this.DisciplinaGradesOrdered);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(r.disciplina.id===i.id)return r.obrigatoria}}catch(a){t.e(a)}finally{t.f()}}},handleClickInDisciplina:function(i){this.currentDisciplina=this.disciplinaGradeForm.Disciplina,this.disciplinaSelectedId=i.Disciplina,this.showGrade(this.currentGradeId),this.showDisciplina(i)},clearClick:function(){this.disciplinaSelectedId=null},clearGradeForm:function(){this.gradeForm=Object(p["e"])()},clearDisciplina:function(){var i=this;this.clearClick(),this.disciplinaGradeForm=Object(p["c"])(),this.$nextTick((function(){return i.$v.$reset()}))},showGrade:function(i){var e=this.arraysData.Grades.find((function(e){return e.id===i}));this.gradeForm=Object(o["a"])(e)},showDisciplina:function(i){this.disciplinaGradeForm=Object(o["a"])(i),this.disciplinaGradeForm.obrigatoria=this.obrigatoriaOpcoes[this.isDisciplinaObrigatoria(this.disciplinaGradeForm.disciplina)],this.disciplinaGradeForm.Grade=this.gradeForm.id},converteObrigatoriaParaNum:function(i){if(i)return"number"===typeof i?i:"Sim"===i?1:0},isEven:function(i){return i%2===0},handleCreateDisciplinaGrade:function(){var i=Object(n["a"])(regeneratorRuntime.mark((function i(){var e,t;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(this.$v.disciplinaGradeForm.$touch(),!this.$v.disciplinaGradeForm.$anyError){i.next=3;break}return i.abrupt("return");case 3:return i.prev=3,this.setLoading({type:"partial",value:!0}),e=g({},this.disciplinaGradeForm),e.obrigatoria=this.converteObrigatoriaParaNum(e.obrigatoria),i.next=9,this.disciplinaGradeServices.create(e);case 9:t=i.sent,this.disciplinaSelectedId=t.DisciplinaGrade.Disciplina,this.$notify({group:"general",title:"Sucesso!",text:"A disciplina <b>".concat(e.disciplina.nome,"</b> foi adicionada à grade\n          <b>").concat(this.gradeForm.nome,"</b>"),type:"success"}),i.next=17;break;case 14:i.prev=14,i.t0=i["catch"](3),this.$notify({group:"general",title:"Erro!",text:"Erro ao incluir disciplina, verifique se a disciplina já não existe na grade",type:"error"});case 17:return i.prev=17,this.setLoading({type:"partial",value:!1}),i.finish(17);case 20:case"end":return i.stop()}}),i,this,[[3,14,17,20]])})));function e(){return i.apply(this,arguments)}return e}(),handleUpdateDisciplinaGrade:function(){var i=Object(n["a"])(regeneratorRuntime.mark((function i(){var e;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(this.$v.disciplinaGradeForm.$touch(),!this.$v.disciplinaGradeForm.$anyError){i.next=3;break}return i.abrupt("return");case 3:return i.prev=3,this.setLoading({type:"partial",value:!0}),e=g({},this.disciplinaGradeForm),e.obrigatoria=this.converteObrigatoriaParaNum(e.obrigatoria),i.next=9,this.disciplinaGradeServices.update(e.Disciplina,e.Grade,e);case 9:this.$notify({group:"general",title:"Sucesso!",text:"A disciplina <b>".concat(this.disciplinaGradeForm.disciplina.nome,"</b> foi atualizada!"),type:"success"}),i.next=15;break;case 12:i.prev=12,i.t0=i["catch"](3),this.$notify({group:"general",title:"Erro!",text:"Erro ao atualizar disciplina",type:"error"});case 15:return i.prev=15,this.setLoading({type:"partial",value:!1}),i.finish(15);case 18:case"end":return i.stop()}}),i,this,[[3,12,15,18]])})));function e(){return i.apply(this,arguments)}return e}(),handleDeleteDisciplinaGrade:function(){var i=Object(n["a"])(regeneratorRuntime.mark((function i(){var e;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,this.setLoading({type:"partial",value:!0}),e=g({},this.disciplinaGradeForm),e.obrigatoria=this.converteObrigatoriaParaNum(e.obrigatoria),i.next=6,this.disciplinaGradeServices.delete(e.Disciplina,e.Grade,e);case 6:this.$notify({group:"general",title:"Sucesso!",text:"A disciplina <b>".concat(e.disciplina.nome,"</b> foi excluída da grade\n           <b>").concat(this.gradeForm.nome,"</b>"),type:"success"}),this.clearClick(),i.next=13;break;case 10:i.prev=10,i.t0=i["catch"](0),this.$notify({group:"general",title:"Erro!",text:"Erro ao excluir disciplina",type:"error"});case 13:return i.prev=13,this.setLoading({type:"partial",value:!1}),i.finish(13);case 16:case"end":return i.stop()}}),i,this,[[0,10,13,16]])})));function e(){return i.apply(this,arguments)}return e}()},computed:g(g({},Object(c["c"])(["AllDisciplinas"])),{},{hasCursoSelected:function(){return null!=this.currentCursoId},hasGradeSelected:function(){return null!=this.currentGradeId},hasDisciplinaSelected:function(){return null!=this.currentDisciplina},isEditDisciplina:function(){return null!==this.disciplinaSelectedId},DisciplinaGradesOrdered:function(){var i=this.ordenacaoDisciplinasMain,e=i.order,t=i.type;return Object(l["a"])(this.DisciplinaGradesFiltred,e,t)},DisciplinaGradesFiltred:function(){var i=this;return this.arraysData.DisciplinasGrades.filter((function(e){return i.currentGradeId===e.Grade}))},GradesOptionsFiltred:function(){var i=this;return this.arraysData.Grades.filter((function(e){return e.Curso==i.currentCursoId}))},DisciplinasOptions:function(){return Object(l["a"])(this.AllDisciplinas,"nome")},CursosOptions:function(){return Object(l["a"])(this.arraysData.Cursos,"nome")}})},G=D,O=t("2877"),y=Object(O["a"])(G,r,a,!1,null,null,null);e["default"]=y.exports}}]);
//# sourceMappingURL=chunk-2d0cebdd.2b72273e.js.map