(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1082fbdf"],{"15fe":function(e,t,r){},"28a5":function(e,t,r){"use strict";var n=r("aae3"),a=r("cb7c"),i=r("ebd6"),o=r("0390"),c=r("9def"),s=r("5f1b"),u=r("520a"),l=r("79e5"),f=Math.min,d=[].push,p="split",b="length",v="lastIndex",h=4294967295,m=!l((function(){RegExp(h,"y")}));r("214f")("split",2,(function(e,t,r,l){var g;return g="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[b]||2!="ab"[p](/(?:ab)*/)[b]||4!="."[p](/(.?)(.?)/)[b]||"."[p](/()()/)[b]>1||""[p](/.?/)[b]?function(e,t){var a=String(this);if(void 0===e&&0===t)return[];if(!n(e))return r.call(a,e,t);var i,o,c,s=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,p=void 0===t?h:t>>>0,m=new RegExp(e.source,l+"g");while(i=u.call(m,a)){if(o=m[v],o>f&&(s.push(a.slice(f,i.index)),i[b]>1&&i.index<a[b]&&d.apply(s,i.slice(1)),c=i[0][b],f=o,s[b]>=p))break;m[v]===i.index&&m[v]++}return f===a[b]?!c&&m.test("")||s.push(""):s.push(a.slice(f)),s[b]>p?s.slice(0,p):s}:"0"[p](void 0,0)[b]?function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)}:r,[function(r,n){var a=e(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,a,n):g.call(String(a),r,n)},function(e,t){var n=l(g,e,this,t,g!==r);if(n.done)return n.value;var u=a(e),d=String(this),p=i(u,RegExp),b=u.unicode,v=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(m?"y":"g"),O=new p(m?u:"^(?:"+u.source+")",v),y=void 0===t?h:t>>>0;if(0===y)return[];if(0===d.length)return null===s(O,d)?[d]:[];var j=0,w=0,x=[];while(w<d.length){O.lastIndex=m?w:0;var S,A=s(O,m?d:d.slice(w));if(null===A||(S=f(c(O.lastIndex+(m?0:w)),d.length))===j)w=o(d,w,b);else{if(x.push(d.slice(j,w)),x.length===y)return x;for(var C=1;C<=A.length-1;C++)if(x.push(A[C]),x.length===y)return x;w=j=S}}return x.push(d.slice(j)),x}]}))},"348f":function(e,t,r){"use strict";r.d(t,"b",(function(){return m})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return g})),r.d(t,"a",(function(){return O}));r("4f37"),r("6762"),r("2fdb"),r("28a5");var n=r("3835"),a=r("4360"),i=r("0a94"),o=r("9429"),c=r("eaf8");function s(e,t,r,n){var a=Object(c["c"])({periodo:n||null,Plano:r||null,letra:e[t.letra]||null});return a.letra?(u(a,e[t.disciplinaCod]),a.Disciplina?(l(a,e[t.horarioESala]),a.turno1?(f(a,e[t.docentes]),a):null):null):null}function u(e,t){if(t){var r=Object(i["a"])(a["a"].getters.AllDisciplinas,["codigo",t]);r?(e.Disciplina=r.id,e.creditoTotal=r.creditoTotal):e.Disciplina=null}}function l(e,t){if(t){var r=t.split(";"),a=Object(n["a"])(r,2),i=a[0],o=a[1];e.Horario1=b(i),e.creditoTotal>=4&&(e.Horario2=b(o)),e.turno1=d(e.Horario1,e.Horario2),"EAD"!==e.turno1&&(e.Sala1=h(i),e.Sala2=h(o))}}function f(e,t){if(t){var r=t.split(";"),a=Object(n["a"])(r,2),i=a[0],o=a[1];e.Docente1=p(i),e.Docente2=p(o)}}function d(e,t){return e||t?31===e?"EAD":Object(o["a"])(a["a"].getters.HorariosNoturno,["id",e])||Object(o["a"])(a["a"].getters.HorariosNoturno,["id",t])?"Noturno":"Diurno":null}function p(e){if(!e)return null;var t=Object(i["a"])(a["a"].getters.AllDocentes,(function(t){return Object(c["f"])(t.nome)===Object(c["f"])(e)}));return t?t.id:null}function b(e){if(!e)return null;var t=e.split(","),r=Object(n["a"])(t,3),o=r[0],c=r[1],s=r[2],u=v(o,c);if(u){var l=Object(i["a"])(a["a"].getters.AllHorarios,["horario",u]);return l?l.id:null}return s.includes("EAD")?31:null}function v(e,t){if(!e||!t)return null;var r=null;switch(e.trim().substring(0,3)){case"SEG":r="2a";break;case"TER":r="3a";break;case"QUA":r="4a";break;case"QUI":r="5a";break;case"SEX":r="6a";break;case"SAB":return"EAD";default:return null}var a=t.split("AS"),i=Object(n["a"])(a,2),o=i[0],c=i[1];if(!o||!c)return null;var s=o.trim().substring(0,2),u=c.trim().substring(0,2);return"".concat(r," ").concat(s,"-").concat(u)}function h(e){if(!e)return null;var t=e.split(","),r=Object(n["a"])(t,3),o=r[2],s=Object(c["f"])(o),u=Object(i["a"])(a["a"].getters.AllSalas,(function(e){var t=Object(c["f"])(e.nome);return s.includes(t)}));return u?u.id:null}function m(e,t,r){var n={Turma:null,Curso:null,vagasOferecidas:0,vagasOcupadas:0},o=Object(i["a"])(a["a"].getters.AllCursos,["codigo",e[t.cursoCod]]);return n.Curso=o?o.id:null,n.Turma=r,n.vagasOferecidas=parseInt(e[t.vagas1],10),n.vagasOcupadas=parseInt(e[t.vagas2],10),n.Curso?n:null}r("ac6a"),r("456d");function g(e){if(e.length){var t=["DISCIPLINA","DISCIPLINA_COD.","TURMA","CURSO_COD.","CURSO","VAGASOFERECIDAS","VAGASOCUPADAS","HORARIOS","DOCENTES"];if(Object.keys(e[0]).length<t.length)throw new Error("Verifique a integridade e o formato do(s) arquivo(s)")}}function O(e){var t={disciplinaCod:null,letra:null,cursoCod:null,vagas1:null,vagas2:null,horarioESala:null,docentes:null},r=0;for(var n in e){if(1===r)t.disciplinaCod=n;else if(2===r)t.letra=n;else if(3===r)t.cursoCod=n;else if(5===r)t.vagas1=n;else if(6===r)t.vagas2=n;else if(7===r)t.horarioESala=n;else if(8===r){t.docentes=n;break}r++}return t}},3835:function(e,t,r){"use strict";function n(e){if(Array.isArray(e))return e}function a(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done);n=!0)if(r.push(o.value),t&&r.length===t)break}catch(s){a=!0,i=s}finally{try{n||null==c["return"]||c["return"]()}finally{if(a)throw i}}return r}}r.d(t,"a",(function(){return c}));var i=r("06c5");function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return n(e)||a(e,t)||Object(i["a"])(e,t)||o()}},"3b8f":function(e,t,r){"use strict";r("15fe")},"9ae6":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._m(0),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group"},[e._m(1),r("input",{ref:"input1periodo",staticClass:"w-100 form-control-file",attrs:{id:"turmas1",type:"file",accept:".csv"}})])]),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col"},[e._m(2),r("input",{ref:"input3periodo",staticClass:"w-100 form-control-file",attrs:{id:"turmas3",type:"file",accept:".csv"}})])]),r("portal",{attrs:{to:"loading-content"}},[r("BaseButton",{staticClass:"paddingX-20",attrs:{color:"gray",text:"Cancelar",disable:e.abortImport},on:{click:function(t){e.abortImport=!0,e.closeModal()}}})],1)],1)},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",{staticClass:"alert alert-secondary"},[e._v("\n    Selecione arquivos\n    "),r("b",[e._v(".csv")]),e._v("\n    para importar as turmas de cada periodo do novo plano. Note que o formato do arquivo requerido\n    é o relatorio de plano departamental gerado pelo\n    "),r("a",{attrs:{href:"https://siga.ufjf.br",target:"_blank"}},[e._v("SIGA")]),e._v("\n    na página:\n    "),r("b",[e._v("Acadêmico > Consultas > Plano Departamental")]),e._v("\n    . E você pode cancelar o processo durante a importação apertando a tecla esc.\n  ")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"turmas1"}},[e._v("\n        Turmas do\n        "),r("b",[e._v("primeiro")]),e._v("\n        período:\n      ")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"turmas2"}},[e._v("\n        Turmas do\n        "),r("b",[e._v("terceiro")]),e._v("\n        período:\n      ")])}],i=(r("2caf"),r("ac4d"),r("8a81"),r("5df3"),r("1c4c"),r("7f7f"),r("6b54"),r("87b3"),r("1c01"),r("58b2"),r("8e6e"),r("f3e2"),r("d25f"),r("ac6a"),r("456d"),r("3835")),o=(r("96cf"),r("1da1")),c=r("ade3"),s=r("2f62"),u=r("eaf8"),l=r("348f");function f(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=d(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function d(e,t){if(e){if("string"===typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){Object(c["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h={name:"ModalImportPlano",props:{plano:{type:Object,required:!0},closeModal:{type:Function,required:!0}},data:function(){return{abortImport:!1}},mounted:function(){var e=this;document.addEventListener("keydown",(function(t){t.stopPropagation(),"Escape"===t.code&&(e.abortImport=!0)}))},methods:v(v({},Object(s["b"])(["createPlano","deletePlano","createTurma","createPedidoOferecido","initializeProgressBar","updateProgressBar","finishProgressBar"])),{},{handleImportPlano:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a,o,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object(i["a"])(this.$refs.input1periodo.files,1),r=t[0],n=Object(i["a"])(this.$refs.input3periodo.files,1),a=n[0],r||a){e.next=5;break}return this.pushNotification({type:"error",text:"Nenhum arquivo selecionado"}),e.abrupt("return");case 5:return e.prev=5,this.abortImport=!1,e.next=9,Object(u["g"])(r);case 9:return o=e.sent,e.next=12,Object(u["g"])(a);case 12:return c=e.sent,Object(l["d"])(o),Object(l["d"])(c),this.initializeProgressBar({finalValue:o.length+c.length}),e.next=18,this.createPlano({data:this.plano});case 18:return s=e.sent,e.next=21,this.createTurmasFileSIGA(o,s,1);case 21:return e.next=23,this.createTurmasFileSIGA(c,s,3);case 23:this.abortImport?this.pushNotification({type:"warn",text:"Importação do plano foi cancelada"}):(this.closeModal(),this.pushNotification({type:"success",text:"Plano criado e turmas importadas"})),e.next=29;break;case 26:e.prev=26,e.t0=e["catch"](5),this.pushNotification({type:"error",title:"Erro ao criar plano!",text:e.t0.message});case 29:return e.prev=29,e.next=32,this.finishProgressBar();case 32:return e.finish(29);case 33:case"end":return e.stop()}}),e,this,[[5,26,29,33]])})));function t(){return e.apply(this,arguments)}return t}(),createTurmasFileSIGA:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r,n){var a,i,o,c,s,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:a={},i=Object(l["a"])(t[0]),o=f(t),e.prev=5,o.s();case 7:if((c=o.n()).done){e.next=29;break}if(s=c.value,!this.abortImport){e.next=12;break}return this.deletePlano({data:v({},r)}),e.abrupt("break",29);case 12:if(this.updateProgressBar(),u=Object(l["c"])(s,i,r.id,n),u){e.next=16;break}return e.abrupt("continue",27);case 16:if(!this.turmasIsEqual(a,u)){e.next=21;break}return e.next=19,this.handleCreatePedidoOferecido(s,i,a.id);case 19:e.next=27;break;case 21:return e.next=23,this.createTurma({data:u});case 23:return d=e.sent,e.next=26,this.handleCreatePedidoOferecido(s,i,d.id);case 26:a=v({},d);case 27:e.next=7;break;case 29:e.next=34;break;case 31:e.prev=31,e.t0=e["catch"](5),o.e(e.t0);case 34:return e.prev=34,o.f(),e.finish(34);case 37:case"end":return e.stop()}}),e,this,[[5,31,34,37]])})));function t(t,r,n){return e.apply(this,arguments)}return t}(),handleCreatePedidoOferecido:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=Object(l["b"])(t,r,n),!a){e.next=4;break}return e.next=4,this.createPedidoOferecido({data:a}).catch((function(){}));case 4:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}(),turmasIsEqual:function(e,t){return e.letra===t.letra&&e.Disciplina===t.Disciplina}})},m=h,g=(r("3b8f"),r("2877")),O=Object(g["a"])(m,n,a,!1,null,"711e5192",null);t["default"]=O.exports}}]);
//# sourceMappingURL=chunk-1082fbdf.303f88a6.js.map