(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cebdd"],{"616b":function(i,e,t){"use strict";t.r(e);var a=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"page-content"},[t("div",{staticClass:"flex flex-column flex-grow-1"},[t("NavTab",{attrs:{currentTab:i.currentTab,allTabs:["DCC","Outros"]},on:{"change-tab":function(e){return i.$emit("change-tab",e)}}}),t("div",{staticClass:"div-table"},[t("BaseTable",{attrs:{styles:"height:calc(100vh - 130px)"},scopedSlots:i._u([{key:"thead",fn:function(){return[t("v-th-ordination",{attrs:{currentOrder:i.ordenacaoDisciplinasMain,orderToCheck:"periodo",width:"65",title:"Período letivo"}},[i._v("\n            Período\n          ")]),t("v-th-ordination",{attrs:{currentOrder:i.ordenacaoDisciplinasMain,orderToCheck:"disciplina.codigo",width:"80",align:"start",title:"Código da Disciplina"}},[i._v("\n            Código\n          ")]),t("v-th-ordination",{attrs:{currentOrder:i.ordenacaoDisciplinasMain,orderToCheck:"disciplina.nome",width:"400",align:"start",title:"Nome da Disciplina"}},[i._v("\n            Disciplina\n          ")])]},proxy:!0},{key:"tbody",fn:function(){return[i._l(i.DisciplinaGradesOrdered,(function(e){return t("tr",{key:e.Disciplina,class:["clickable",{"bg-custom":i.isEven(e.periodo)},{"bg-selected":i.disciplinaSelectedId===e.Disciplina}],on:{click:function(t){return i.handleClickInDisciplina(e)}}},[t("v-td",{attrs:{width:"65"}},[i._v(i._s(e.periodo))]),t("v-td",{attrs:{width:"80",align:"start"}},[i._v(i._s(e.disciplina.codigo))]),t("v-td",{attrs:{width:"400",align:"start"}},[i._v(i._s(e.disciplina.nome))])],1)})),i.hasGradeSelected?i.DisciplinaGradesOrdered.length?i._e():t("tr",[t("v-td",{attrs:{width:"545",colspan:"3"}},[t("b",[i._v("Nenhuma disciplina encontrada")]),i._v("\n              na grade selecionada.\n            ")])],1):t("tr",[t("v-td",{attrs:{width:"545",colspan:"3"}},[t("b",[i._v("Nenhuma disciplina encontrada")]),i._v("\n              , selecione uma grade.\n            ")])],1)]},proxy:!0}])})],1)],1),t("Card",{attrs:{title:"Disciplinas",width:"420"},scopedSlots:i._u([{key:"body",fn:function(){return[t("div",{staticClass:"row"},[t("div",{staticClass:"col-8"},[t("VSelect",{attrs:{label:"Curso"},on:{change:i.handleSelectCursos},model:{value:i.currentCursoId,callback:function(e){i.currentCursoId=e},expression:"currentCursoId"}},[i.CursosOptions.length?i._e():t("VOption",{attrs:{text:"Nenhum cursos encontrado"}}),i._l(i.CursosOptions,(function(i){return t("VOption",{key:i.nome+i.id,attrs:{value:i.id,text:i.nome}})}))],2)],1),t("div",{staticClass:"col"},[t("VSelect",{attrs:{label:"Grade",disabled:!i.hasCursoSelected},on:{change:i.handleSelectGrade},model:{value:i.currentGradeId,callback:function(e){i.currentGradeId=e},expression:"currentGradeId"}},[i.GradesOptionsFiltred.length?i._e():t("VOption",{attrs:{text:"Nenhuma grade encontrada"}}),i._l(i.GradesOptionsFiltred,(function(i){return t("VOption",{key:i.id+i.nome,attrs:{value:i.id,text:i.nome}})}))],2)],1)]),t("div",{staticClass:"w-100 border my-2"}),t("VSelect",{attrs:{label:"Disciplina",validation:i.$v.disciplinaGradeForm.Disciplina,disabled:!i.hasGradeSelected},on:{change:i.handleSelectDisciplina},model:{value:i.disciplinaGradeForm.Disciplina,callback:function(e){i.$set(i.disciplinaGradeForm,"Disciplina",e)},expression:"disciplinaGradeForm.Disciplina"}},[i.DisciplinasOptions.length?i._e():t("VOption",{attrs:{text:"Nenhuma disciplina encontrada"}}),i._l(i.DisciplinasOptions,(function(i){return t("VOption",{key:i.id+i.nome,attrs:{value:i.id,text:i.nome}})}))],2),t("div",{staticClass:"row"},[t("div",{staticClass:"col-7"},[t("VSelect",{attrs:{label:"Código",validation:i.$v.disciplinaGradeForm.Disciplina,disabled:!i.hasGradeSelected},on:{change:i.handleSelectDisciplina},model:{value:i.disciplinaGradeForm.Disciplina,callback:function(e){i.$set(i.disciplinaGradeForm,"Disciplina",e)},expression:"disciplinaGradeForm.Disciplina"}},[i.DisciplinasOptions.length?i._e():t("VOption",{attrs:{text:"Nenhuma disciplina encontrada"}}),i._l(i.DisciplinasOptions,(function(i){return t("VOption",{key:i.id+i.nome,attrs:{value:i.id,text:i.codigo}})}))],2)],1),t("div",{staticClass:"col-3"},[t("VInput",{attrs:{inputType:"number",label:"Período",validation:i.$v.disciplinaGradeForm.periodo,min:1,disabled:!i.hasGradeSelected},model:{value:i.disciplinaGradeForm.periodo,callback:function(e){i.$set(i.disciplinaGradeForm,"periodo",i._n(e))},expression:"disciplinaGradeForm.periodo"}})],1),t("div",{staticClass:"col"},[t("BaseButton",{staticClass:"btn-append",staticStyle:{"margin-top":"23px"},attrs:{disabled:!i.hasGradeSelected||!i.isEditDisciplina,template:"salvar",title:"Atualizar período da disciplina"},on:{click:i.handleUpdateDisciplinaGrade}})],1)])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{template:"adicionar",title:"Adicionar à Grade",disabled:!i.hasGradeSelected||i.isEditDisciplina},on:{click:i.handleCreateDisciplinaGrade}}),t("BaseButton",{attrs:{template:"deletar",title:"Deletar Disciplina",disabled:!i.hasGradeSelected||!i.isEditDisciplina},on:{click:function(e){return i.$refs.modalDelete.open()}}}),t("BaseButton",{attrs:{template:"cancelar",disabled:!i.hasGradeSelected},on:{click:i.clearDisciplina}})]},proxy:!0}])}),t("ModalDelete",{ref:"modalDelete",attrs:{isDeleting:i.isEditDisciplina},on:{"btn-deletar":i.handleDeleteDisciplinaGrade}},[i.isEditDisciplina?t("li",{staticClass:"list-group-item"},[t("span",[i._v("\n        Tem certeza que deseja excluír a disciplina\n        "),t("b",[i._v(i._s(i.disciplinaGradeForm.disciplina.nome))]),i._v("\n        ?\n      ")])]):t("li",{staticClass:"list-group-item"},[i._v("Nenhuma disciplina selecionada.")])])],1)},r=[],n=(t("1c01"),t("58b2"),t("8e6e"),t("f3e2"),t("ac6a"),t("456d"),t("d25f"),t("96cf"),t("1da1")),s=t("ade3"),c=(t("7514"),t("2f62")),l=t("5c8a"),d=t("d4b9"),o=t("b5ae"),p=t("a91e"),u=t("d027"),h=t("25df");function f(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),t.push.apply(t,a)}return t}function m(i){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?f(Object(t),!0).forEach((function(e){Object(s["a"])(i,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(t,e))}))}return i}var v={name:"DisciplinasGradesContent",components:{Card:h["b"],ModalDelete:u["b"],NavTab:h["f"],VInput:h["i"],VSelect:h["m"],VOption:h["l"]},props:{currentTab:{type:String,required:!0},arraysData:{type:Object,required:!0,validator:function(i){return"DisciplinasGrades"in i&&"Grades"in i&&"Cursos"in i}},disciplinaGradeServices:{type:Object,required:!0,validator:function(i){return"create"in i&&"update"in i&&"delete"in i}}},data:function(){return{disciplinaGradeForm:Object(p["c"])(),gradeForm:Object(p["e"])(),currentGradeId:null,currentCursoId:null,disciplinaSelectedId:null,ordenacaoDisciplinasMain:{order:"periodo",type:"asc"}}},validations:{disciplinaGradeForm:{periodo:{required:o["required"],integer:o["integer"],maxValue:Object(o["maxValue"])(15),minValue:Object(o["minValue"])(1)},Disciplina:{required:o["required"]}}},methods:{handleSelectCursos:function(){this.clearDisciplina(),this.clearGradeForm(),this.currentGradeId=null},handleSelectGrade:function(){this.clearDisciplina(),this.currentGradeId&&this.showGrade(this.currentGradeId)},handleSelectDisciplina:function(){var i=this,e=this.AllDisciplinas.find((function(e){return e.id===i.disciplinaGradeForm.Disciplina}));if(e){this.disciplinaGradeForm.disciplina=m({},e),this.disciplinaGradeForm.Grade=this.currentGradeId;var t=this.DisciplinaGradesFiltred.find((function(i){return i.Disciplina===e.id}));t?(this.disciplinaSelectedId=e.id,this.disciplinaGradeForm.periodo=t.periodo):this.clearClick()}},handleClickInDisciplina:function(i){this.disciplinaSelectedId=i.Disciplina,this.showGrade(this.currentGradeId),this.showDisciplina(i)},clearClick:function(){this.disciplinaSelectedId=null},clearGradeForm:function(){this.gradeForm=Object(p["e"])()},clearDisciplina:function(){var i=this;this.clearClick(),this.disciplinaGradeForm=Object(p["c"])(),this.$nextTick((function(){return i.$v.$reset()}))},showGrade:function(i){var e=this.arraysData.Grades.find((function(e){return e.id===i}));this.gradeForm=Object(l["a"])(e)},showDisciplina:function(i){this.disciplinaGradeForm=Object(l["a"])(i),this.disciplinaGradeForm.Grade=this.gradeForm.id},isEven:function(i){return i%2===0},handleCreateDisciplinaGrade:function(){var i=Object(n["a"])(regeneratorRuntime.mark((function i(){var e,t;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(this.$v.disciplinaGradeForm.$touch(),!this.$v.disciplinaGradeForm.$anyError){i.next=3;break}return i.abrupt("return");case 3:return i.prev=3,this.setLoading({type:"partial",value:!0}),e=m({},this.disciplinaGradeForm),i.next=8,this.disciplinaGradeServices.create(e);case 8:t=i.sent,this.disciplinaSelectedId=t.DisciplinaGrade.Disciplina,this.$notify({group:"general",title:"Sucesso!",text:"A disciplina <b>".concat(e.disciplina.nome,"</b> foi adicionada à grade \n          <b>").concat(this.gradeForm.nome,"</b>"),type:"success"}),i.next=16;break;case 13:i.prev=13,i.t0=i["catch"](3),this.$notify({group:"general",title:"Erro!",text:"Erro ao incluir disciplina, verifique se a disciplina já não existe na grade",type:"error"});case 16:return i.prev=16,this.setLoading({type:"partial",value:!1}),i.finish(16);case 19:case"end":return i.stop()}}),i,this,[[3,13,16,19]])})));function e(){return i.apply(this,arguments)}return e}(),handleUpdateDisciplinaGrade:function(){var i=Object(n["a"])(regeneratorRuntime.mark((function i(){var e;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(this.$v.disciplinaGradeForm.$touch(),!this.$v.disciplinaGradeForm.$anyError){i.next=3;break}return i.abrupt("return");case 3:return i.prev=3,this.setLoading({type:"partial",value:!0}),e=m({},this.disciplinaGradeForm),i.next=8,this.disciplinaGradeServices.update(e.Disciplina,e.Grade,e);case 8:this.$notify({group:"general",title:"Sucesso!",text:"A disciplina <b>".concat(this.disciplinaGradeForm.disciplina.nome,"</b> foi atualizada!"),type:"success"}),i.next=14;break;case 11:i.prev=11,i.t0=i["catch"](3),this.$notify({group:"general",title:"Erro!",text:"Erro ao atualizar disciplina",type:"error"});case 14:return i.prev=14,this.setLoading({type:"partial",value:!1}),i.finish(14);case 17:case"end":return i.stop()}}),i,this,[[3,11,14,17]])})));function e(){return i.apply(this,arguments)}return e}(),handleDeleteDisciplinaGrade:function(){var i=Object(n["a"])(regeneratorRuntime.mark((function i(){var e;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,this.setLoading({type:"partial",value:!0}),e=m({},this.disciplinaGradeForm),i.next=5,this.disciplinaGradeServices.delete(e.Disciplina,e.Grade,e);case 5:this.$notify({group:"general",title:"Sucesso!",text:"A disciplina <b>".concat(e.disciplina.nome,"</b> foi excluída da grade\n           <b>").concat(this.gradeForm.nome,"</b>"),type:"success"}),this.clearClick(),i.next=12;break;case 9:i.prev=9,i.t0=i["catch"](0),this.$notify({group:"general",title:"Erro!",text:"Erro ao excluir disciplina",type:"error"});case 12:return i.prev=12,this.setLoading({type:"partial",value:!1}),i.finish(12);case 15:case"end":return i.stop()}}),i,this,[[0,9,12,15]])})));function e(){return i.apply(this,arguments)}return e}()},computed:m(m({},Object(c["c"])(["AllDisciplinas"])),{},{hasCursoSelected:function(){return null!=this.currentCursoId},hasGradeSelected:function(){return null!=this.currentGradeId},isEditDisciplina:function(){return null!==this.disciplinaSelectedId},DisciplinaGradesOrdered:function(){var i=this.ordenacaoDisciplinasMain,e=i.order,t=i.type;return Object(d["a"])(this.DisciplinaGradesFiltred,e,t)},DisciplinaGradesFiltred:function(){var i=this;return this.arraysData.DisciplinasGrades.filter((function(e){return i.currentGradeId===e.Grade}))},GradesOptionsFiltred:function(){var i=this;return this.arraysData.Grades.filter((function(e){return e.Curso==i.currentCursoId}))},DisciplinasOptions:function(){return Object(d["a"])(this.AllDisciplinas,"nome")},CursosOptions:function(){return Object(d["a"])(this.arraysData.Cursos,"nome")}})},b=v,G=t("2877"),D=Object(G["a"])(b,a,r,!1,null,null,null);e["default"]=D.exports}}]);
//# sourceMappingURL=chunk-2d0cebdd.d7699697.js.map