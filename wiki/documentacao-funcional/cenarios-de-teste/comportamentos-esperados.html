<!DOCTYPE html>
        <html>
        <head>
            <meta charset="UTF-8">
            <title>&#x1f9ea; Cen&aacute;rios de Teste e Comportamentos Esperados</title>
            <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only],
.vscode-high-contrast:not(.vscode-high-contrast-light) img[src$=\#gh-light-mode-only],
.vscode-high-contrast-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

</style>
            
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
<style>
:root {
  --color-note: #0969da;
  --color-tip: #1a7f37;
  --color-warning: #9a6700;
  --color-severe: #bc4c00;
  --color-caution: #d1242f;
  --color-important: #8250df;
}

</style>
<style>
@media (prefers-color-scheme: dark) {
  :root {
    --color-note: #2f81f7;
    --color-tip: #3fb950;
    --color-warning: #d29922;
    --color-severe: #db6d28;
    --color-caution: #f85149;
    --color-important: #a371f7;
  }
}

</style>
<style>
.markdown-alert {
  padding: 0.5rem 1rem;
  margin-bottom: 16px;
  color: inherit;
  border-left: .25em solid #888;
}

.markdown-alert>:first-child {
  margin-top: 0
}

.markdown-alert>:last-child {
  margin-bottom: 0
}

.markdown-alert .markdown-alert-title {
  display: flex;
  font-weight: 500;
  align-items: center;
  line-height: 1
}

.markdown-alert .markdown-alert-title .octicon {
  margin-right: 0.5rem;
  display: inline-block;
  overflow: visible !important;
  vertical-align: text-bottom;
  fill: currentColor;
}

.markdown-alert.markdown-alert-note {
  border-left-color: var(--color-note);
}

.markdown-alert.markdown-alert-note .markdown-alert-title {
  color: var(--color-note);
}

.markdown-alert.markdown-alert-important {
  border-left-color: var(--color-important);
}

.markdown-alert.markdown-alert-important .markdown-alert-title {
  color: var(--color-important);
}

.markdown-alert.markdown-alert-warning {
  border-left-color: var(--color-warning);
}

.markdown-alert.markdown-alert-warning .markdown-alert-title {
  color: var(--color-warning);
}

.markdown-alert.markdown-alert-tip {
  border-left-color: var(--color-tip);
}

.markdown-alert.markdown-alert-tip .markdown-alert-title {
  color: var(--color-tip);
}

.markdown-alert.markdown-alert-caution {
  border-left-color: var(--color-caution);
}

.markdown-alert.markdown-alert-caution .markdown-alert-title {
  color: var(--color-caution);
}

</style>
        
        </head>
        <body class="vscode-body vscode-light">
            <h1 id="-cenÃ¡rios-de-teste-e-comportamentos-esperados">ğŸ§ª CenÃ¡rios de Teste e Comportamentos Esperados</h1>
<h2 id="-sumÃ¡rio">ğŸ“‹ SumÃ¡rio</h2>
<ul>
<li><a href="#-sum%C3%A1rio">ğŸ“‹ SumÃ¡rio</a></li>
<li><a href="#-objetivo">ğŸ¯ Objetivo</a></li>
<li><a href="#-estrutura-de-testes">ğŸ—ï¸ Estrutura de Testes</a></li>
<li><a href="#-gest%C3%A3o-de-turmas---cen%C3%A1rios-detalhados">ğŸ« GestÃ£o de Turmas - CenÃ¡rios Detalhados</a></li>
<li><a href="#-gest%C3%A3o-de-disciplinas---cen%C3%A1rios-detalhados">ğŸ“š GestÃ£o de Disciplinas - CenÃ¡rios Detalhados</a></li>
<li><a href="#-processo-de-matr%C3%ADculas---cen%C3%A1rios-detalhados">ğŸ“ Processo de MatrÃ­culas - CenÃ¡rios Detalhados</a></li>
<li><a href="#-estados-de-sistema">ğŸ”„ Estados de Sistema</a></li>
<li><a href="#-matriz-de-falhas">âš ï¸ Matriz de Falhas</a></li>
</ul>
<hr>
<h2 id="-objetivo">ğŸ¯ Objetivo</h2>
<p>Esta documentaÃ§Ã£o detalha <strong>EXATAMENTE</strong> como a aplicaÃ§Ã£o deve se comportar em cada cenÃ¡rio, incluindo:</p>
<ul>
<li>âœ… <strong>CenÃ¡rios de Sucesso</strong>: Fluxo normal esperado</li>
<li>âŒ <strong>CenÃ¡rios de Erro</strong>: Comportamentos quando algo dÃ¡ errado</li>
<li>ğŸ”„ <strong>CenÃ¡rios de Fallback</strong>: Como a aplicaÃ§Ã£o se recupera</li>
<li>âš ï¸ <strong>Estados Inconsistentes</strong>: Como detectar bugs vs features</li>
<li>ğŸ§ª <strong>Casos Limite</strong>: SituaÃ§Ãµes extremas ou incomuns</li>
</ul>
<h2 id="ï¸-estrutura-de-testes">ğŸ—ï¸ Estrutura de Testes</h2>
<p>Cada cenÃ¡rio segue o padrÃ£o:</p>
<pre><code>ğŸ¯ CENÃRIO: [Nome do cenÃ¡rio]
ğŸ“‹ CONTEXTO: [Estado inicial do sistema]
âš¡ AÃ‡ÃƒO: [O que o usuÃ¡rio faz]
âœ… RESULTADO ESPERADO: [O que deve acontecer]
âŒ POSSÃVEIS FALHAS: [O que pode dar errado]
ğŸ”„ FALLBACKS: [Como o sistema deve reagir]
ğŸ§ª COMO TESTAR: [Passos especÃ­ficos para reproduzir]
</code></pre>
<hr>
<h2 id="-gestÃ£o-de-turmas---cenÃ¡rios-detalhados">ğŸ« GestÃ£o de Turmas - CenÃ¡rios Detalhados</h2>
<h3 id="1ï¸âƒ£-criaÃ§Ã£o-de-turma---fluxo-normal">1ï¸âƒ£ CriaÃ§Ã£o de Turma - Fluxo Normal</h3>
<h4 id="-cenÃ¡rio-11-criaÃ§Ã£o-de-turma-bÃ¡sica-com-sucesso">ğŸ¯ CENÃRIO 1.1: CriaÃ§Ã£o de Turma BÃ¡sica com Sucesso</h4>
<p><strong>ğŸ“‹ CONTEXTO:</strong></p>
<ul>
<li>Sistema online e responsivo</li>
<li>UsuÃ¡rio logado como Coordenador</li>
<li>Plano ativo existente (status = 'ativo')</li>
<li>Pelo menos 1 disciplina cadastrada (status = 'ativa')</li>
<li>Pelo menos 1 docente cadastrado (status = 'ativo')</li>
</ul>
<p><strong>âš¡ AÃ‡ÃƒO:</strong></p>
<ol>
<li>UsuÃ¡rio acessa <code>/turmas/nova</code></li>
<li>Seleciona disciplina: &quot;DCC001 - INTRODUÃ‡ÃƒO Ã€ PROGRAMAÃ‡ÃƒO&quot;</li>
<li>Digita letra: &quot;A&quot;</li>
<li>Seleciona turno: &quot;MATUTINO&quot;</li>
<li>Seleciona docente: &quot;JoÃ£o Silva Santos&quot;</li>
<li>Clica &quot;Salvar &amp; Ativar&quot;</li>
</ol>
<p><strong>âœ… RESULTADO ESPERADO:</strong></p>
<pre><code class="language-javascript"><span class="hljs-comment">// 1. ValidaÃ§Ãµes em tempo real DEVEM passar:</span>
- <span class="hljs-title class_">Campo</span> <span class="hljs-attr">disciplina</span>: VÃ<span class="hljs-variable constant_">LIDO</span>
- <span class="hljs-title class_">Campo</span> <span class="hljs-attr">letra</span>: VÃ<span class="hljs-variable constant_">LIDO</span> (verificaÃ§Ã£o de unicidade retorna <span class="hljs-literal">true</span>)
- <span class="hljs-title class_">Campo</span> <span class="hljs-attr">turno</span>: VÃ<span class="hljs-variable constant_">LIDO</span>
- <span class="hljs-title class_">Campo</span> <span class="hljs-attr">docente</span>: VÃ<span class="hljs-variable constant_">LIDO</span> (carga horÃ¡ria suficiente)

<span class="hljs-comment">// 2. SubmissÃ£o do formulÃ¡rio:</span>
<span class="hljs-variable constant_">POST</span> /turmas
{
  <span class="hljs-string">&quot;disciplinaId&quot;</span>: <span class="hljs-number">1</span>,
  <span class="hljs-string">&quot;letra&quot;</span>: <span class="hljs-string">&quot;A&quot;</span>,
  <span class="hljs-string">&quot;periodo&quot;</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-string">&quot;turno1&quot;</span>: <span class="hljs-string">&quot;MATUTINO&quot;</span>,
  <span class="hljs-string">&quot;turno2&quot;</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-string">&quot;docente1Id&quot;</span>: <span class="hljs-number">5</span>,
  <span class="hljs-string">&quot;docente2Id&quot;</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-string">&quot;salaId&quot;</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-string">&quot;horarioId&quot;</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-string">&quot;planoId&quot;</span>: <span class="hljs-number">2024001</span>,
  <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;ativa&quot;</span>
}

<span class="hljs-comment">// 3. Backend DEVE:</span>
- <span class="hljs-title class_">Validar</span> dados (200ms mÃ¡ximo)
- <span class="hljs-title class_">Criar</span> registro na tabela <span class="hljs-title class_">Turma</span>
- <span class="hljs-title class_">Gerar</span> pedidos automÃ¡ticos para cursos relacionados
- <span class="hljs-title class_">Emitir</span> evento <span class="hljs-title class_">Socket</span>.<span class="hljs-property">IO</span>
- <span class="hljs-title class_">Retornar</span> status <span class="hljs-number">201</span>

<span class="hljs-comment">// 4. Resposta esperada:</span>
{
  <span class="hljs-string">&quot;success&quot;</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">&quot;data&quot;</span>: {
    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">123</span>,
    <span class="hljs-string">&quot;disciplina&quot;</span>: { <span class="hljs-string">&quot;codigo&quot;</span>: <span class="hljs-string">&quot;DCC001&quot;</span>, <span class="hljs-string">&quot;nome&quot;</span>: <span class="hljs-string">&quot;INTRODUÃ‡ÃƒO Ã€ PROGRAMAÃ‡ÃƒO&quot;</span> },
    <span class="hljs-string">&quot;letra&quot;</span>: <span class="hljs-string">&quot;A&quot;</span>,
    <span class="hljs-string">&quot;periodo&quot;</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">&quot;turno1&quot;</span>: <span class="hljs-string">&quot;MATUTINO&quot;</span>,
    <span class="hljs-string">&quot;docente1&quot;</span>: { <span class="hljs-string">&quot;nome&quot;</span>: <span class="hljs-string">&quot;JOÃƒO SILVA SANTOS&quot;</span>, <span class="hljs-string">&quot;apelido&quot;</span>: <span class="hljs-string">&quot;JOÃƒO SILVA&quot;</span> },
    <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;ativa&quot;</span>,
    <span class="hljs-string">&quot;createdAt&quot;</span>: <span class="hljs-string">&quot;2024-01-15T10:30:00Z&quot;</span>
  },
  <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;Turma criada com sucesso&quot;</span>
}

<span class="hljs-comment">// 5. Interface DEVE:</span>
- <span class="hljs-title class_">Exibir</span> toast <span class="hljs-attr">verde</span>: <span class="hljs-string">&quot;Turma criada com sucesso&quot;</span>
- <span class="hljs-title class_">Redirecionar</span> para /turmas apÃ³s 2s
- <span class="hljs-title class_">Atualizar</span> contadores no dashboard
- <span class="hljs-title class_">Emitir</span> notificaÃ§Ã£o <span class="hljs-title class_">Socket</span>.<span class="hljs-property">IO</span> para outros usuÃ¡rios
</code></pre>
<p><strong>ğŸ§ª COMO TESTAR:</strong></p>
<ol>
<li>Limpar banco de dados de teste</li>
<li>Inserir dados mÃ­nimos (1 plano ativo, 1 disciplina, 1 docente)</li>
<li>Fazer login como coordenador</li>
<li>Seguir fluxo exato acima</li>
<li>Verificar se cada passo acontece conforme especificado</li>
</ol>
<hr>
<h4 id="-cenÃ¡rio-12-falha-na-validaÃ§Ã£o-de-unicidade">ğŸ¯ CENÃRIO 1.2: Falha na ValidaÃ§Ã£o de Unicidade</h4>
<p><strong>ğŸ“‹ CONTEXTO:</strong></p>
<ul>
<li>Sistema funcionando normalmente</li>
<li>UsuÃ¡rio logado como Coordenador</li>
<li>JÃ¡ existe turma &quot;DCC001-A&quot; no plano ativo</li>
<li>UsuÃ¡rio tenta criar nova turma &quot;DCC001-A&quot;</li>
</ul>
<p><strong>âš¡ AÃ‡ÃƒO:</strong></p>
<ol>
<li>Acessa formulÃ¡rio de nova turma</li>
<li>Seleciona disciplina &quot;DCC001&quot;</li>
<li>Digita letra &quot;A&quot; e sai do campo (evento onBlur)</li>
</ol>
<p><strong>âœ… RESULTADO ESPERADO:</strong></p>
<pre><code class="language-javascript"><span class="hljs-comment">// 1. ValidaÃ§Ã£o em tempo real DEVE disparar:</span>
<span class="hljs-variable constant_">GET</span> /turmas/validar-unicidade?letra=A&amp;disciplinaId=<span class="hljs-number">1</span>&amp;planoId=<span class="hljs-number">2024001</span>

<span class="hljs-comment">// 2. Backend DEVE retornar:</span>
{
  <span class="hljs-string">&quot;disponivel&quot;</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-string">&quot;mensagem&quot;</span>: <span class="hljs-string">&quot;JÃ¡ existe turma A para disciplina DCC001 no plano 2024/1&quot;</span>,
  <span class="hljs-string">&quot;turmaExistente&quot;</span>: {
    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">45</span>,
    <span class="hljs-string">&quot;letra&quot;</span>: <span class="hljs-string">&quot;A&quot;</span>,
    <span class="hljs-string">&quot;docente&quot;</span>: <span class="hljs-string">&quot;Prof. Maria Silva&quot;</span>
  }
}

<span class="hljs-comment">// 3. Interface DEVE:</span>
- <span class="hljs-title class_">Campo</span> letra fica vermelho (<span class="hljs-attr">classe</span>: <span class="hljs-string">&#x27;is-invalid&#x27;</span>)
- <span class="hljs-title class_">Exibe</span> <span class="hljs-attr">mensagem</span>: <span class="hljs-string">&quot;JÃ¡ existe turma A para disciplina DCC001 no plano 2024/1&quot;</span>
- <span class="hljs-title class_">Bot</span>Ã£o <span class="hljs-string">&quot;Salvar&quot;</span> fica <span class="hljs-variable constant_">DESABILITADO</span>
- <span class="hljs-title class_">Foco</span> permanece no campo letra
- NÃ£o faz nova requisiÃ§Ã£o se usuÃ¡rio digitar mesma letra novamente
</code></pre>
<p><strong>âŒ POSSÃVEL FALHA:</strong>
Se validaÃ§Ã£o nÃ£o disparar ou campo nÃ£o ficar invÃ¡lido = <strong>BUG</strong></p>
<p><strong>ğŸ”„ FALLBACK:</strong>
Se API de validaÃ§Ã£o falhar:</p>
<pre><code class="language-javascript"><span class="hljs-comment">// Interface deve assumir conflito e mostrar:</span>
<span class="hljs-string">&quot;âš ï¸ NÃ£o foi possÃ­vel verificar disponibilidade. Verifique se letra jÃ¡ existe.&quot;</span>
</code></pre>
<p><strong>ğŸ§ª COMO TESTAR:</strong></p>
<ol>
<li>Criar turma DCC001-A manualmente no banco</li>
<li>Tentar criar outra DCC001-A via interface</li>
<li>Verificar se campo fica invÃ¡lido IMEDIATAMENTE ao sair do campo</li>
<li>Verificar se mensagem Ã© exata</li>
<li>Verificar se botÃ£o fica desabilitado</li>
</ol>
<hr>
<h4 id="-cenÃ¡rio-13-sobrecarga-de-docente">ğŸ¯ CENÃRIO 1.3: Sobrecarga de Docente</h4>
<p><strong>ğŸ“‹ CONTEXTO:</strong></p>
<ul>
<li>Docente &quot;JoÃ£o Silva&quot; tem limite de 20 crÃ©ditos</li>
<li>JÃ¡ possui 18 crÃ©ditos alocados em outras turmas</li>
<li>Disciplina DCC001 tem 6 crÃ©ditos (4h teÃ³rica + 2h prÃ¡tica)</li>
<li>Total seria 24 crÃ©ditos (excede limite)</li>
</ul>
<p><strong>âš¡ AÃ‡ÃƒO:</strong></p>
<ol>
<li>Seleciona disciplina DCC001 (6 crÃ©ditos)</li>
<li>Seleciona docente &quot;JoÃ£o Silva&quot;</li>
<li>Sistema calcula carga em tempo real</li>
</ol>
<p><strong>âœ… RESULTADO ESPERADO:</strong></p>
<pre><code class="language-javascript"><span class="hljs-comment">// 1. CÃ¡lculo automÃ¡tico DEVE disparar:</span>
<span class="hljs-variable constant_">GET</span> /docentes/<span class="hljs-number">5</span>/carga-atual
<span class="hljs-variable constant_">GET</span> /disciplinas/<span class="hljs-number">1</span>/carga-horaria

<span class="hljs-comment">// 2. CÃ¡lculo DEVE ser:</span>
cargaAtual = <span class="hljs-number">18</span> crÃ©ditos
cargaDisciplina = <span class="hljs-number">6</span> crÃ©ditos
novaCargatotal = <span class="hljs-number">18</span> + <span class="hljs-number">6</span> = <span class="hljs-number">24</span> crÃ©ditos
limite = <span class="hljs-number">20</span> crÃ©ditos
sobrecarga = <span class="hljs-number">24</span> - <span class="hljs-number">20</span> = <span class="hljs-number">4</span> crÃ©ditos

<span class="hljs-comment">// 3. Interface DEVE exibir:</span>
âš ï¸ <span class="hljs-variable constant_">WARNING</span> (amarelo): <span class="hljs-string">&quot;Docente ficarÃ¡ com sobrecarga: 24/20 crÃ©ditos (+4 crÃ©ditos excedentes)&quot;</span>

<span class="hljs-comment">// 4. Comportamento esperado:</span>
- <span class="hljs-title class_">Campo</span> docente fica amarelo (warning, nÃ£o erro)
- <span class="hljs-title class_">Bot</span>Ã£o <span class="hljs-string">&quot;Salvar&quot;</span> <span class="hljs-variable constant_">PERMANECE</span> <span class="hljs-variable constant_">HABILITADO</span> (sobrecarga Ã© permitida)
- <span class="hljs-title class_">Exibe</span> tooltip <span class="hljs-attr">explicativo</span>: <span class="hljs-string">&quot;Sobrecarga serÃ¡ reportada Ã  coordenaÃ§Ã£o&quot;</span>
- <span class="hljs-title class_">Se</span> usuÃ¡rio tentar salvar, <span class="hljs-variable constant_">DEVE</span> aparecer confirmaÃ§Ã£<span class="hljs-attr">o</span>:
  <span class="hljs-string">&quot;âš ï¸ Docente ficarÃ¡ sobrecarregado. Confirma a alocaÃ§Ã£o?&quot;</span>
</code></pre>
<p><strong>âŒ POSSÃVEL FALHA:</strong>
Se cÃ¡lculo der resultado diferente ou nÃ£o aparecer warning = <strong>BUG</strong></p>
<p><strong>ğŸ”„ FALLBACK:</strong>
Se API de carga falhar:</p>
<pre><code class="language-javascript"><span class="hljs-comment">// Interface deve assumir carga OK e mostrar:</span>
<span class="hljs-string">&quot;âš ï¸ NÃ£o foi possÃ­vel verificar carga do docente. Prosseguir por sua conta e risco.&quot;</span>
</code></pre>
<hr>
<h4 id="-cenÃ¡rio-14-falha-de-conexÃ£o-durante-salvamento">ğŸ¯ CENÃRIO 1.4: Falha de ConexÃ£o Durante Salvamento</h4>
<p><strong>ğŸ“‹ CONTEXTO:</strong></p>
<ul>
<li>FormulÃ¡rio preenchido corretamente</li>
<li>Todas as validaÃ§Ãµes passaram</li>
<li>UsuÃ¡rio clica &quot;Salvar &amp; Ativar&quot;</li>
<li>ConexÃ£o com servidor falha durante POST</li>
</ul>
<p><strong>âš¡ AÃ‡ÃƒO:</strong></p>
<ol>
<li>UsuÃ¡rio clica &quot;Salvar &amp; Ativar&quot;</li>
<li>RequisiÃ§Ã£o POST /turmas inicia</li>
<li>ConexÃ£o Ã© perdida ou servidor nÃ£o responde</li>
</ol>
<p><strong>âœ… RESULTADO ESPERADO:</strong></p>
<pre><code class="language-javascript"><span class="hljs-comment">// 1. Interface DEVE imediatamente:</span>
- <span class="hljs-title class_">Mostrar</span> loading spinner no botÃ£o
- <span class="hljs-title class_">Desabilitar</span> todos os campos <span class="hljs-keyword">do</span> formulÃ¡rio
- <span class="hljs-title class_">Texto</span> <span class="hljs-keyword">do</span> botÃ£o vira <span class="hljs-string">&quot;Salvando...&quot;</span>

<span class="hljs-comment">// 2. ApÃ³s timeout (30s), DEVE:</span>
- <span class="hljs-title class_">Remover</span> loading
- <span class="hljs-title class_">Reabilitar</span> campos
- <span class="hljs-title class_">Texto</span> <span class="hljs-keyword">do</span> botÃ£o volta para <span class="hljs-string">&quot;Salvar &amp; Ativar&quot;</span>
- <span class="hljs-title class_">Exibir</span> <span class="hljs-attr">erro</span>: <span class="hljs-string">&quot;âŒ Falha na conexÃ£o. Dados NÃƒO foram salvos. Tente novamente.&quot;</span>

<span class="hljs-comment">// 3. Dados do formulÃ¡rio DEVEM:</span>
- <span class="hljs-title class_">Permanecer</span> preenchidos (nÃ£o perder dados)
- <span class="hljs-title class_">Manter</span> todas <span class="hljs-keyword">as</span> validaÃ§Ãµes anteriores
- <span class="hljs-title class_">Permitir</span> nova tentativa imediatamente

<span class="hljs-comment">// 4. Logs DEVEM ser gerados:</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;[TURMA_CREATE] Network error:&#x27;</span>, error);
</code></pre>
<p><strong>âŒ POSSÃVEL FALHA:</strong></p>
<ul>
<li>Se formulÃ¡rio for limpo apÃ³s erro = <strong>BUG</strong></li>
<li>Se usuÃ¡rio perder dados digitados = <strong>BUG</strong></li>
<li>Se nÃ£o exibir erro claro = <strong>BUG</strong></li>
</ul>
<p><strong>ğŸ”„ FALLBACK AUTOMÃTICO:</strong></p>
<pre><code class="language-javascript"><span class="hljs-comment">// Sistema DEVE tentar 3 vezes automaticamente:</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">criarTurma</span>(data);
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-keyword">if</span> (tentativas &lt; <span class="hljs-number">3</span>) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">tentarNovamente</span>(), <span class="hljs-number">1000</span> * tentativas);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-title function_">exibirErroDefinitivo</span>();
  }
}
</code></pre>
<hr>
<h3 id="2ï¸âƒ£-ediÃ§Ã£o-de-turma---cenÃ¡rios-complexos">2ï¸âƒ£ EdiÃ§Ã£o de Turma - CenÃ¡rios Complexos</h3>
<h4 id="-cenÃ¡rio-21-ediÃ§Ã£o-com-alunos-matriculados">ğŸ¯ CENÃRIO 2.1: EdiÃ§Ã£o com Alunos Matriculados</h4>
<p><strong>ğŸ“‹ CONTEXTO:</strong></p>
<ul>
<li>Turma DCC001-A existente com status &quot;ativa&quot;</li>
<li>25 alunos jÃ¡ matriculados na turma</li>
<li>Coordenador tenta alterar docente de &quot;Prof. JoÃ£o&quot; para &quot;Prof. Maria&quot;</li>
</ul>
<p><strong>âš¡ AÃ‡ÃƒO:</strong></p>
<ol>
<li>Clica &quot;Editar&quot; na turma DCC001-A</li>
<li>Altera campo docente para &quot;Prof. Maria&quot;</li>
<li>Clica &quot;Salvar&quot;</li>
</ol>
<p><strong>âœ… RESULTADO ESPERADO:</strong></p>
<pre><code class="language-javascript"><span class="hljs-comment">// 1. Sistema DEVE detectar impacto:</span>
<span class="hljs-variable constant_">GET</span> /turmas/<span class="hljs-number">123</span>/impacto-alteracao
{
  <span class="hljs-string">&quot;alunosMatriculados&quot;</span>: <span class="hljs-number">25</span>,
  <span class="hljs-string">&quot;permitido&quot;</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">&quot;requerConfirmacao&quot;</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">&quot;avisos&quot;</span>: [<span class="hljs-string">&quot;25 alunos matriculados serÃ£o notificados&quot;</span>]
}

<span class="hljs-comment">// 2. Interface DEVE exibir modal:</span>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ <span class="hljs-title class_">Confirmar</span> <span class="hljs-title class_">Altera</span>Ã§Ã£o                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ <span class="hljs-title class_">Esta</span> alteraÃ§Ã£o afetarÃ¡:                     â”‚
â”‚ â€¢ <span class="hljs-number">25</span> alunos matriculados                    â”‚
â”‚ â€¢ <span class="hljs-title class_">Notifica</span>Ã§Ãµes serÃ£o enviadas               â”‚
â”‚ â€¢ <span class="hljs-title class_">Hor</span>Ã¡rio pode mudar                        â”‚
â”‚                                             â”‚
â”‚ <span class="hljs-title class_">Deseja</span> continuar?                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚ â”‚ <span class="hljs-title class_">Cancelar</span>    â”‚  â”‚ <span class="hljs-title class_">Confirmar</span>   â”‚           â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

<span class="hljs-comment">// 3. Se confirmar, DEVE:</span>
- <span class="hljs-title class_">Salvar</span> alteraÃ§Ã£o no banco
- <span class="hljs-title class_">Gerar</span> log de alteraÃ§Ã£o
- <span class="hljs-title class_">Enviar</span> notificaÃ§Ãµes para <span class="hljs-number">25</span> alunos
- <span class="hljs-title class_">Exibir</span> <span class="hljs-attr">sucesso</span>: <span class="hljs-string">&quot;Docente alterado. 25 alunos foram notificados.&quot;</span>
- <span class="hljs-title class_">Redirecionar</span> para lista de turmas

<span class="hljs-comment">// 4. Email para alunos DEVE conter:</span>
<span class="hljs-title class_">Assunto</span>: <span class="hljs-string">&quot;AlteraÃ§Ã£o no docente - DCC001 Turma A&quot;</span>
<span class="hljs-title class_">Corpo</span>: <span class="hljs-string">&quot;O docente da turma foi alterado de Prof. JoÃ£o Silva para Prof. Maria Santos...&quot;</span>
</code></pre>
<p><strong>âŒ POSSÃVEIS FALHAS:</strong></p>
<ul>
<li>Se nÃ£o detectar alunos matriculados = <strong>BUG</strong></li>
<li>Se nÃ£o exibir confirmaÃ§Ã£o = <strong>BUG</strong></li>
<li>Se notificaÃ§Ãµes nÃ£o forem enviadas = <strong>BUG</strong></li>
</ul>
<hr>
<h4 id="-cenÃ¡rio-22-tentativa-de-ediÃ§Ã£o-com-campos-bloqueados">ğŸ¯ CENÃRIO 2.2: Tentativa de EdiÃ§Ã£o com Campos Bloqueados</h4>
<p><strong>ğŸ“‹ CONTEXTO:</strong></p>
<ul>
<li>Turma com alunos matriculados</li>
<li>UsuÃ¡rio tenta alterar cÃ³digo da disciplina (campo que deve estar bloqueado)</li>
</ul>
<p><strong>âš¡ AÃ‡ÃƒO:</strong></p>
<ol>
<li>Acessa ediÃ§Ã£o de turma com matriculas</li>
<li>Tenta alterar campo &quot;disciplina&quot; no formulÃ¡rio</li>
</ol>
<p><strong>âœ… RESULTADO ESPERADO:</strong></p>
<pre><code class="language-javascript"><span class="hljs-comment">// 1. Campo disciplina DEVE estar:</span>
- <span class="hljs-title class_">Visualmente</span> desabilitado (cinza)
- <span class="hljs-attr">HTML</span>: disabled=<span class="hljs-string">&quot;true&quot;</span>
- <span class="hljs-title class_">Com</span> <span class="hljs-attr">tooltip</span>: <span class="hljs-string">&quot;NÃ£o Ã© possÃ­vel alterar disciplina com alunos matriculados&quot;</span>

<span class="hljs-comment">// 2. Se usuÃ¡rio tentar forÃ§ar via JavaScript:</span>
- <span class="hljs-title class_">Backend</span> <span class="hljs-variable constant_">DEVE</span> rejeitar com erro <span class="hljs-number">400</span>
- <span class="hljs-title class_">Mensagem</span>: <span class="hljs-string">&quot;Campo disciplina nÃ£o pode ser alterado para turma com matrÃ­culas&quot;</span>

<span class="hljs-comment">// 3. Interface DEVE ignorar tentativas:</span>
- NÃ£o permitir seleÃ§Ã£o no dropdown
- NÃ£o aceitar digitaÃ§Ã£o
- NÃ£o enviar campo na requisiÃ§Ã£o
</code></pre>
<p><strong>âŒ FALHA CRÃTICA:</strong>
Se campo for editÃ¡vel ou aceitar alteraÃ§Ã£o = <strong>BUG DE SEGURANÃ‡A</strong></p>
<hr>
<h3 id="3ï¸âƒ£-gestÃ£o-de-vagas---cenÃ¡rios-de-negÃ³cio">3ï¸âƒ£ GestÃ£o de Vagas - CenÃ¡rios de NegÃ³cio</h3>
<h4 id="-cenÃ¡rio-31-cÃ¡lculo-automÃ¡tico-de-vagas-baseado-em-histÃ³rico">ğŸ¯ CENÃRIO 3.1: CÃ¡lculo AutomÃ¡tico de Vagas Baseado em HistÃ³rico</h4>
<p><strong>ğŸ“‹ CONTEXTO:</strong></p>
<ul>
<li>Nova turma DCC001-A sendo criada</li>
<li>HistÃ³rico dos Ãºltimos 3 semestres:
<ul>
<li>2023/2: 28 matriculados</li>
<li>2023/1: 32 matriculados</li>
<li>2022/2: 25 matriculados</li>
</ul>
</li>
<li>Disciplina obrigatÃ³ria com taxa de reprovaÃ§Ã£o 15%</li>
</ul>
<p><strong>âš¡ AÃ‡ÃƒO:</strong></p>
<ol>
<li>Sistema cria nova turma DCC001-A</li>
<li>Algoritmo automÃ¡tico calcula vagas</li>
</ol>
<p><strong>âœ… RESULTADO ESPERADO:</strong></p>
<pre><code class="language-javascript"><span class="hljs-comment">// 1. CÃ¡lculo DEVE ser executado:</span>
<span class="hljs-keyword">const</span> s1 = <span class="hljs-number">28</span>, s2 = <span class="hljs-number">32</span>, s3 = <span class="hljs-number">25</span>;
<span class="hljs-keyword">const</span> mediaPonderada = (s1 * <span class="hljs-number">0.5</span>) + (s2 * <span class="hljs-number">0.3</span>) + (s3 * <span class="hljs-number">0.2</span>);
<span class="hljs-comment">// mediaPonderada = 14 + 9.6 + 5 = 28.6</span>

<span class="hljs-keyword">const</span> fatorSazonalidade = <span class="hljs-number">1.0</span>; <span class="hljs-comment">// semestre normal</span>
<span class="hljs-keyword">const</span> fatorReprovacao = <span class="hljs-number">1.0</span>;   <span class="hljs-comment">// taxa &lt; 30%</span>
<span class="hljs-keyword">const</span> fatorObrigatoria = <span class="hljs-number">1.0</span>;  <span class="hljs-comment">// Ã© obrigatÃ³ria</span>

<span class="hljs-keyword">const</span> vagasSugeridas = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(<span class="hljs-number">28.6</span> * <span class="hljs-number">1.0</span> * <span class="hljs-number">1.0</span> * <span class="hljs-number">1.0</span>) = <span class="hljs-number">29</span> vagas

<span class="hljs-comment">// 2. DistribuiÃ§Ã£o automÃ¡tica DEVE ser:</span>
<span class="hljs-keyword">const</span> vagasPeriodizadas = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(<span class="hljs-number">29</span> * <span class="hljs-number">0.7</span>) = <span class="hljs-number">21</span> vagas
<span class="hljs-keyword">const</span> vagasNaoPeriodizadas = <span class="hljs-number">29</span> - <span class="hljs-number">21</span> = <span class="hljs-number">8</span> vagas

<span class="hljs-comment">// 3. Pedidos DEVEM ser criados automaticamente:</span>
<span class="hljs-variable constant_">INSERT</span> <span class="hljs-variable constant_">INTO</span> <span class="hljs-title class_">Pedido</span> (<span class="hljs-title class_">TurmaId</span>, <span class="hljs-title class_">CursoId</span>, vagasPeriodizadas, vagasNaoPeriodizadas)
<span class="hljs-variable constant_">VALUES</span> (<span class="hljs-number">123</span>, <span class="hljs-number">1</span>, <span class="hljs-number">21</span>, <span class="hljs-number">8</span>) -- <span class="hljs-title class_">Ci</span>Ãªncia da <span class="hljs-title class_">Computa</span>Ã§Ã£o

<span class="hljs-comment">// 4. Interface DEVE exibir:</span>
<span class="hljs-string">&quot;ğŸ“Š Vagas calculadas automaticamente: 29 (21 periodizadas + 8 nÃ£o-periodizadas)&quot;</span>
</code></pre>
<p><strong>âŒ POSSÃVEL FALHA:</strong>
Se cÃ¡lculo der resultado diferente = <strong>BUG NO ALGORITMO</strong></p>
<p><strong>ğŸ§ª COMO TESTAR:</strong></p>
<ol>
<li>Inserir dados histÃ³ricos exatos no banco</li>
<li>Criar turma nova</li>
<li>Verificar se cÃ¡lculo Ã© exatamente: Math.ceil(28.6) = 29</li>
<li>Verificar distribuiÃ§Ã£o 70/30</li>
</ol>
<hr>
<h4 id="-cenÃ¡rio-32-ajuste-manual-de-vagas-com-validaÃ§Ã£o-de-capacidade">ğŸ¯ CENÃRIO 3.2: Ajuste Manual de Vagas com ValidaÃ§Ã£o de Capacidade</h4>
<p><strong>ğŸ“‹ CONTEXTO:</strong></p>
<ul>
<li>Turma DCC001-A tem capacidade mÃ¡xima de 40 alunos (definida pela sala)</li>
<li>Pedidos atuais totalizam 35 vagas</li>
<li>Coordenador tenta aumentar para 45 vagas (excede capacidade)</li>
</ul>
<p><strong>âš¡ AÃ‡ÃƒO:</strong></p>
<ol>
<li>Acessa gestÃ£o de vagas da turma</li>
<li>Altera vagas de CiÃªncia da ComputaÃ§Ã£o de 30 para 40</li>
<li>Total passa de 35 para 45 vagas</li>
<li>Clica &quot;Salvar&quot;</li>
</ol>
<p><strong>âœ… RESULTADO ESPERADO:</strong></p>
<pre><code class="language-javascript"><span class="hljs-comment">// 1. ValidaÃ§Ã£o DEVE disparar:</span>
<span class="hljs-keyword">const</span> totalVagas = <span class="hljs-number">45</span>;
<span class="hljs-keyword">const</span> capacidadeMaxima = <span class="hljs-number">40</span>;
<span class="hljs-keyword">const</span> excesso = <span class="hljs-number">45</span> - <span class="hljs-number">40</span> = <span class="hljs-number">5</span> vagas;

<span class="hljs-comment">// 2. Sistema DEVE rejeitar:</span>
{
  <span class="hljs-string">&quot;success&quot;</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-string">&quot;error&quot;</span>: <span class="hljs-string">&quot;CAPACITY_EXCEEDED&quot;</span>,
  <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;Total de vagas (45) excede capacidade da sala (40)&quot;</span>,
  <span class="hljs-string">&quot;details&quot;</span>: {
    <span class="hljs-string">&quot;totalVagas&quot;</span>: <span class="hljs-number">45</span>,
    <span class="hljs-string">&quot;capacidadeMaxima&quot;</span>: <span class="hljs-number">40</span>,
    <span class="hljs-string">&quot;excesso&quot;</span>: <span class="hljs-number">5</span>
  }
}

<span class="hljs-comment">// 3. Interface DEVE:</span>
- <span class="hljs-title class_">Campo</span> ficar vermelho
- <span class="hljs-title class_">Exibir</span> <span class="hljs-attr">erro</span>: <span class="hljs-string">&quot;âŒ Total de vagas (45) excede capacidade da sala (40)&quot;</span>
- <span class="hljs-title class_">Sugerir</span>: <span class="hljs-string">&quot;Reduza em 5 vagas ou altere para sala maior&quot;</span>
- <span class="hljs-title class_">Bot</span>Ã£o <span class="hljs-string">&quot;Salvar&quot;</span> ficar desabilitado
- <span class="hljs-title class_">Valores</span> retornarem ao estado anterior automaticamente
</code></pre>
<p><strong>âŒ POSSÃVEL FALHA:</strong>
Se sistema aceitar vagas acima da capacidade = <strong>BUG CRÃTICO</strong></p>
<hr>
<h2 id="-gestÃ£o-de-disciplinas---cenÃ¡rios-detalhados">ğŸ“š GestÃ£o de Disciplinas - CenÃ¡rios Detalhados</h2>
<h3 id="4ï¸âƒ£-validaÃ§Ã£o-de-dependÃªncias-circulares">4ï¸âƒ£ ValidaÃ§Ã£o de DependÃªncias Circulares</h3>
<h4 id="-cenÃ¡rio-41-detecÃ§Ã£o-de-dependÃªncia-circular-simples">ğŸ¯ CENÃRIO 4.1: DetecÃ§Ã£o de DependÃªncia Circular Simples</h4>
<p><strong>ğŸ“‹ CONTEXTO:</strong></p>
<ul>
<li>DCC001 â†’ prÃ©-requisito: nenhum</li>
<li>DCC002 â†’ prÃ©-requisito: DCC001</li>
<li>UsuÃ¡rio tenta fazer DCC001 â†’ prÃ©-requisito: DCC002 (criaria ciclo)</li>
</ul>
<p><strong>âš¡ AÃ‡ÃƒO:</strong></p>
<ol>
<li>Edita disciplina DCC001</li>
<li>Tenta adicionar DCC002 como prÃ©-requisito</li>
<li>Clica &quot;Adicionar prÃ©-requisito&quot;</li>
</ol>
<p><strong>âœ… RESULTADO ESPERADO:</strong></p>
<pre><code class="language-javascript"><span class="hljs-comment">// 1. Sistema DEVE executar algoritmo de detecÃ§Ã£o:</span>
<span class="hljs-variable constant_">POST</span> /disciplinas/verificar-ciclo
{
  <span class="hljs-string">&quot;disciplinaAtual&quot;</span>: <span class="hljs-number">1</span>,      <span class="hljs-comment">// DCC001</span>
  <span class="hljs-string">&quot;novoPreRequisito&quot;</span>: <span class="hljs-number">2</span>,     <span class="hljs-comment">// DCC002</span>
  <span class="hljs-string">&quot;preRequisitosExistentes&quot;</span>: []
}

<span class="hljs-comment">// 2. Algoritmo DFS DEVE detectar:</span>
grafo = {
  <span class="hljs-number">1</span>: [<span class="hljs-number">2</span>],    <span class="hljs-comment">// DCC001 â†’ DCC002</span>
  <span class="hljs-number">2</span>: [<span class="hljs-number">1</span>]     <span class="hljs-comment">// DCC002 â†’ DCC001 (jÃ¡ existe)</span>
}
<span class="hljs-comment">// CICLO DETECTADO: 1 â†’ 2 â†’ 1</span>

<span class="hljs-comment">// 3. Resposta DEVE ser:</span>
{
  <span class="hljs-string">&quot;temCiclo&quot;</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">&quot;caminhoCiclo&quot;</span>: [<span class="hljs-string">&quot;DCC001&quot;</span>, <span class="hljs-string">&quot;DCC002&quot;</span>, <span class="hljs-string">&quot;DCC001&quot;</span>],
  <span class="hljs-string">&quot;mensagem&quot;</span>: <span class="hljs-string">&quot;Esta adiÃ§Ã£o criaria dependÃªncia circular: DCC001 â†’ DCC002 â†’ DCC001&quot;</span>
}

<span class="hljs-comment">// 4. Interface DEVE:</span>
- NÃƒO adicionar <span class="hljs-title class_">DCC002</span> Ã  lista
- <span class="hljs-title class_">Exibir</span> erro <span class="hljs-attr">vermelho</span>: <span class="hljs-string">&quot;âŒ DependÃªncia circular detectada: DCC001 â†’ DCC002 â†’ DCC001&quot;</span>
- <span class="hljs-title class_">Destacar</span> o caminho <span class="hljs-keyword">do</span> ciclo
- <span class="hljs-title class_">Campo</span> de seleÃ§Ã£o voltar para <span class="hljs-string">&quot;Selecione...&quot;</span>
</code></pre>
<p><strong>âŒ FALHA CRÃTICA:</strong>
Se dependÃªncia circular for aceita = <strong>BUG DE LÃ“GICA GRAVE</strong></p>
<p><strong>ğŸ§ª COMO TESTAR:</strong></p>
<ol>
<li>Criar DCC001 sem prÃ©-requisitos</li>
<li>Criar DCC002 com prÃ©-requisito DCC001</li>
<li>Tentar adicionar DCC002 como prÃ©-requisito de DCC001</li>
<li>Verificar se erro Ã© exibido IMEDIATAMENTE</li>
</ol>
<hr>
<h4 id="-cenÃ¡rio-42-dependÃªncia-circular-complexa-3-disciplinas">ğŸ¯ CENÃRIO 4.2: DependÃªncia Circular Complexa (3+ disciplinas)</h4>
<p><strong>ğŸ“‹ CONTEXTO:</strong></p>
<ul>
<li>DCC001 â†’ prÃ©-req: nenhum</li>
<li>DCC002 â†’ prÃ©-req: DCC001</li>
<li>DCC003 â†’ prÃ©-req: DCC002</li>
<li>UsuÃ¡rio tenta fazer DCC001 â†’ prÃ©-req: DCC003 (ciclo: 1â†’3â†’2â†’1)</li>
</ul>
<p><strong>âš¡ AÃ‡ÃƒO:</strong>
Tenta adicionar DCC003 como prÃ©-requisito de DCC001</p>
<p><strong>âœ… RESULTADO ESPERADO:</strong></p>
<pre><code class="language-javascript"><span class="hljs-comment">// Algoritmo DEVE detectar caminho:</span>
<span class="hljs-comment">// DCC001 â†’ DCC003 â†’ DCC002 â†’ DCC001 (ciclo de 3 elementos)</span>

{
  <span class="hljs-string">&quot;temCiclo&quot;</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">&quot;caminhoCiclo&quot;</span>: [<span class="hljs-string">&quot;DCC001&quot;</span>, <span class="hljs-string">&quot;DCC003&quot;</span>, <span class="hljs-string">&quot;DCC002&quot;</span>, <span class="hljs-string">&quot;DCC001&quot;</span>],
  <span class="hljs-string">&quot;tamanhoRodilha&quot;</span>: <span class="hljs-number">3</span>,
  <span class="hljs-string">&quot;disciplinasAfetadas&quot;</span>: [<span class="hljs-string">&quot;DCC001&quot;</span>, <span class="hljs-string">&quot;DCC002&quot;</span>, <span class="hljs-string">&quot;DCC003&quot;</span>]
}

<span class="hljs-comment">// Interface deve mostrar diagrama visual:</span>
<span class="hljs-title class_">DCC001</span> â”€â”€â†’ <span class="hljs-title class_">DCC003</span>
  â†‘           â†“
  â””â”€â”€ <span class="hljs-title class_">DCC002</span> â†â”€â”˜
</code></pre>
<hr>
<h3 id="5ï¸âƒ£-sistema-de-competÃªncias-docentes">5ï¸âƒ£ Sistema de CompetÃªncias Docentes</h3>
<h4 id="-cenÃ¡rio-51-cÃ¡lculo-automÃ¡tico-de-competÃªncia-com-base-em-histÃ³rico">ğŸ¯ CENÃRIO 5.1: CÃ¡lculo AutomÃ¡tico de CompetÃªncia com Base em HistÃ³rico</h4>
<p><strong>ğŸ“‹ CONTEXTO:</strong></p>
<ul>
<li>Prof. JoÃ£o Silva nunca lecionou DCC001</li>
<li>Tem formaÃ§Ã£o em CiÃªncia da ComputaÃ§Ã£o (Ã¡rea especÃ­fica)</li>
<li>8 anos de experiÃªncia docente</li>
<li>AvaliaÃ§Ã£o mÃ©dia dos alunos: 4.2/5.0</li>
<li>Nenhuma capacitaÃ§Ã£o especÃ­fica na Ã¡rea</li>
</ul>
<p><strong>âš¡ AÃ‡ÃƒO:</strong>
Sistema calcula competÃªncia automaticamente</p>
<p><strong>âœ… RESULTADO ESPERADO:</strong></p>
<pre><code class="language-javascript"><span class="hljs-comment">// CÃ¡lculo detalhado DEVE ser:</span>
<span class="hljs-keyword">let</span> score = <span class="hljs-number">0</span>;
<span class="hljs-keyword">const</span> evidencias = [];

<span class="hljs-comment">// 1. ExperiÃªncia especÃ­fica (peso 40%):</span>
<span class="hljs-keyword">const</span> experienciaEspecifica = <span class="hljs-number">0</span>; <span class="hljs-comment">// nunca lecionou</span>
score += <span class="hljs-number">0</span>;
evidencias.<span class="hljs-title function_">push</span>(<span class="hljs-string">&quot;âš ï¸ Primeira vez nesta disciplina&quot;</span>);

<span class="hljs-comment">// 2. FormaÃ§Ã£o acadÃªmica (peso 20%):</span>
<span class="hljs-keyword">const</span> areaCompativel = <span class="hljs-string">&quot;especifica&quot;</span>; <span class="hljs-comment">// CiÃªncia da ComputaÃ§Ã£o</span>
score += <span class="hljs-number">20</span>;
evidencias.<span class="hljs-title function_">push</span>(<span class="hljs-string">&quot;âœ… FormaÃ§Ã£o especÃ­fica na Ã¡rea&quot;</span>);

<span class="hljs-comment">// 3. AvaliaÃ§Ã£o dos alunos (peso 25%):</span>
<span class="hljs-keyword">const</span> avaliacaoNormalizada = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">1</span>, (<span class="hljs-number">4.2</span> - <span class="hljs-number">2</span>) / <span class="hljs-number">3</span>)) = <span class="hljs-number">0.73</span>;
score += <span class="hljs-number">25</span> * <span class="hljs-number">0.73</span> = <span class="hljs-number">18.25</span>;
evidencias.<span class="hljs-title function_">push</span>(<span class="hljs-string">&quot;âœ… Boa avaliaÃ§Ã£o: 4.2/5.0&quot;</span>);

<span class="hljs-comment">// 4. ExperiÃªncia geral (peso 10%):</span>
<span class="hljs-keyword">const</span> experienciaNormalizada = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">1</span>, <span class="hljs-number">8</span> / <span class="hljs-number">10</span>) = <span class="hljs-number">0.8</span>;
score += <span class="hljs-number">10</span> * <span class="hljs-number">0.8</span> = <span class="hljs-number">8</span>;
evidencias.<span class="hljs-title function_">push</span>(<span class="hljs-string">&quot;âœ… 8 anos de experiÃªncia&quot;</span>);

<span class="hljs-comment">// 5. CapacitaÃ§Ãµes (peso 5%):</span>
score += <span class="hljs-number">0</span>; <span class="hljs-comment">// nenhuma capacitaÃ§Ã£o</span>
evidencias.<span class="hljs-title function_">push</span>(<span class="hljs-string">&quot;âš ï¸ Sem capacitaÃ§Ãµes especÃ­ficas&quot;</span>);

<span class="hljs-comment">// Score final: 0 + 20 + 18.25 + 8 + 0 = 46.25 â‰ˆ 46 pontos</span>

<span class="hljs-comment">// 6. Determinar nÃ­vel:</span>
<span class="hljs-comment">// 46 estÃ¡ entre 45-65, logo: APTO</span>
<span class="hljs-keyword">const</span> nivel = <span class="hljs-string">&quot;APTO&quot;</span>;

<span class="hljs-comment">// 7. Resultado DEVE ser:</span>
{
  <span class="hljs-string">&quot;nivel&quot;</span>: <span class="hljs-string">&quot;APTO&quot;</span>,
  <span class="hljs-string">&quot;score&quot;</span>: <span class="hljs-number">46</span>,
  <span class="hljs-string">&quot;evidencias&quot;</span>: [
    <span class="hljs-string">&quot;âš ï¸ Primeira vez nesta disciplina&quot;</span>,
    <span class="hljs-string">&quot;âœ… FormaÃ§Ã£o especÃ­fica na Ã¡rea&quot;</span>,
    <span class="hljs-string">&quot;âœ… Boa avaliaÃ§Ã£o: 4.2/5.0&quot;</span>,
    <span class="hljs-string">&quot;âœ… 8 anos de experiÃªncia&quot;</span>,
    <span class="hljs-string">&quot;âš ï¸ Sem capacitaÃ§Ãµes especÃ­ficas&quot;</span>
  ],
  <span class="hljs-string">&quot;sugerido&quot;</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">&quot;dataCalculo&quot;</span>: <span class="hljs-string">&quot;2024-01-15T10:30:00Z&quot;</span>
}
</code></pre>
<p><strong>âŒ POSSÃVEL FALHA:</strong>
Qualquer variaÃ§Ã£o no cÃ¡lculo acima = <strong>BUG NO ALGORITMO</strong></p>
<hr>
<h2 id="-processo-de-matrÃ­culas---cenÃ¡rios-crÃ­ticos">ğŸ“ Processo de MatrÃ­culas - CenÃ¡rios CrÃ­ticos</h2>
<h3 id="6ï¸âƒ£-algoritmo-de-priorizaÃ§Ã£o-complexo">6ï¸âƒ£ Algoritmo de PriorizaÃ§Ã£o Complexo</h3>
<h4 id="-cenÃ¡rio-61-cÃ¡lculo-de-prioridade-com-mÃºltiplos-fatores">ğŸ¯ CENÃRIO 6.1: CÃ¡lculo de Prioridade com MÃºltiplos Fatores</h4>
<p><strong>ğŸ“‹ CONTEXTO:</strong></p>
<ul>
<li>Aluno: JoÃ£o Silva, CC 2020, 7Âº semestre</li>
<li>IRA: 8.5</li>
<li>Tempo no curso: 4 anos (entrou em 2020)</li>
<li>Disciplina: DCC401 (7Âº perÃ­odo recomendado)</li>
<li>SolicitaÃ§Ã£o feita em 01/12/2023 08:30</li>
<li>Abertura do perÃ­odo: 01/12/2023 08:00</li>
<li>SituaÃ§Ã£o especial: Formando</li>
</ul>
<p><strong>âš¡ AÃ‡ÃƒO:</strong>
Sistema calcula prioridade para alocaÃ§Ã£o de vaga</p>
<p><strong>âœ… RESULTADO ESPERADO:</strong></p>
<pre><code class="language-javascript"><span class="hljs-comment">// CÃ¡lculo detalhado DEVE ser:</span>
<span class="hljs-keyword">const</span> pesos = {
  <span class="hljs-attr">periodoCorreto</span>: <span class="hljs-number">0.40</span>,      <span class="hljs-comment">// 40%</span>
  <span class="hljs-attr">ira</span>: <span class="hljs-number">0.25</span>,                 <span class="hljs-comment">// 25%</span>
  <span class="hljs-attr">tempoNoCurso</span>: <span class="hljs-number">0.15</span>,        <span class="hljs-comment">// 15%</span>
  <span class="hljs-attr">situacaoEspecial</span>: <span class="hljs-number">0.10</span>,    <span class="hljs-comment">// 10%</span>
  <span class="hljs-attr">ordemSolicitacao</span>: <span class="hljs-number">0.05</span>     <span class="hljs-comment">// 5%</span>
};

<span class="hljs-comment">// 1. PerÃ­odo correto (40%):</span>
<span class="hljs-comment">// Disciplina do 7Âº perÃ­odo, aluno no 7Âº semestre</span>
<span class="hljs-keyword">const</span> scorePeriodoCorreto = <span class="hljs-number">1.0</span>; <span class="hljs-comment">// perÃ­odo exato</span>
scoreDetalhado.<span class="hljs-property">periodoCorreto</span> = <span class="hljs-number">1.0</span>;

<span class="hljs-comment">// 2. IRA (25%):</span>
<span class="hljs-comment">// IRA 8.5, funÃ§Ã£o sigmÃ³ide: 1 / (1 + exp(-(8.5 - 6) * 1.5))</span>
<span class="hljs-keyword">const</span> scoreIRA = <span class="hljs-number">1</span> / (<span class="hljs-number">1</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">exp</span>(-(<span class="hljs-number">8.5</span> - <span class="hljs-number">6</span>) * <span class="hljs-number">1.5</span>)) = <span class="hljs-number">0.95</span>;
scoreDetalhado.<span class="hljs-property">ira</span> = <span class="hljs-number">0.95</span>;

<span class="hljs-comment">// 3. Tempo no curso (15%):</span>
<span class="hljs-comment">// 4 anos = 8 semestres, curso de 8 semestres (CC)</span>
<span class="hljs-keyword">const</span> proporcaoTempo = <span class="hljs-number">8</span> / <span class="hljs-number">8</span> = <span class="hljs-number">1.0</span>;
<span class="hljs-keyword">const</span> scoreTempoNoCurso = <span class="hljs-number">0.9</span>; <span class="hljs-comment">// aluno no tempo esperado</span>
scoreDetalhado.<span class="hljs-property">tempoNoCurso</span> = <span class="hljs-number">0.9</span>;

<span class="hljs-comment">// 4. SituaÃ§Ã£o especial (10%):</span>
<span class="hljs-keyword">const</span> isFormando = <span class="hljs-literal">true</span>;
<span class="hljs-keyword">let</span> scoreSituacaoEspecial = <span class="hljs-number">0.5</span>; <span class="hljs-comment">// base</span>
scoreSituacaoEspecial += <span class="hljs-number">0.4</span>;    <span class="hljs-comment">// formando</span>
scoreDetalhado.<span class="hljs-property">situacaoEspecial</span> = <span class="hljs-number">0.9</span>;

<span class="hljs-comment">// 5. Ordem de solicitaÃ§Ã£o (5%):</span>
<span class="hljs-comment">// 30 minutos apÃ³s abertura = 0.5h</span>
<span class="hljs-keyword">const</span> horasDesdeAbertura = <span class="hljs-number">0.5</span>;
<span class="hljs-keyword">const</span> scoreOrdemSolicitacao = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span> - (<span class="hljs-number">0.5</span> / (<span class="hljs-number">7</span> * <span class="hljs-number">24</span>))) = <span class="hljs-number">0.996</span>;
scoreDetalhado.<span class="hljs-property">ordemSolicitacao</span> = <span class="hljs-number">0.996</span>;

<span class="hljs-comment">// Score final ponderado:</span>
<span class="hljs-keyword">const</span> scoreFinal =
  (<span class="hljs-number">1.0</span> * <span class="hljs-number">0.40</span>) +     <span class="hljs-comment">// perÃ­odo correto</span>
  (<span class="hljs-number">0.95</span> * <span class="hljs-number">0.25</span>) +    <span class="hljs-comment">// IRA</span>
  (<span class="hljs-number">0.9</span> * <span class="hljs-number">0.15</span>) +     <span class="hljs-comment">// tempo no curso</span>
  (<span class="hljs-number">0.9</span> * <span class="hljs-number">0.10</span>) +     <span class="hljs-comment">// situaÃ§Ã£o especial</span>
  (<span class="hljs-number">0.996</span> * <span class="hljs-number">0.05</span>);    <span class="hljs-comment">// ordem solicitaÃ§Ã£o</span>

<span class="hljs-comment">// scoreFinal = 0.40 + 0.2375 + 0.135 + 0.09 + 0.0498 = 0.9123</span>
<span class="hljs-comment">// Em escala 0-100: 91.23 â‰ˆ 91 pontos</span>

<span class="hljs-comment">// Categoria: score &gt;= 80 = &quot;MAXIMA&quot;</span>

<span class="hljs-comment">// 7. Resultado DEVE ser:</span>
{
  <span class="hljs-string">&quot;scoreFinal&quot;</span>: <span class="hljs-number">91</span>,
  <span class="hljs-string">&quot;categoria&quot;</span>: <span class="hljs-string">&quot;MAXIMA&quot;</span>,
  <span class="hljs-string">&quot;detalhamento&quot;</span>: {
    <span class="hljs-string">&quot;periodoCorreto&quot;</span>: <span class="hljs-number">1.0</span>,
    <span class="hljs-string">&quot;ira&quot;</span>: <span class="hljs-number">0.95</span>,
    <span class="hljs-string">&quot;tempoNoCurso&quot;</span>: <span class="hljs-number">0.9</span>,
    <span class="hljs-string">&quot;situacaoEspecial&quot;</span>: <span class="hljs-number">0.9</span>,
    <span class="hljs-string">&quot;ordemSolicitacao&quot;</span>: <span class="hljs-number">0.996</span>
  },
  <span class="hljs-string">&quot;explicacao&quot;</span>: [
    <span class="hljs-string">&quot;âœ… Disciplina no perÃ­odo correto (7Âº)&quot;</span>,
    <span class="hljs-string">&quot;âœ… IRA excelente (8.5)&quot;</span>,
    <span class="hljs-string">&quot;âœ… Tempo adequado no curso (8/8 semestres)&quot;</span>,
    <span class="hljs-string">&quot;ğŸ“ Aluno formando (prioridade mÃ¡xima)&quot;</span>,
    <span class="hljs-string">&quot;âœ… SolicitaÃ§Ã£o feita rapidamente (30min apÃ³s abertura)&quot;</span>
  ]
}
</code></pre>
<p><strong>âŒ FALHA CRÃTICA:</strong>
Qualquer variaÃ§Ã£o no cÃ¡lculo = <strong>BUG NO ALGORITMO DE PRIORIDADE</strong></p>
<hr>
<h4 id="-cenÃ¡rio-62-processamento-de-fila-com-mÃºltiplas-prioridades">ğŸ¯ CENÃRIO 6.2: Processamento de Fila com MÃºltiplas Prioridades</h4>
<p><strong>ğŸ“‹ CONTEXTO:</strong></p>
<ul>
<li>Disciplina DCC401 tem 30 vagas</li>
<li>45 pedidos recebidos</li>
<li>Alunos com diferentes prioridades:
<ul>
<li>3 alunos MAXIMA (scores: 91, 89, 87)</li>
<li>8 alunos ALTA (scores: 75-84)</li>
<li>15 alunos MEDIA (scores: 50-65)</li>
<li>19 alunos BAIXA (scores: 35-49)</li>
</ul>
</li>
</ul>
<p><strong>âš¡ AÃ‡ÃƒO:</strong>
Sistema processa alocaÃ§Ã£o automÃ¡tica</p>
<p><strong>âœ… RESULTADO ESPERADO:</strong></p>
<pre><code class="language-javascript"><span class="hljs-comment">// 1. OrdenaÃ§Ã£o DEVE ser por score decrescente:</span>
<span class="hljs-keyword">const</span> pedidosOrdenados = [
  { <span class="hljs-attr">alunoId</span>: <span class="hljs-number">101</span>, <span class="hljs-attr">score</span>: <span class="hljs-number">91</span>, <span class="hljs-attr">nome</span>: <span class="hljs-string">&quot;JoÃ£o Silva&quot;</span> },      <span class="hljs-comment">// MAXIMA</span>
  { <span class="hljs-attr">alunoId</span>: <span class="hljs-number">102</span>, <span class="hljs-attr">score</span>: <span class="hljs-number">89</span>, <span class="hljs-attr">nome</span>: <span class="hljs-string">&quot;Maria Santos&quot;</span> },    <span class="hljs-comment">// MAXIMA</span>
  { <span class="hljs-attr">alunoId</span>: <span class="hljs-number">103</span>, <span class="hljs-attr">score</span>: <span class="hljs-number">87</span>, <span class="hljs-attr">nome</span>: <span class="hljs-string">&quot;Pedro Costa&quot;</span> },     <span class="hljs-comment">// MAXIMA</span>
  { <span class="hljs-attr">alunoId</span>: <span class="hljs-number">104</span>, <span class="hljs-attr">score</span>: <span class="hljs-number">84</span>, <span class="hljs-attr">nome</span>: <span class="hljs-string">&quot;Ana Silva&quot;</span> },       <span class="hljs-comment">// ALTA</span>
  <span class="hljs-comment">// ... continuando em ordem decrescente</span>
  { <span class="hljs-attr">alunoId</span>: <span class="hljs-number">145</span>, <span class="hljs-attr">score</span>: <span class="hljs-number">35</span>, <span class="hljs-attr">nome</span>: <span class="hljs-string">&quot;Carlos Lima&quot;</span> }      <span class="hljs-comment">// BAIXA (Ãºltimo)</span>
];

<span class="hljs-comment">// 2. AlocaÃ§Ã£o DEVE seguir ordem estrita:</span>
<span class="hljs-comment">// Vagas 1-30: primeiros 30 da lista ordenada</span>
<span class="hljs-comment">// Lista de espera: posiÃ§Ãµes 31-45</span>

<span class="hljs-comment">// 3. Resultado DEVE ser:</span>
<span class="hljs-keyword">const</span> resultado = {
  <span class="hljs-attr">aprovados</span>: [
    { <span class="hljs-attr">alunoId</span>: <span class="hljs-number">101</span>, <span class="hljs-attr">vaga</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">prioridade</span>: <span class="hljs-string">&quot;MAXIMA&quot;</span> },
    { <span class="hljs-attr">alunoId</span>: <span class="hljs-number">102</span>, <span class="hljs-attr">vaga</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">prioridade</span>: <span class="hljs-string">&quot;MAXIMA&quot;</span> },
    <span class="hljs-comment">// ... atÃ© 30</span>
    { <span class="hljs-attr">alunoId</span>: <span class="hljs-number">130</span>, <span class="hljs-attr">vaga</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">prioridade</span>: <span class="hljs-string">&quot;MEDIA&quot;</span> }
  ],
  <span class="hljs-attr">listaEspera</span>: [
    { <span class="hljs-attr">alunoId</span>: <span class="hljs-number">131</span>, <span class="hljs-attr">posicao</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">prioridade</span>: <span class="hljs-string">&quot;MEDIA&quot;</span> },
    { <span class="hljs-attr">alunoId</span>: <span class="hljs-number">132</span>, <span class="hljs-attr">posicao</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">prioridade</span>: <span class="hljs-string">&quot;MEDIA&quot;</span> },
    <span class="hljs-comment">// ... atÃ© 15</span>
    { <span class="hljs-attr">alunoId</span>: <span class="hljs-number">145</span>, <span class="hljs-attr">posicao</span>: <span class="hljs-number">15</span>, <span class="hljs-attr">prioridade</span>: <span class="hljs-string">&quot;BAIXA&quot;</span> }
  ]
};

<span class="hljs-comment">// 4. VerificaÃ§Ã£o de integridade:</span>
- <span class="hljs-title class_">Todos</span> os <span class="hljs-variable constant_">MAXIMA</span> devem estar aprovados âœ“
- <span class="hljs-title class_">Nenhum</span> <span class="hljs-variable constant_">BAIXA</span> deve estar aprovado se hÃ¡ <span class="hljs-variable constant_">ALTA</span> na lista de espera âœ“
- <span class="hljs-title class_">Ordem</span> dentro da mesma categoria deve ser por score âœ“
</code></pre>
<p><strong>âŒ FALHAS CRÃTICAS:</strong></p>
<ul>
<li>Se aluno BAIXA for aprovado antes de ALTA = <strong>BUG GRAVE</strong></li>
<li>Se ordem nÃ£o for respeitada = <strong>BUG NO ALGORITMO</strong></li>
</ul>
<hr>
<h3 id="7ï¸âƒ£-sistema-de-redistribuiÃ§Ã£o-inteligente">7ï¸âƒ£ Sistema de RedistribuiÃ§Ã£o Inteligente</h3>
<h4 id="-cenÃ¡rio-71-redistribuiÃ§Ã£o-por-desequilÃ­brio-de-demanda">ğŸ¯ CENÃRIO 7.1: RedistribuiÃ§Ã£o por DesequilÃ­brio de Demanda</h4>
<p><strong>ğŸ“‹ CONTEXTO:</strong></p>
<ul>
<li>DCC401 Turma A: 50 pedidos, 30 vagas (dÃ©ficit: 20)</li>
<li>DCC401 Turma B: 15 pedidos, 30 vagas (excesso: 15)</li>
<li>Ambas as turmas sÃ£o idÃªnticas (mesmo horÃ¡rio, mesmo docente)</li>
</ul>
<p><strong>âš¡ AÃ‡ÃƒO:</strong>
Sistema executa algoritmo de balanceamento</p>
<p><strong>âœ… RESULTADO ESPERADO:</strong></p>
<pre><code class="language-javascript"><span class="hljs-comment">// 1. DetecÃ§Ã£o de desequilÃ­brio:</span>
<span class="hljs-keyword">const</span> turmaA = { <span class="hljs-attr">pedidos</span>: <span class="hljs-number">50</span>, <span class="hljs-attr">vagas</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">razao</span>: <span class="hljs-number">50</span>/<span class="hljs-number">30</span> = <span class="hljs-number">1.67</span> };
<span class="hljs-keyword">const</span> turmaB = { <span class="hljs-attr">pedidos</span>: <span class="hljs-number">15</span>, <span class="hljs-attr">vagas</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">razao</span>: <span class="hljs-number">15</span>/<span class="hljs-number">30</span> = <span class="hljs-number">0.50</span> };
<span class="hljs-keyword">const</span> desequilibrio = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(<span class="hljs-number">1.67</span> - <span class="hljs-number">0.50</span>) = <span class="hljs-number">1.17</span> &gt; <span class="hljs-number">0.3</span>; <span class="hljs-comment">// DESEQUILIBRADO</span>

<span class="hljs-comment">// 2. CÃ¡lculo de redistribuiÃ§Ã£o ideal:</span>
<span class="hljs-keyword">const</span> totalPedidos = <span class="hljs-number">50</span> + <span class="hljs-number">15</span> = <span class="hljs-number">65</span>;
<span class="hljs-keyword">const</span> totalVagas = <span class="hljs-number">30</span> + <span class="hljs-number">30</span> = <span class="hljs-number">60</span>;
<span class="hljs-keyword">const</span> distribuicaoIdeal = totalPedidos / <span class="hljs-number">2</span> = <span class="hljs-number">32.5</span>;

<span class="hljs-comment">// RedistribuiÃ§Ã£o sugerida:</span>
<span class="hljs-keyword">const</span> novaDistribuicaoA = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">32</span>, <span class="hljs-number">30</span>) = <span class="hljs-number">30</span>; <span class="hljs-comment">// mantÃ©m limite da sala</span>
<span class="hljs-keyword">const</span> novaDistribuicaoB = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">33</span>, <span class="hljs-number">30</span>) = <span class="hljs-number">30</span>; <span class="hljs-comment">// mantÃ©m limite da sala</span>

<span class="hljs-comment">// 3. Como nÃ£o Ã© possÃ­vel redistribuir vagas (salas cheias),</span>
<span class="hljs-comment">//    o sistema DEVE sugerir:</span>
{
  <span class="hljs-string">&quot;tipo&quot;</span>: <span class="hljs-string">&quot;NOVA_TURMA_NECESSARIA&quot;</span>,
  <span class="hljs-string">&quot;motivo&quot;</span>: <span class="hljs-string">&quot;Demanda (65) excede capacidade total (60)&quot;</span>,
  <span class="hljs-string">&quot;sugestoes&quot;</span>: [
    <span class="hljs-string">&quot;Abrir DCC401 Turma C com 20 vagas&quot;</span>,
    <span class="hljs-string">&quot;Aumentar capacidade das salas existentes&quot;</span>
  ],
  <span class="hljs-string">&quot;impacto&quot;</span>: {
    <span class="hljs-string">&quot;alunosNaoAtendidos&quot;</span>: <span class="hljs-number">5</span>,
    <span class="hljs-string">&quot;listaEsperaTotalAtual&quot;</span>: <span class="hljs-number">15</span>
  }
}

<span class="hljs-comment">// 4. Interface DEVE exibir:</span>
<span class="hljs-string">&quot;âš ï¸ Demanda alta detectada para DCC401.
Recomenda-se abrir nova turma ou aumentar capacidade das salas.&quot;</span>
</code></pre>
<hr>
<h4 id="-cenÃ¡rio-72-redistribuiÃ§Ã£o-com-preferÃªncias-de-horÃ¡rio">ğŸ¯ CENÃRIO 7.2: RedistribuiÃ§Ã£o com PreferÃªncias de HorÃ¡rio</h4>
<p><strong>ğŸ“‹ CONTEXTO:</strong></p>
<ul>
<li>DCC401 Turma A (ManhÃ£): 35 pedidos, 30 vagas</li>
<li>DCC401 Turma B (Noite): 20 pedidos, 30 vagas</li>
<li>15 alunos da Turma A marcaram &quot;aceito realocaÃ§Ã£o&quot;</li>
<li>5 alunos tÃªm restriÃ§Ã£o de horÃ¡rio (trabalham de dia)</li>
</ul>
<p><strong>âš¡ AÃ‡ÃƒO:</strong>
Sistema tenta redistribuir considerando preferÃªncias</p>
<p><strong>âœ… RESULTADO ESPERADO:</strong></p>
<pre><code class="language-javascript"><span class="hljs-comment">// 1. AnÃ¡lise de elegibilidade para redistribuiÃ§Ã£o:</span>
<span class="hljs-keyword">const</span> elegiveisRealocacao = alunosDeficit.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">aluno</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> aluno.<span class="hljs-property">aceitaRealocacao</span> &amp;&amp; !aluno.<span class="hljs-property">restricaoHorario</span>;
});
<span class="hljs-comment">// Resultado: 10 alunos elegÃ­veis (15 - 5 com restriÃ§Ã£o)</span>

<span class="hljs-comment">// 2. CÃ¡lculo de redistribuiÃ§Ã£o:</span>
<span class="hljs-keyword">const</span> deficitTurmaA = <span class="hljs-number">35</span> - <span class="hljs-number">30</span> = <span class="hljs-number">5</span>;
<span class="hljs-keyword">const</span> excessoTurmaB = <span class="hljs-number">30</span> - <span class="hljs-number">20</span> = <span class="hljs-number">10</span>;
<span class="hljs-keyword">const</span> podeRealimar = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(deficitTurmaA, excessoTurmaB, elegiveisRealocacao.<span class="hljs-property">length</span>);
<span class="hljs-comment">// podeReallocar = min(5, 10, 10) = 5 alunos</span>

<span class="hljs-comment">// 3. SeleÃ§Ã£o dos 5 alunos para realocar:</span>
<span class="hljs-comment">// CritÃ©rio: menores prioridades primeiro (preservar altas prioridades na turma preferida)</span>
<span class="hljs-keyword">const</span> alunosParaRealocar = elegiveisRealocacao
  .<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">prioridadeScore</span> - b.<span class="hljs-property">prioridadeScore</span>)
  .<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>);

<span class="hljs-comment">// 4. Resultado da redistribuiÃ§Ã£o:</span>
<span class="hljs-keyword">const</span> redistribuicao = {
  <span class="hljs-attr">turmaA</span>: { <span class="hljs-attr">vagasApos</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">pedidosApos</span>: <span class="hljs-number">30</span> },  <span class="hljs-comment">// balanceada</span>
  <span class="hljs-attr">turmaB</span>: { <span class="hljs-attr">vagasApos</span>: <span class="hljs-number">25</span>, <span class="hljs-attr">pedidosApos</span>: <span class="hljs-number">25</span> },  <span class="hljs-comment">// balanceada</span>
  <span class="hljs-attr">alunosRealocados</span>: <span class="hljs-number">5</span>,
  <span class="hljs-attr">alunosNotificados</span>: <span class="hljs-number">5</span>
};

<span class="hljs-comment">// 5. NotificaÃ§Ãµes DEVEM ser enviadas:</span>
alunosParaRealocar.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">aluno</span> =&gt;</span> {
  <span class="hljs-title function_">enviarEmail</span>(aluno.<span class="hljs-property">email</span>, {
    <span class="hljs-attr">assunto</span>: <span class="hljs-string">&quot;RealocaÃ§Ã£o de turma - DCC401&quot;</span>,
    <span class="hljs-attr">corpo</span>: <span class="hljs-string">`VocÃª foi realocado da Turma A (manhÃ£) para Turma B (noite)
            conforme sua indicaÃ§Ã£o de aceitar realocaÃ§Ã£o.`</span>
  });
});
</code></pre>
<p><strong>ğŸ§ª COMO TESTAR:</strong></p>
<ol>
<li>Criar cenÃ¡rio com desequilÃ­brio especÃ­fico</li>
<li>Marcar exatamente 15 alunos como &quot;aceita realocaÃ§Ã£o&quot;</li>
<li>Marcar 5 com restriÃ§Ã£o de horÃ¡rio</li>
<li>Executar redistribuiÃ§Ã£o</li>
<li>Verificar se exatamente 5 foram realocados</li>
<li>Verificar se foram os de menor prioridade</li>
</ol>
<hr>
<h2 id="-estados-de-sistema">ğŸ”„ Estados de Sistema</h2>
<h3 id="8ï¸âƒ£-mÃ¡quina-de-estados-para-turma">8ï¸âƒ£ MÃ¡quina de Estados para Turma</h3>
<h4 id="-cenÃ¡rio-81-transiÃ§Ãµes-de-estado-vÃ¡lidas">ğŸ¯ CENÃRIO 8.1: TransiÃ§Ãµes de Estado VÃ¡lidas</h4>
<p><strong>ğŸ“‹ CONTEXTO:</strong>
Estados possÃ­veis: <code>rascunho</code> â†’ <code>ativa</code> â†’ <code>cancelada</code> â†’ <code>concluida</code></p>
<p><strong>âš¡ TRANSIÃ‡Ã•ES VÃLIDAS:</strong></p>
<pre><code class="language-javascript"><span class="hljs-keyword">const</span> transicaoesPermitidas = {
  <span class="hljs-string">&#x27;rascunho&#x27;</span>: [<span class="hljs-string">&#x27;ativa&#x27;</span>, <span class="hljs-string">&#x27;cancelada&#x27;</span>],
  <span class="hljs-string">&#x27;ativa&#x27;</span>: [<span class="hljs-string">&#x27;cancelada&#x27;</span>, <span class="hljs-string">&#x27;concluida&#x27;</span>],
  <span class="hljs-string">&#x27;cancelada&#x27;</span>: [],  <span class="hljs-comment">// estado final</span>
  <span class="hljs-string">&#x27;concluida&#x27;</span>: []   <span class="hljs-comment">// estado final</span>
};

<span class="hljs-comment">// CENÃRIO 8.1a: rascunho â†’ ativa</span>
<span class="hljs-keyword">const</span> turma = { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">status</span>: <span class="hljs-string">&#x27;rascunho&#x27;</span> };
<span class="hljs-keyword">const</span> resultado = <span class="hljs-keyword">await</span> <span class="hljs-title function_">alterarStatus</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;ativa&#x27;</span>);
<span class="hljs-comment">// DEVE retornar: { success: true, statusAnterior: &#x27;rascunho&#x27;, statusNovo: &#x27;ativa&#x27; }</span>

<span class="hljs-comment">// CENÃRIO 8.1b: rascunho â†’ cancelada</span>
<span class="hljs-keyword">const</span> resultado2 = <span class="hljs-keyword">await</span> <span class="hljs-title function_">alterarStatus</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;cancelada&#x27;</span>);
<span class="hljs-comment">// DEVE retornar: { success: true, statusAnterior: &#x27;rascunho&#x27;, statusNovo: &#x27;cancelada&#x27; }</span>

<span class="hljs-comment">// CENÃRIO 8.1c: ativa â†’ concluida</span>
<span class="hljs-keyword">const</span> turmaAtiva = { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">status</span>: <span class="hljs-string">&#x27;ativa&#x27;</span> };
<span class="hljs-keyword">const</span> resultado3 = <span class="hljs-keyword">await</span> <span class="hljs-title function_">alterarStatus</span>(<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;concluida&#x27;</span>);
<span class="hljs-comment">// DEVE retornar: { success: true, statusAnterior: &#x27;ativa&#x27;, statusNovo: &#x27;concluida&#x27; }</span>
</code></pre>
<p><strong>âœ… COMPORTAMENTO ESPERADO:</strong></p>
<ul>
<li>TransiÃ§Ãµes vÃ¡lidas sÃ£o aceitas</li>
<li>Log de transiÃ§Ã£o Ã© criado</li>
<li>Timestamps sÃ£o atualizados</li>
<li>Eventos <a href="http://Socket.IO">Socket.IO</a> sÃ£o emitidos</li>
</ul>
<hr>
<h4 id="-cenÃ¡rio-82-transiÃ§Ãµes-de-estado-invÃ¡lidas">ğŸ¯ CENÃRIO 8.2: TransiÃ§Ãµes de Estado InvÃ¡lidas</h4>
<p><strong>âš¡ TRANSIÃ‡Ã•ES INVÃLIDAS:</strong></p>
<pre><code class="language-javascript"><span class="hljs-comment">// CENÃRIO 8.2a: cancelada â†’ ativa (INVÃLIDO)</span>
<span class="hljs-keyword">const</span> turmaCancelada = { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">status</span>: <span class="hljs-string">&#x27;cancelada&#x27;</span> };
<span class="hljs-keyword">const</span> resultado = <span class="hljs-keyword">await</span> <span class="hljs-title function_">alterarStatus</span>(<span class="hljs-number">3</span>, <span class="hljs-string">&#x27;ativa&#x27;</span>);

<span class="hljs-comment">// DEVE retornar erro:</span>
{
  <span class="hljs-string">&quot;success&quot;</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-string">&quot;error&quot;</span>: <span class="hljs-string">&quot;INVALID_TRANSITION&quot;</span>,
  <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;TransiÃ§Ã£o invÃ¡lida: cancelada â†’ ativa nÃ£o Ã© permitida&quot;</span>,
  <span class="hljs-string">&quot;estadoAtual&quot;</span>: <span class="hljs-string">&quot;cancelada&quot;</span>,
  <span class="hljs-string">&quot;estadoTentado&quot;</span>: <span class="hljs-string">&quot;ativa&quot;</span>,
  <span class="hljs-string">&quot;transicoesPossiveis&quot;</span>: []
}

<span class="hljs-comment">// CENÃRIO 8.2b: concluida â†’ rascunho (INVÃLIDO)</span>
<span class="hljs-keyword">const</span> turmaConcluida = { <span class="hljs-attr">id</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">status</span>: <span class="hljs-string">&#x27;concluida&#x27;</span> };
<span class="hljs-keyword">const</span> resultado2 = <span class="hljs-keyword">await</span> <span class="hljs-title function_">alterarStatus</span>(<span class="hljs-number">4</span>, <span class="hljs-string">&#x27;rascunho&#x27;</span>);

<span class="hljs-comment">// DEVE retornar erro similar com:</span>
<span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;TransiÃ§Ã£o invÃ¡lida: concluida â†’ rascunho nÃ£o Ã© permitida&quot;</span>
</code></pre>
<p><strong>âŒ FALHA CRÃTICA:</strong>
Se transiÃ§Ã£o invÃ¡lida for aceita = <strong>BUG DE LÃ“GICA GRAVE</strong></p>
<hr>
<h3 id="9ï¸âƒ£-estados-de-matrÃ­cula-e-consistÃªncia">9ï¸âƒ£ Estados de MatrÃ­cula e ConsistÃªncia</h3>
<h4 id="-cenÃ¡rio-91-verificaÃ§Ã£o-de-consistÃªncia-de-dados">ğŸ¯ CENÃRIO 9.1: VerificaÃ§Ã£o de ConsistÃªncia de Dados</h4>
<p><strong>ğŸ“‹ CONTEXTO:</strong></p>
<ul>
<li>Aluno tem matrÃ­cula &quot;confirmada&quot; em DCC001</li>
<li>Sistema verifica se turma correspondente existe e estÃ¡ ativa</li>
</ul>
<p><strong>âš¡ AÃ‡ÃƒO:</strong>
Executar verificaÃ§Ã£o de integridade</p>
<p><strong>âœ… RESULTADO ESPERADO:</strong></p>
<pre><code class="language-javascript"><span class="hljs-comment">// Query de verificaÃ§Ã£o DEVE executar:</span>
<span class="hljs-variable constant_">SELECT</span>
  m.<span class="hljs-property">id</span> <span class="hljs-keyword">as</span> matriculaId,
  m.<span class="hljs-property">status</span> <span class="hljs-keyword">as</span> statusMatricula,
  t.<span class="hljs-property">id</span> <span class="hljs-keyword">as</span> turmaId,
  t.<span class="hljs-property">status</span> <span class="hljs-keyword">as</span> statusTurma,
  <span class="hljs-variable constant_">CASE</span>
    <span class="hljs-variable constant_">WHEN</span> t.<span class="hljs-property">status</span> != <span class="hljs-string">&#x27;ativa&#x27;</span> <span class="hljs-variable constant_">THEN</span> <span class="hljs-string">&#x27;INCONSISTENTE&#x27;</span>
    <span class="hljs-variable constant_">WHEN</span> t.<span class="hljs-property">id</span> <span class="hljs-variable constant_">IS</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">THEN</span> <span class="hljs-string">&#x27;TURMA_NAO_EXISTE&#x27;</span>
    <span class="hljs-variable constant_">ELSE</span> <span class="hljs-string">&#x27;CONSISTENTE&#x27;</span>
  <span class="hljs-variable constant_">END</span> <span class="hljs-keyword">as</span> situacao
<span class="hljs-variable constant_">FROM</span> <span class="hljs-title class_">Matricula</span> m
<span class="hljs-variable constant_">LEFT</span> <span class="hljs-variable constant_">JOIN</span> <span class="hljs-title class_">Turma</span> t <span class="hljs-variable constant_">ON</span> t.<span class="hljs-property">id</span> = m.<span class="hljs-property">TurmaId</span>
<span class="hljs-variable constant_">WHERE</span> m.<span class="hljs-property">status</span> = <span class="hljs-string">&#x27;confirmada&#x27;</span>
<span class="hljs-variable constant_">AND</span> (t.<span class="hljs-property">status</span> != <span class="hljs-string">&#x27;ativa&#x27;</span> <span class="hljs-variable constant_">OR</span> t.<span class="hljs-property">id</span> <span class="hljs-variable constant_">IS</span> <span class="hljs-variable constant_">NULL</span>);

<span class="hljs-comment">// Se retornar registros, sistema DEVE:</span>
{
  <span class="hljs-string">&quot;inconsistenciasDetectadas&quot;</span>: [
    {
      <span class="hljs-string">&quot;matriculaId&quot;</span>: <span class="hljs-number">123</span>,
      <span class="hljs-string">&quot;alunoNome&quot;</span>: <span class="hljs-string">&quot;JoÃ£o Silva&quot;</span>,
      <span class="hljs-string">&quot;problema&quot;</span>: <span class="hljs-string">&quot;TURMA_CANCELADA&quot;</span>,
      <span class="hljs-string">&quot;descricao&quot;</span>: <span class="hljs-string">&quot;Aluno matriculado em turma cancelada&quot;</span>,
      <span class="hljs-string">&quot;acaoRecomendada&quot;</span>: <span class="hljs-string">&quot;Cancelar matrÃ­cula ou realocar para turma ativa&quot;</span>
    }
  ],
  <span class="hljs-string">&quot;totalInconsistencias&quot;</span>: <span class="hljs-number">1</span>,
  <span class="hljs-string">&quot;acaoAutomatica&quot;</span>: <span class="hljs-string">&quot;NOTIFICAR_COORDENACAO&quot;</span>
}

<span class="hljs-comment">// Interface DEVE exibir alerta:</span>
<span class="hljs-string">&quot;âš ï¸ 1 inconsistÃªncia detectada no sistema. Verificar relatÃ³rio de integridade.&quot;</span>
</code></pre>
<p><strong>âŒ FALHA CRÃTICA:</strong>
Se inconsistÃªncias nÃ£o forem detectadas = <strong>BUG DE INTEGRIDADE</strong></p>
<hr>
<h2 id="ï¸-matriz-de-falhas">âš ï¸ Matriz de Falhas</h2>
<h3 id="-cenÃ¡rios-de-falha-crÃ­tica">ğŸš¨ CenÃ¡rios de Falha CrÃ­tica</h3>
<table>
<thead>
<tr>
<th><strong>CenÃ¡rio</strong></th>
<th><strong>Comportamento Esperado</strong></th>
<th><strong>Comportamento de Bug</strong></th>
<th><strong>Severidade</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>DependÃªncia circular aceita</td>
<td>Sistema rejeita com erro claro</td>
<td>Aceita dependÃªncia, quebra prÃ©-requisitos</td>
<td>ğŸ”´ CRÃTICA</td>
</tr>
<tr>
<td>Vaga acima da capacidade</td>
<td>Sistema rejeita, sugere alternativas</td>
<td>Aceita, causa superlotaÃ§Ã£o</td>
<td>ğŸ”´ CRÃTICA</td>
</tr>
<tr>
<td>TransiÃ§Ã£o de estado invÃ¡lida</td>
<td>Sistema rejeita com erro</td>
<td>Aceita transiÃ§Ã£o, dados inconsistentes</td>
<td>ğŸ”´ CRÃTICA</td>
</tr>
<tr>
<td>Prioridade calculada errada</td>
<td>FÃ³rmula matemÃ¡tica exata</td>
<td>CÃ¡lculo diferente do esperado</td>
<td>ğŸŸ¡ ALTA</td>
</tr>
<tr>
<td>ValidaÃ§Ã£o de unicidade falhando</td>
<td>Campo fica invÃ¡lido em tempo real</td>
<td>Aceita duplicata</td>
<td>ğŸŸ¡ ALTA</td>
</tr>
<tr>
<td>NotificaÃ§Ãµes nÃ£o enviadas</td>
<td>Email/SMS enviado para todos afetados</td>
<td>UsuÃ¡rios nÃ£o sÃ£o informados</td>
<td>ğŸŸ¡ ALTA</td>
</tr>
<tr>
<td>Dados perdidos em erro de rede</td>
<td>FormulÃ¡rio mantÃ©m dados, permite retry</td>
<td>FormulÃ¡rio limpo, dados perdidos</td>
<td>ğŸŸ¡ MÃ‰DIA</td>
</tr>
<tr>
<td>Loading spinner nÃ£o aparece</td>
<td>Interface mostra feedback visual</td>
<td>UsuÃ¡rio nÃ£o sabe se aÃ§Ã£o estÃ¡ processando</td>
<td>ğŸŸ¢ BAIXA</td>
</tr>
</tbody>
</table>
<h3 id="-scripts-de-teste-automatizado">ğŸ”§ Scripts de Teste Automatizado</h3>
<pre><code class="language-javascript"><span class="hljs-comment">// Script para validar comportamentos crÃ­ticos</span>
<span class="hljs-title function_">describe</span>(<span class="hljs-string">&#x27;Comportamentos CrÃ­ticos&#x27;</span>, <span class="hljs-function">() =&gt;</span> {

  <span class="hljs-title function_">test</span>(<span class="hljs-string">&#x27;CRÃTICO: DependÃªncia circular deve ser rejeitada&#x27;</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">// Arrange</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">criarDisciplina</span>(<span class="hljs-string">&#x27;DCC001&#x27;</span>, []);
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">criarDisciplina</span>(<span class="hljs-string">&#x27;DCC002&#x27;</span>, [<span class="hljs-string">&#x27;DCC001&#x27;</span>]);

    <span class="hljs-comment">// Act</span>
    <span class="hljs-keyword">const</span> resultado = <span class="hljs-keyword">await</span> <span class="hljs-title function_">adicionarPreRequisito</span>(<span class="hljs-string">&#x27;DCC001&#x27;</span>, <span class="hljs-string">&#x27;DCC002&#x27;</span>);

    <span class="hljs-comment">// Assert</span>
    <span class="hljs-title function_">expect</span>(resultado.<span class="hljs-property">sucesso</span>).<span class="hljs-title function_">toBe</span>(<span class="hljs-literal">false</span>);
    <span class="hljs-title function_">expect</span>(resultado.<span class="hljs-property">erro</span>).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">&#x27;dependÃªncia circular&#x27;</span>);
    <span class="hljs-title function_">expect</span>(resultado.<span class="hljs-property">caminhoCiclo</span>).<span class="hljs-title function_">toEqual</span>([<span class="hljs-string">&#x27;DCC001&#x27;</span>, <span class="hljs-string">&#x27;DCC002&#x27;</span>, <span class="hljs-string">&#x27;DCC001&#x27;</span>]);
  });

  <span class="hljs-title function_">test</span>(<span class="hljs-string">&#x27;CRÃTICO: Vagas nÃ£o podem exceder capacidade da sala&#x27;</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">// Arrange</span>
    <span class="hljs-keyword">const</span> sala = <span class="hljs-keyword">await</span> <span class="hljs-title function_">criarSala</span>({ <span class="hljs-attr">capacidade</span>: <span class="hljs-number">40</span> });
    <span class="hljs-keyword">const</span> turma = <span class="hljs-keyword">await</span> <span class="hljs-title function_">criarTurma</span>({ <span class="hljs-attr">salaId</span>: sala.<span class="hljs-property">id</span> });

    <span class="hljs-comment">// Act</span>
    <span class="hljs-keyword">const</span> resultado = <span class="hljs-keyword">await</span> <span class="hljs-title function_">definirVagas</span>(turma.<span class="hljs-property">id</span>, <span class="hljs-number">45</span>);

    <span class="hljs-comment">// Assert</span>
    <span class="hljs-title function_">expect</span>(resultado.<span class="hljs-property">sucesso</span>).<span class="hljs-title function_">toBe</span>(<span class="hljs-literal">false</span>);
    <span class="hljs-title function_">expect</span>(resultado.<span class="hljs-property">erro</span>).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">&#x27;CAPACITY_EXCEEDED&#x27;</span>);
    <span class="hljs-title function_">expect</span>(resultado.<span class="hljs-property">excesso</span>).<span class="hljs-title function_">toBe</span>(<span class="hljs-number">5</span>);
  });

  <span class="hljs-title function_">test</span>(<span class="hljs-string">&#x27;ALTA: CÃ¡lculo de prioridade deve ser exato&#x27;</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">// Arrange</span>
    <span class="hljs-keyword">const</span> aluno = <span class="hljs-title function_">criarAlunoMock</span>({
      <span class="hljs-attr">ira</span>: <span class="hljs-number">8.5</span>,
      <span class="hljs-attr">tempoNoCurso</span>: <span class="hljs-number">8</span>,
      <span class="hljs-attr">formando</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">periodoAtual</span>: <span class="hljs-number">7</span>
    });
    <span class="hljs-keyword">const</span> disciplina = <span class="hljs-title function_">criarDisciplinaMock</span>({ <span class="hljs-attr">periodoRecomendado</span>: <span class="hljs-number">7</span> });

    <span class="hljs-comment">// Act</span>
    <span class="hljs-keyword">const</span> prioridade = <span class="hljs-title function_">calcularPrioridade</span>(aluno, disciplina);

    <span class="hljs-comment">// Assert</span>
    <span class="hljs-title function_">expect</span>(prioridade.<span class="hljs-property">scoreFinal</span>).<span class="hljs-title function_">toBe</span>(<span class="hljs-number">91</span>); <span class="hljs-comment">// Exato conforme cÃ¡lculo documentado</span>
    <span class="hljs-title function_">expect</span>(prioridade.<span class="hljs-property">categoria</span>).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">&#x27;MAXIMA&#x27;</span>);
  });

});
</code></pre>
<hr>
<div align="center">
<h3 id="-conclusÃ£o">ğŸ¯ ConclusÃ£o</h3>
<p>Esta documentaÃ§Ã£o detalha <strong>EXATAMENTE</strong> como sua aplicaÃ§Ã£o deve se comportar em cada situaÃ§Ã£o. Use-a como:</p>
<p>âœ… <strong>EspecificaÃ§Ã£o de Testes</strong>: Cada cenÃ¡rio pode virar um teste automatizado
âœ… <strong>DetecÃ§Ã£o de Bugs</strong>: Compare comportamento real vs esperado
âœ… <strong>DocumentaÃ§Ã£o de Falhas</strong>: Identifique o que Ã© bug vs feature
âœ… <strong>Guia de Debug</strong>: Entenda onde procurar quando algo der errado</p>
<hr>
<p><strong>ğŸ“ Documento extremamente detalhado - Para identificaÃ§Ã£o precisa de bugs vs features</strong></p>
</div>
            
            
        </body>
        </html>